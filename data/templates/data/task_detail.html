{% extends "data/base.html" %}
{% block title %}Task {{ task.name }} Details{% endblock %}
{% block content %}
  <h1>{{ task.name }} Details</h1>
  <h2>Synsets</h2>
  <ul>
    {% for synset in task.synsets.all %}
    <a href="{% url 'synset_detail' synset.name %}" class="{{ 'btn btn-'|add:synset.state }}"> {{ synset.name }}</a>
    {% empty %}
    <li>None</li>
    {% endfor %}
  </ul>
  <h2>Scenes</h2>
  <ul>
    <li>Matched:
      <ul>
        {% for scene, info in task.scene_matching_dict.items %}
          {% if info.matched_ready %}
            <li><a class="font-weight-bold" href="{% url 'scene_detail' scene %}">{{ scene }}</a></li>
          {% endif %}
        {% empty %}
        <li>None</li>
        {% endfor %}
      </ul>
    </li>
    
    <li>Planned:
      <ul>
        {% for scene, info in task.scene_matching_dict.items %}
          {% if not info.matched_ready and info.matched_planned %}
            <li><a class="font-weight-bold" href="{% url 'scene_detail' scene %}">{{ scene }}</a>: <ul>
              <li>This scene will match in its planned form. In its currently ready form it does not match, because: {{ info.reason_ready }}</li>
            </ul></li>
          {% endif %}
        {% empty %}
        <li>None</li>
        {% endfor %}
      </ul>
    </li>

    <li>Unmatched:
      <ul>
        {% for scene, info in task.scene_matching_dict.items %}
          {% if not info.matched_ready and not info.matched_planned %}
            <li><a class="font-weight-bold" href="{% url 'scene_detail' scene %}">{{ scene }}</a>: {{ info.reason_planned }}</li>
          {% endif %}
        {% empty %}
        <li>None</li>
        {% endfor %}
      </ul>
    </li>
  </ul>
  <h2>Full Definition</h2>
  <pre>
{{ task.definition | safe }}
  </pre>
{% endblock %}
