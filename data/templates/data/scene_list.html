{% extends "data/base.html" %}
{% block title %}{% if page_title %}{{ page_title }}{% else %}BEHAVIOR-1K Scenes{% endif %}{% endblock %}
{% block customstyle %}
  <style>
    table {
      border: 0.3vh solid #dee2e6;
    }
    td, th {
      border: 0.3vh solid #dee2e6;
    }
    .clickable-row:hover {
      cursor: pointer;
      border-left: 0.5vh solid darkorange;
      color: darkorange;
    }
  </style>
  <!-- Clickable row -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const rows = document.querySelectorAll(".clickable-row");
      rows.forEach(row => {
        row.addEventListener("click", () => {
          window.location.href = row.dataset.href;
        });
      });
    });
  </script>
  <!-- Search bar -->
  <script>
    $(document).ready(function(){
      $("#myInput").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#myTable tr").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    });
  </script>
{% endblock %}
{% block content %}
  <h1 class="text-center">{% if page_title %}{{ page_title }}{% else %}BEHAVIOR-1K Scenes{% endif %}</h1>
  <h4 class="text-center">Total count: {{ scene_list | length }}</h4>
  <br>
  <input class="form-control" id="myInput" type="text" placeholder="Search...">
  <br>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Scene</th>
        <th>Rooms</th>
        <th>Objects</th>
        <th>Ready?</th>
      </tr>
    </thead>
    <tbody id="myTable">
      {% for scene in scene_list %}
      <tr class="clickable-row" data-href="{% url 'scene_detail' scene.name %}">
        <td>{{ scene.name }}<a href="{% url 'scene_detail' scene.name %}"></a></td>
        <td>{{ scene.room_count }}</td>
        <td>{{ scene.object_count }}</td>
        <td class="{% if scene.fully_ready %}bg-success{% elif scene.any_ready %}bg-warning{% else %}bg-danger{% endif %}">
          {% if scene.fully_ready %}Fully Ready{% elif scene.any_ready %}Partially Ready{% else %}Not Ready{% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}