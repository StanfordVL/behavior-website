
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/OmniGibson_logo.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.11+insiders-4.26.6">
    
    
      
        <title>sampling_utils - OmniGibson Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.9b35cbb9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-6L1G6GMR63"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-6L1G6GMR63",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-6L1G6GMR63",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#utils.sampling_utils" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="OmniGibson Documentation" class="md-header__button md-logo" aria-label="OmniGibson Documentation" data-md-component="logo">
      
  <img src="../../assets/OmniGibson_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OmniGibson Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              sampling_utils
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/StanfordVL/OmniGibson" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    StanfordVL/OmniGibson
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            <nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        




  
    <li class="md-tabs__item">
      <a href="../../index.html" class="md-tabs__link">
        
  
  Home

      </a>
    </li>
  

      
        




  
    
    
    
      <li class="md-tabs__item">
        <a href="../../getting_started/installation.html" class="md-tabs__link">
          
  
  Getting Started

        </a>
      </li>
    
  

      
        

  




  
    
    
    
      <li class="md-tabs__item">
        <a href="../app_omni.html" class="md-tabs__link md-tabs__link--active">
          
  
  Code Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="OmniGibson Documentation" class="md-nav__button md-logo" aria-label="OmniGibson Documentation" data-md-component="logo">
      
  <img src="../../assets/OmniGibson_logo.png" alt="logo">

    </a>
    OmniGibson Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/StanfordVL/OmniGibson" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    StanfordVL/OmniGibson
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
        
        
          <label class="md-nav__link" for="__nav_2">
            
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/installation.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.78 15.3 6 6 2.11-2.16-6-6-2.11 2.16m3.72-5.2c-.39 0-.81-.05-1.14-.19L4.97 21.25l-2.11-2.11 7.41-7.4L8.5 9.96l-.72.7-1.45-1.41v2.86l-.7.7-3.52-3.56.7-.7h2.81l-1.4-1.41 3.56-3.56a2.976 2.976 0 0 1 4.22 0L9.89 5.74l1.41 1.4-.71.71 1.79 1.78 1.82-1.88c-.14-.33-.2-.75-.2-1.12a3.49 3.49 0 0 1 3.5-3.52c.59 0 1.11.14 1.58.42L16.41 6.2l1.5 1.5 2.67-2.67c.28.47.42.97.42 1.6 0 1.92-1.55 3.47-3.5 3.47Z"/></svg>
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/quickstart.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.064 0a8.75 8.75 0 0 0-6.187 2.563l-.459.458c-.314.314-.616.641-.904.979H3.31a1.75 1.75 0 0 0-1.49.833L.11 7.607a.75.75 0 0 0 .418 1.11l3.102.954c.037.051.079.1.124.145l2.429 2.428c.046.046.094.088.145.125l.954 3.102a.75.75 0 0 0 1.11.418l2.774-1.707a1.75 1.75 0 0 0 .833-1.49V9.485c.338-.288.665-.59.979-.904l.458-.459A8.75 8.75 0 0 0 16 1.936V1.75A1.75 1.75 0 0 0 14.25 0h-.186zM10.5 10.625c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 0 0 .119-.213v-2.066zM3.678 8.116 5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 0 0-.213.119l-1.2 1.95 1.782.547zm5.26-4.493A7.25 7.25 0 0 1 14.063 1.5h.186a.25.25 0 0 1 .25.25v.186a7.25 7.25 0 0 1-2.123 5.127l-.459.458a15.21 15.21 0 0 1-2.499 2.02l-2.317 1.5-2.143-2.143 1.5-2.317a15.25 15.25 0 0 1 2.02-2.5l.458-.458h.002zM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-8.44 9.56a1.5 1.5 0 1 0-2.12-2.12c-.734.73-1.047 2.332-1.15 3.003a.23.23 0 0 0 .265.265c.671-.103 2.273-.416 3.005-1.148z"/></svg>
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/building_blocks.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.878.392a1.75 1.75 0 0 0-1.756 0l-5.25 3.045A1.75 1.75 0 0 0 1 4.951v6.098c0 .624.332 1.2.872 1.514l5.25 3.045a1.75 1.75 0 0 0 1.756 0l5.25-3.045c.54-.313.872-.89.872-1.514V4.951c0-.624-.332-1.2-.872-1.514L8.878.392zM7.875 1.69a.25.25 0 0 1 .25 0l4.63 2.685L8 7.133 3.245 4.375l4.63-2.685zM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432L2.5 5.677zm6.25 8.271 4.625-2.683a.25.25 0 0 0 .125-.216V5.677L8.75 8.432v5.516z"/></svg>
  
  <span class="md-ellipsis">
    Building Blocks
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
        
        
          <label class="md-nav__link" for="__nav_3">
            
  
  <span class="md-ellipsis">
    Code Reference
    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="Code Reference" data-md-level="1">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../app_omni.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    app_omni
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../controllers/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    controllers
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="controllers" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            controllers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../controllers/controller_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    controller_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../controllers/dd_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dd_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../controllers/ik_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ik_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../controllers/joint_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    joint_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../controllers/multi_finger_gripper_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    multi_finger_gripper_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../controllers/null_joint_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    null_joint_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../envs/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    envs
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="envs" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            envs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../envs/env_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    env_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    examples
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="examples" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/blender_demo_transition_machine.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    blender_demo_transition_machine
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_2" type="checkbox" id="__nav_3_4_2" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/environments/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    environments
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="environments" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            environments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/environments/behavior_env_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    behavior_env_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/environments/config_selector.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config_selector
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/environments/navigation_env_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    navigation_env_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_selector.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    example_selector
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_4" type="checkbox" id="__nav_3_4_4" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/learning/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    learning
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_4">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="learning" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_4">
            <span class="md-nav__icon md-icon"></span>
            learning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/learning/stable_baselines3_ppo_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stable_baselines3_ppo_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_5" type="checkbox" id="__nav_3_4_5" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/object_states/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    object_states
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="object_states" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_5">
            <span class="md-nav__icon md-icon"></span>
            object_states
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/attachment_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    attachment_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/blender_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    blender_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/cleaning_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cleaning_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/cleaning_demo_simple.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cleaning_demo_simple
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/folded_state_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    folded_state_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/heat_source_or_sink_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    heat_source_or_sink_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/heated_state_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    heated_state_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/object_state_texture_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    object_state_texture_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/particle_applier_remover_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    particle_applier_remover_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/sample_kinematics_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sample_kinematics_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/slicing_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slicing_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/object_states/temperature_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    temperature_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_6" type="checkbox" id="__nav_3_4_6" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/objects/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    objects
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="objects" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_6">
            <span class="md-nav__icon md-icon"></span>
            objects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/objects/draw_bounding_box.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    draw_bounding_box
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/objects/highlight_objects.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    highlight_objects
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/objects/load_object_selector.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    load_object_selector
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/objects/visualize_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    visualize_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_7" type="checkbox" id="__nav_3_4_7" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/renderer_settings/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    renderer_settings
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_7">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="renderer_settings" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_7">
            <span class="md-nav__icon md-icon"></span>
            renderer_settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/renderer_settings/renderer_settings_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    renderer_settings_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_8" type="checkbox" id="__nav_3_4_8" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/robots/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    robots
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_8">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="robots" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_8">
            <span class="md-nav__icon md-icon"></span>
            robots
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_8_1" type="checkbox" id="__nav_3_4_8_1" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/robots/advanced/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    advanced
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_8_1">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="advanced" data-md-level="4">
          <label class="md-nav__title" for="__nav_3_4_8_1">
            <span class="md-nav__icon md-icon"></span>
            advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/robots/advanced/ik_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ik_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/robots/all_robots_visualizer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    all_robots_visualizer
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/robots/grasping_mode_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    grasping_mode_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/robots/robot_control_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    robot_control_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_9" type="checkbox" id="__nav_3_4_9" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/scenes/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    scenes
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_9">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="scenes" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_9">
            <span class="md-nav__icon md-icon"></span>
            scenes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/scenes/scene_selector.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scene_selector
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/scenes/traversability_map_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    traversability_map_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_10" type="checkbox" id="__nav_3_4_10" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../examples/simulator/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    simulator
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_10">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="simulator" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_10">
            <span class="md-nav__icon md-icon"></span>
            simulator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../examples/simulator/sim_save_load_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sim_save_load_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../macros.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    macros
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../maps/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    maps
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="maps" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            maps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../maps/map_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    map_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../maps/segmentation_map.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    segmentation_map
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../maps/traversable_map.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    traversable_map
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_7" type="checkbox" id="__nav_3_7" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../object_states/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    object_states
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_7">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="object_states" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            object_states
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/aabb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aabb
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/adjacency.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    adjacency
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/attachment.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    attachment
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/burnt.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    burnt
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/contact_bodies.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    contact_bodies
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/contact_subscribed_state_mixin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    contact_subscribed_state_mixin
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/cooked.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cooked
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/covered.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    covered
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/factory.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    factory
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/filled.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filled
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/fluid_sink.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fluid_sink
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/fluid_source.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fluid_source
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/folded.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    folded
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/frozen.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    frozen
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/heat_source_or_sink.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    heat_source_or_sink
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/heated.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    heated
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/inside.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    inside
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/kinematics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kinematics
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/link_based_state_mixin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    link_based_state_mixin
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/max_temperature.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    max_temperature
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/next_to.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    next_to
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/object_state_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    object_state_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/on_top.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    on_top
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/open.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    open
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/particle_modifier.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    particle_modifier
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/pose.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pose
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/robot_related_states.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    robot_related_states
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/room_states.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    room_states
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/saturated.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    saturated
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/sliced.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sliced
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/slicer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slicer
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/temperature.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    temperature
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/toggle.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    toggle
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/touching.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    touching
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/under.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    under
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/water_sink.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    water_sink
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../object_states/water_source.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    water_source
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_8" type="checkbox" id="__nav_3_8" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../objects/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    objects
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_8">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="objects" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            objects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../objects/controllable_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    controllable_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../objects/dataset_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dataset_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../objects/light_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    light_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../objects/object_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    object_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../objects/primitive_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    primitive_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../objects/stateful_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stateful_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../objects/usd_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    usd_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_9" type="checkbox" id="__nav_3_9" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../prims/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    prims
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_9">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="prims" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            prims
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prims/cloth_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cloth_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prims/entity_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    entity_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prims/geom_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    geom_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prims/joint_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    joint_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prims/material_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    material_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prims/prim_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prim_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prims/rigid_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rigid_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../prims/xform_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xform_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_10" type="checkbox" id="__nav_3_10" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../renderer_settings/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    renderer_settings
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_10">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="renderer_settings" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            renderer_settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../renderer_settings/common_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../renderer_settings/path_tracing_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    path_tracing_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../renderer_settings/post_processing_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    post_processing_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../renderer_settings/real_time_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    real_time_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../renderer_settings/renderer_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    renderer_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../renderer_settings/settings_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    settings_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_11" type="checkbox" id="__nav_3_11" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reward_functions/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    reward_functions
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_11">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="reward_functions" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_11">
            <span class="md-nav__icon md-icon"></span>
            reward_functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reward_functions/collision_reward.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    collision_reward
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reward_functions/point_goal_reward.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_goal_reward
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reward_functions/potential_reward.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    potential_reward
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reward_functions/reaching_goal_reward.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reaching_goal_reward
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reward_functions/reward_function_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reward_function_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_12" type="checkbox" id="__nav_3_12" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../robots/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    robots
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_12">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="robots" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            robots
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/active_camera_robot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    active_camera_robot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/fetch.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fetch
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/freight.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    freight
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/husky.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    husky
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/locobot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    locobot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/locomotion_robot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    locomotion_robot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/manipulation_robot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    manipulation_robot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/robot_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    robot_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/tiago.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tiago
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/turtlebot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    turtlebot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../robots/two_wheel_robot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    two_wheel_robot
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_13" type="checkbox" id="__nav_3_13" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../scenes/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    scenes
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_13">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="scenes" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_13">
            <span class="md-nav__icon md-icon"></span>
            scenes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../scenes/interactive_traversable_scene.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    interactive_traversable_scene
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../scenes/scene_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scene_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../scenes/static_traversable_scene.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    static_traversable_scene
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../scenes/traversable_scene.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    traversable_scene
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_14" type="checkbox" id="__nav_3_14" >
        
        
          <label class="md-nav__link" for="__nav_3_14">
            
  
  <span class="md-ellipsis">
    scripts
    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="scripts" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_14">
            <span class="md-nav__icon md-icon"></span>
            scripts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../scripts/setup.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    setup
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_15" type="checkbox" id="__nav_3_15" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../sensors/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    sensors
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_15">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="sensors" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_15">
            <span class="md-nav__icon md-icon"></span>
            sensors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../sensors/dropout_sensor_noise.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dropout_sensor_noise
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../sensors/scan_sensor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scan_sensor
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../sensors/sensor_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sensor_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../sensors/sensor_noise_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sensor_noise_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../sensors/vision_sensor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vision_sensor
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../simulator.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    simulator
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_17" type="checkbox" id="__nav_3_17" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../systems/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    systems
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_17">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="systems" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_17">
            <span class="md-nav__icon md-icon"></span>
            systems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../systems/macro_particle_system.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    macro_particle_system
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../systems/micro_particle_system.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    micro_particle_system
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../systems/particle_system_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    particle_system_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../systems/system_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    system_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_18" type="checkbox" id="__nav_3_18" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../tasks/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    tasks
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_18">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="tasks" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_18">
            <span class="md-nav__icon md-icon"></span>
            tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/bddl_backend.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bddl_backend
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/behavior_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    behavior_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/dummy_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dummy_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/furniture_closing_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    furniture_closing_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/point_navigation_obstacle_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_navigation_obstacle_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/point_navigation_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_navigation_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/point_reaching_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_reaching_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../tasks/task_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    task_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_19" type="checkbox" id="__nav_3_19" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../termination_conditions/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    termination_conditions
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_19">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="termination_conditions" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_19">
            <span class="md-nav__icon md-icon"></span>
            termination_conditions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../termination_conditions/falling.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    falling
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../termination_conditions/max_collision.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    max_collision
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../termination_conditions/point_goal.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_goal
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../termination_conditions/predicate_goal.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    predicate_goal
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../termination_conditions/reaching_goal.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reaching_goal
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../termination_conditions/termination_condition_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    termination_condition_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../termination_conditions/timeout.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    timeout
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../transition_rules.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transition_rules
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_21" type="checkbox" id="__nav_3_21" checked>
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    utils
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_21">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="utils" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_21">
            <span class="md-nav__icon md-icon"></span>
            utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="asset_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asset_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="config_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="constants.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    constants
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="control_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    control_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="deprecated_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    deprecated_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="geometry_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    geometry_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="git_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="gym_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gym_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="object_state_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    object_state_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="physx_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    physx_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="processing_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    processing_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="python_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    python_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="registry_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    registry_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="render_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    render_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    sampling_utils
    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="sampling_utils.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    sampling_utils
    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils.sampling_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_cuboid_empty" class="md-nav__link">
    <span class="md-ellipsis">
      check_cuboid_empty()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_distance_to_plane" class="md-nav__link">
    <span class="md-ellipsis">
      check_distance_to_plane()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_hit_max_angle_from_z_axis" class="md-nav__link">
    <span class="md-ellipsis">
      check_hit_max_angle_from_z_axis()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_normal_similarity" class="md-nav__link">
    <span class="md-ellipsis">
      check_normal_similarity()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_rays_hit_object" class="md-nav__link">
    <span class="md-ellipsis">
      check_rays_hit_object()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.compute_ray_destination" class="md-nav__link">
    <span class="md-ellipsis">
      compute_ray_destination()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.compute_rotation_from_grid_sample" class="md-nav__link">
    <span class="md-ellipsis">
      compute_rotation_from_grid_sample()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.draw_debug_markers" class="md-nav__link">
    <span class="md-ellipsis">
      draw_debug_markers()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.fit_plane" class="md-nav__link">
    <span class="md-ellipsis">
      fit_plane()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.get_distance_to_plane" class="md-nav__link">
    <span class="md-ellipsis">
      get_distance_to_plane()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.get_parallel_rays" class="md-nav__link">
    <span class="md-ellipsis">
      get_parallel_rays()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.get_projection_onto_plane" class="md-nav__link">
    <span class="md-ellipsis">
      get_projection_onto_plane()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.raytest" class="md-nav__link">
    <span class="md-ellipsis">
      raytest()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.raytest_batch" class="md-nav__link">
    <span class="md-ellipsis">
      raytest_batch()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_cuboid_on_object" class="md-nav__link">
    <span class="md-ellipsis">
      sample_cuboid_on_object()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_cuboid_on_object_full_grid_topdown" class="md-nav__link">
    <span class="md-ellipsis">
      sample_cuboid_on_object_full_grid_topdown()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_cuboid_on_object_symmetric_bimodal_distribution" class="md-nav__link">
    <span class="md-ellipsis">
      sample_cuboid_on_object_symmetric_bimodal_distribution()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_origin_positions" class="md-nav__link">
    <span class="md-ellipsis">
      sample_origin_positions()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_raytest_start_end_full_grid_topdown" class="md-nav__link">
    <span class="md-ellipsis">
      sample_raytest_start_end_full_grid_topdown()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_raytest_start_end_symmetric_bimodal_distribution" class="md-nav__link">
    <span class="md-ellipsis">
      sample_raytest_start_end_symmetric_bimodal_distribution()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="sim_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sim_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="transform_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transform_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="ui_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ui_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="usd_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    usd_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="vision_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vision_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_22" type="checkbox" id="__nav_3_22" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../wrappers/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    wrappers
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_22">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="wrappers" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_22">
            <span class="md-nav__icon md-icon"></span>
            wrappers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../wrappers/wrapper_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wrapper_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils" class="md-nav__link">
    <span class="md-ellipsis">
      utils.sampling_utils
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_cuboid_empty" class="md-nav__link">
    <span class="md-ellipsis">
      check_cuboid_empty()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_distance_to_plane" class="md-nav__link">
    <span class="md-ellipsis">
      check_distance_to_plane()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_hit_max_angle_from_z_axis" class="md-nav__link">
    <span class="md-ellipsis">
      check_hit_max_angle_from_z_axis()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_normal_similarity" class="md-nav__link">
    <span class="md-ellipsis">
      check_normal_similarity()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.check_rays_hit_object" class="md-nav__link">
    <span class="md-ellipsis">
      check_rays_hit_object()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.compute_ray_destination" class="md-nav__link">
    <span class="md-ellipsis">
      compute_ray_destination()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.compute_rotation_from_grid_sample" class="md-nav__link">
    <span class="md-ellipsis">
      compute_rotation_from_grid_sample()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.draw_debug_markers" class="md-nav__link">
    <span class="md-ellipsis">
      draw_debug_markers()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.fit_plane" class="md-nav__link">
    <span class="md-ellipsis">
      fit_plane()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.get_distance_to_plane" class="md-nav__link">
    <span class="md-ellipsis">
      get_distance_to_plane()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.get_parallel_rays" class="md-nav__link">
    <span class="md-ellipsis">
      get_parallel_rays()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.get_projection_onto_plane" class="md-nav__link">
    <span class="md-ellipsis">
      get_projection_onto_plane()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.raytest" class="md-nav__link">
    <span class="md-ellipsis">
      raytest()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.raytest_batch" class="md-nav__link">
    <span class="md-ellipsis">
      raytest_batch()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_cuboid_on_object" class="md-nav__link">
    <span class="md-ellipsis">
      sample_cuboid_on_object()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_cuboid_on_object_full_grid_topdown" class="md-nav__link">
    <span class="md-ellipsis">
      sample_cuboid_on_object_full_grid_topdown()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_cuboid_on_object_symmetric_bimodal_distribution" class="md-nav__link">
    <span class="md-ellipsis">
      sample_cuboid_on_object_symmetric_bimodal_distribution()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_origin_positions" class="md-nav__link">
    <span class="md-ellipsis">
      sample_origin_positions()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_raytest_start_end_full_grid_topdown" class="md-nav__link">
    <span class="md-ellipsis">
      sample_raytest_start_end_full_grid_topdown()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utils.sampling_utils.sample_raytest_start_end_symmetric_bimodal_distribution" class="md-nav__link">
    <span class="md-ellipsis">
      sample_raytest_start_end_symmetric_bimodal_distribution()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/StanfordVL/OmniGibson/edit/omnigibson/utils/sampling_utils.py" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>sampling_utils</h1>

<div class="doc doc-object doc-module">


<a id="utils.sampling_utils"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.check_cuboid_empty" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_cuboid_empty</span><span class="p">(</span><span class="n">hit_normal</span><span class="p">,</span> <span class="n">bottom_corner_positions</span><span class="p">,</span> <span class="n">this_cuboid_dimensions</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">,</span> <span class="n">ignore_body_names</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Check whether the cuboid defined by @this_cuboid_dimensions and @bottom_corner_positions contains
empty space or not</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>hit_normal</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) normal</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>bottom_corner_positions</code></td>
          <td>
                <code>4, 3)-array</code>
          </td>
          <td><p>the positions defining the bottom corners of the cuboid
being sampled</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>this_cuboid_dimensions</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) size of the sampled cuboid</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>refusal_log</code></td>
          <td>
                <code>list of str</code>
          </td>
          <td><p>Logging array for adding debug logs</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>bool</code></td>          <td>
          </td>
          <td><p>True if the cuboid is empty, else False</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span>
<span class="normal"><a href="#__codelineno-0-1079">1079</a></span>
<span class="normal"><a href="#__codelineno-0-1080">1080</a></span>
<span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span>
<span class="normal"><a href="#__codelineno-0-1088">1088</a></span>
<span class="normal"><a href="#__codelineno-0-1089">1089</a></span>
<span class="normal"><a href="#__codelineno-0-1090">1090</a></span>
<span class="normal"><a href="#__codelineno-0-1091">1091</a></span>
<span class="normal"><a href="#__codelineno-0-1092">1092</a></span>
<span class="normal"><a href="#__codelineno-0-1093">1093</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1050" name="__codelineno-0-1050"></a><span class="k">def</span> <span class="nf">check_cuboid_empty</span><span class="p">(</span><span class="n">hit_normal</span><span class="p">,</span> <span class="n">bottom_corner_positions</span><span class="p">,</span> <span class="n">this_cuboid_dimensions</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">,</span> <span class="n">ignore_body_names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a><span class="sd">    Check whether the cuboid defined by @this_cuboid_dimensions and @bottom_corner_positions contains</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a><span class="sd">    empty space or not</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a><span class="sd">        hit_normal (3-array): (x,y,z) normal</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a><span class="sd">        bottom_corner_positions ((4, 3)-array): the positions defining the bottom corners of the cuboid</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a><span class="sd">            being sampled</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a><span class="sd">        this_cuboid_dimensions (3-array): (x,y,z) size of the sampled cuboid</span>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a><span class="sd">        refusal_log (list of str): Logging array for adding debug logs</span>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a><span class="sd">        bool: True if the cuboid is empty, else False</span>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a>    <span class="k">if</span> <span class="n">og</span><span class="o">.</span><span class="n">debug_sampling</span><span class="p">:</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a>        <span class="n">draw_debug_markers</span><span class="p">(</span><span class="n">bottom_corner_positions</span><span class="p">)</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a>    <span class="c1"># Compute top corners.</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a>    <span class="n">top_corner_positions</span> <span class="o">=</span> <span class="n">bottom_corner_positions</span> <span class="o">+</span> <span class="n">hit_normal</span> <span class="o">*</span> <span class="n">this_cuboid_dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a>    <span class="c1"># We only generate valid rays that have nonzero distances. If the inputted cuboid is flat (i.e.: one dimension</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a>    <span class="c1"># is zero, i.e.: it is in fact a rectangle), some of our generated rays will have zero distance</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a>    <span class="c1"># Get all the top-to-bottom corner pairs. When we cast these rays, we check for two things: that the cuboid</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a>    <span class="c1"># height is actually available, and the faces &amp; volume of the cuboid are unoccupied.</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a>    <span class="n">top_to_bottom_pairs</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">this_cuboid_dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> \
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a>        <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="n">top_corner_positions</span><span class="p">,</span> <span class="n">bottom_corner_positions</span><span class="p">))</span>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a>
<a id="__codelineno-0-1079" name="__codelineno-0-1079"></a>    <span class="c1"># Get all the same-height pairs. These also check that the surfaces areas are empty.</span>
<a id="__codelineno-0-1080" name="__codelineno-0-1080"></a>    <span class="c1"># Note: These are redundant if our cuboid has zero height!</span>
<a id="__codelineno-0-1081" name="__codelineno-0-1081"></a>    <span class="n">bottom_pairs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">bottom_corner_positions</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a>    <span class="n">top_pairs</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">this_cuboid_dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">top_corner_positions</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a>    <span class="c1"># Combine all these pairs, cast the rays, and make sure the rays don&#39;t hit anything.</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a>    <span class="n">all_pairs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">top_to_bottom_pairs</span> <span class="o">+</span> <span class="n">bottom_pairs</span> <span class="o">+</span> <span class="n">top_pairs</span><span class="p">)</span>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a>    <span class="n">check_cast_results</span> <span class="o">=</span> <span class="n">raytest_batch</span><span class="p">(</span><span class="n">start_points</span><span class="o">=</span><span class="n">all_pairs</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">:],</span> <span class="n">end_points</span><span class="o">=</span><span class="n">all_pairs</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:],</span> <span class="n">ignore_bodies</span><span class="o">=</span><span class="n">ignore_body_names</span><span class="p">)</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a>    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">ray</span><span class="p">[</span><span class="s2">&quot;hit&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">ray</span> <span class="ow">in</span> <span class="n">check_cast_results</span><span class="p">):</span>
<a id="__codelineno-0-1088" name="__codelineno-0-1088"></a>        <span class="k">if</span> <span class="n">og</span><span class="o">.</span><span class="n">debug_sampling</span><span class="p">:</span>
<a id="__codelineno-0-1089" name="__codelineno-0-1089"></a>            <span class="n">refusal_log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;check ray info: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">check_cast_results</span><span class="p">))</span>
<a id="__codelineno-0-1090" name="__codelineno-0-1090"></a>
<a id="__codelineno-0-1091" name="__codelineno-0-1091"></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-1092" name="__codelineno-0-1092"></a>
<a id="__codelineno-0-1093" name="__codelineno-0-1093"></a>    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.check_distance_to_plane" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_distance_to_plane</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">,</span> <span class="n">hit_to_plane_threshold</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Calculates whether points are within @hit_to_plane_threshold distance to plane defined by @plane_centroid
and @plane_normal</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>points</code></td>
          <td>
                <code>k, 3)-array</code>
          </td>
          <td><p>np.array of shape (k, 3)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>plane_centroid</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) points' centroid</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>plane_normal</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) normal of the fitted plane</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>hit_to_plane_threshold</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Threshold distance to check between @points and plane</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>refusal_log</code></td>
          <td>
                <code>dict</code>
          </td>
          <td><p>Debugging dictionary to add error messages to</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>bool</code></td>          <td>
          </td>
          <td><p>True if all points are within @hit_to_plane_threshold distance to plane, otherwise False</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="k">def</span> <span class="nf">check_distance_to_plane</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">,</span> <span class="n">hit_to_plane_threshold</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">):</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">    Calculates whether points are within @hit_to_plane_threshold distance to plane defined by @plane_centroid</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">    and @plane_normal</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        points ((k, 3)-array): np.array of shape (k, 3)</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        plane_centroid (3-array): (x,y,z) points&#39; centroid</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">        plane_normal (3-array): (x,y,z) normal of the fitted plane</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        hit_to_plane_threshold (float): Threshold distance to check between @points and plane</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">        refusal_log (dict): Debugging dictionary to add error messages to</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">        bool: True if all points are within @hit_to_plane_threshold distance to plane, otherwise False</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="n">distances</span> <span class="o">=</span> <span class="n">get_distance_to_plane</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">)</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">distances</span> <span class="o">&gt;</span> <span class="n">hit_to_plane_threshold</span><span class="p">):</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span class="k">if</span> <span class="n">og</span><span class="o">.</span><span class="n">debug_sampling</span><span class="p">:</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>            <span class="n">refusal_log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;distances to plane: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">distances</span><span class="p">)</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.check_hit_max_angle_from_z_axis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_hit_max_angle_from_z_axis</span><span class="p">(</span><span class="n">hit_normal</span><span class="p">,</span> <span class="n">max_angle_with_z_axis</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Check whether the normal @hit_normal deviates from the global z axis by more than @max_angle_with_z_axis</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>hit_normal</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>Normal vector to check with respect to global z-axis</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>max_angle_with_z_axis</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Maximum acceptable angle between the global z-axis and @hit_normal</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>refusal_log</code></td>
          <td>
                <code>list of str</code>
          </td>
          <td><p>Logging array for adding debug logs</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>bool</code></td>          <td>
          </td>
          <td><p>True if the angle between @hit_normal and the global z-axis is less than @max_angle_with_z_axis,
otherwise False</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-982"> 982</a></span>
<span class="normal"><a href="#__codelineno-0-983"> 983</a></span>
<span class="normal"><a href="#__codelineno-0-984"> 984</a></span>
<span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-982" name="__codelineno-0-982"></a><span class="k">def</span> <span class="nf">check_hit_max_angle_from_z_axis</span><span class="p">(</span><span class="n">hit_normal</span><span class="p">,</span> <span class="n">max_angle_with_z_axis</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">):</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a><span class="sd">    Check whether the normal @hit_normal deviates from the global z axis by more than @max_angle_with_z_axis</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a><span class="sd">        hit_normal (3-array): Normal vector to check with respect to global z-axis</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a><span class="sd">        max_angle_with_z_axis (float): Maximum acceptable angle between the global z-axis and @hit_normal</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a><span class="sd">        refusal_log (list of str): Logging array for adding debug logs</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a><span class="sd">        bool: True if the angle between @hit_normal and the global z-axis is less than @max_angle_with_z_axis,</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a><span class="sd">            otherwise False</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a>    <span class="n">hit_angle_with_z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">hit_normal</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])),</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a>    <span class="k">if</span> <span class="n">hit_angle_with_z</span> <span class="o">&gt;</span> <span class="n">max_angle_with_z_axis</span><span class="p">:</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a>        <span class="k">if</span> <span class="n">og</span><span class="o">.</span><span class="n">debug_sampling</span><span class="p">:</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a>            <span class="n">refusal_log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;normal </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">hit_normal</span><span class="p">)</span>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.check_normal_similarity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_normal_similarity</span><span class="p">(</span><span class="n">center_hit_normal</span><span class="p">,</span> <span class="n">hit_normals</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Check whether the normals from @hit_normals are within some @tolerance of @center_hit_normal.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>center_hit_normal</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>normal of the center hit point</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>hit_normals</code></td>
          <td>
                <code>n, 3)-array</code>
          </td>
          <td><p>normals of all the hit points</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>tolerance</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Acceptable deviation between the center hit normal and all normals</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>refusal_log</code></td>
          <td>
                <code>dict</code>
          </td>
          <td><p>Dictionary to write debugging and log information to</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>bool</code></td>          <td>
          </td>
          <td><p>Whether the normal similarity is acceptable or not</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-917">917</a></span>
<span class="normal"><a href="#__codelineno-0-918">918</a></span>
<span class="normal"><a href="#__codelineno-0-919">919</a></span>
<span class="normal"><a href="#__codelineno-0-920">920</a></span>
<span class="normal"><a href="#__codelineno-0-921">921</a></span>
<span class="normal"><a href="#__codelineno-0-922">922</a></span>
<span class="normal"><a href="#__codelineno-0-923">923</a></span>
<span class="normal"><a href="#__codelineno-0-924">924</a></span>
<span class="normal"><a href="#__codelineno-0-925">925</a></span>
<span class="normal"><a href="#__codelineno-0-926">926</a></span>
<span class="normal"><a href="#__codelineno-0-927">927</a></span>
<span class="normal"><a href="#__codelineno-0-928">928</a></span>
<span class="normal"><a href="#__codelineno-0-929">929</a></span>
<span class="normal"><a href="#__codelineno-0-930">930</a></span>
<span class="normal"><a href="#__codelineno-0-931">931</a></span>
<span class="normal"><a href="#__codelineno-0-932">932</a></span>
<span class="normal"><a href="#__codelineno-0-933">933</a></span>
<span class="normal"><a href="#__codelineno-0-934">934</a></span>
<span class="normal"><a href="#__codelineno-0-935">935</a></span>
<span class="normal"><a href="#__codelineno-0-936">936</a></span>
<span class="normal"><a href="#__codelineno-0-937">937</a></span>
<span class="normal"><a href="#__codelineno-0-938">938</a></span>
<span class="normal"><a href="#__codelineno-0-939">939</a></span>
<span class="normal"><a href="#__codelineno-0-940">940</a></span>
<span class="normal"><a href="#__codelineno-0-941">941</a></span>
<span class="normal"><a href="#__codelineno-0-942">942</a></span>
<span class="normal"><a href="#__codelineno-0-943">943</a></span>
<span class="normal"><a href="#__codelineno-0-944">944</a></span>
<span class="normal"><a href="#__codelineno-0-945">945</a></span>
<span class="normal"><a href="#__codelineno-0-946">946</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-917" name="__codelineno-0-917"></a><span class="k">def</span> <span class="nf">check_normal_similarity</span><span class="p">(</span><span class="n">center_hit_normal</span><span class="p">,</span> <span class="n">hit_normals</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">):</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a><span class="sd">    Check whether the normals from @hit_normals are within some @tolerance of @center_hit_normal.</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a><span class="sd">        center_hit_normal (3-array): normal of the center hit point</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a><span class="sd">        hit_normals ((n, 3)-array): normals of all the hit points</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a><span class="sd">        tolerance (float): Acceptable deviation between the center hit normal and all normals</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a><span class="sd">        refusal_log (dict): Dictionary to write debugging and log information to</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a><span class="sd">        bool: Whether the normal similarity is acceptable or not</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a>    <span class="n">parallel_hit_main_hit_dot_products</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a>        <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">hit_normals</span><span class="p">,</span> <span class="n">center_hit_normal</span><span class="p">)</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a>        <span class="o">/</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">hit_normals</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">center_hit_normal</span><span class="p">)),</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a>        <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a>        <span class="mf">1.0</span><span class="p">,</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a>    <span class="p">)</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a>    <span class="n">parallel_hit_normal_angles_to_hit_normal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">parallel_hit_main_hit_dot_products</span><span class="p">)</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a>    <span class="n">all_rays_hit_with_similar_normal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a>        <span class="n">parallel_hit_normal_angles_to_hit_normal</span> <span class="o">&lt;</span> <span class="n">tolerance</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a>    <span class="p">)</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">all_rays_hit_with_similar_normal</span><span class="p">:</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a>        <span class="k">if</span> <span class="n">og</span><span class="o">.</span><span class="n">debug_sampling</span><span class="p">:</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a>            <span class="n">refusal_log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;angles </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">parallel_hit_normal_angles_to_hit_normal</span><span class="p">),))</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a>    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.check_rays_hit_object" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_rays_hit_object</span><span class="p">(</span><span class="n">cast_results</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">,</span> <span class="n">body_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore_body_names</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Checks whether rays hit a specific object, as specified by a list of @body_names</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>cast_results</code></td>
          <td>
                <code>list of dict</code>
          </td>
          <td><p>Output from raycast_batch.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>threshold</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Relative ratio in [0, 1] specifying proportion of rays from @cast_results are
required to hit @body_names to count as the object being hit</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>refusal_log</code></td>
          <td>
                <code>list of str</code>
          </td>
          <td><p>Logging array for adding debug logs</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>body_names</code></td>
          <td>
                <code>None or list or set of str</code>
          </td>
          <td><p>absolute USD paths to rigid bodies to check for hit. If not
specified, then any valid hit will be accepted</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>ignore_body_names</code></td>
          <td>
                <code>None or list or set of str</code>
          </td>
          <td><p>absolute USD paths to rigid bodies to ignore for hit. If not
specified, then any valid hit will be accepted</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>None or list of bool: Individual T/F for each ray -- whether it hit the object or not</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-949">949</a></span>
<span class="normal"><a href="#__codelineno-0-950">950</a></span>
<span class="normal"><a href="#__codelineno-0-951">951</a></span>
<span class="normal"><a href="#__codelineno-0-952">952</a></span>
<span class="normal"><a href="#__codelineno-0-953">953</a></span>
<span class="normal"><a href="#__codelineno-0-954">954</a></span>
<span class="normal"><a href="#__codelineno-0-955">955</a></span>
<span class="normal"><a href="#__codelineno-0-956">956</a></span>
<span class="normal"><a href="#__codelineno-0-957">957</a></span>
<span class="normal"><a href="#__codelineno-0-958">958</a></span>
<span class="normal"><a href="#__codelineno-0-959">959</a></span>
<span class="normal"><a href="#__codelineno-0-960">960</a></span>
<span class="normal"><a href="#__codelineno-0-961">961</a></span>
<span class="normal"><a href="#__codelineno-0-962">962</a></span>
<span class="normal"><a href="#__codelineno-0-963">963</a></span>
<span class="normal"><a href="#__codelineno-0-964">964</a></span>
<span class="normal"><a href="#__codelineno-0-965">965</a></span>
<span class="normal"><a href="#__codelineno-0-966">966</a></span>
<span class="normal"><a href="#__codelineno-0-967">967</a></span>
<span class="normal"><a href="#__codelineno-0-968">968</a></span>
<span class="normal"><a href="#__codelineno-0-969">969</a></span>
<span class="normal"><a href="#__codelineno-0-970">970</a></span>
<span class="normal"><a href="#__codelineno-0-971">971</a></span>
<span class="normal"><a href="#__codelineno-0-972">972</a></span>
<span class="normal"><a href="#__codelineno-0-973">973</a></span>
<span class="normal"><a href="#__codelineno-0-974">974</a></span>
<span class="normal"><a href="#__codelineno-0-975">975</a></span>
<span class="normal"><a href="#__codelineno-0-976">976</a></span>
<span class="normal"><a href="#__codelineno-0-977">977</a></span>
<span class="normal"><a href="#__codelineno-0-978">978</a></span>
<span class="normal"><a href="#__codelineno-0-979">979</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-949" name="__codelineno-0-949"></a><span class="k">def</span> <span class="nf">check_rays_hit_object</span><span class="p">(</span><span class="n">cast_results</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">,</span> <span class="n">body_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore_body_names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a><span class="sd">    Checks whether rays hit a specific object, as specified by a list of @body_names</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="sd">        cast_results (list of dict): Output from raycast_batch.</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a><span class="sd">        threshold (float): Relative ratio in [0, 1] specifying proportion of rays from @cast_results are</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="sd">            required to hit @body_names to count as the object being hit</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="sd">        refusal_log (list of str): Logging array for adding debug logs</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a><span class="sd">        body_names (None or list or set of str): absolute USD paths to rigid bodies to check for hit. If not</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="sd">            specified, then any valid hit will be accepted</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a><span class="sd">        ignore_body_names (None or list or set of str): absolute USD paths to rigid bodies to ignore for hit. If not</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a><span class="sd">            specified, then any valid hit will be accepted</span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="sd">        None or list of bool: Individual T/F for each ray -- whether it hit the object or not</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a>    <span class="n">body_names</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">body_names</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">set</span><span class="p">(</span><span class="n">body_names</span><span class="p">)</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>    <span class="n">ray_hits</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>        <span class="n">ray_res</span><span class="p">[</span><span class="s2">&quot;hit&quot;</span><span class="p">]</span> <span class="ow">and</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a>        <span class="p">(</span><span class="n">body_names</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ray_res</span><span class="p">[</span><span class="s2">&quot;rigidBody&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">body_names</span><span class="p">)</span> <span class="ow">and</span>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a>        <span class="p">(</span><span class="n">ignore_body_names</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">ray_res</span><span class="p">[</span><span class="s2">&quot;rigidBody&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore_body_names</span><span class="p">)</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a>        <span class="k">for</span> <span class="n">ray_res</span> <span class="ow">in</span> <span class="n">cast_results</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a>    <span class="p">]</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a>    <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ray_hits</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">cast_results</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">:</span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a>        <span class="k">if</span> <span class="n">og</span><span class="o">.</span><span class="n">debug_sampling</span><span class="p">:</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a>            <span class="n">refusal_log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">sum</span><span class="p">(</span><span class="n">ray_hits</span><span class="p">)</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cast_results</span><span class="p">)</span><span class="si">}</span><span class="s2"> &lt; </span><span class="si">{</span><span class="n">threshold</span><span class="si">}</span><span class="s2"> hits: </span><span class="si">{</span><span class="p">[</span><span class="n">ray_res</span><span class="p">[</span><span class="s1">&#39;rigidBody&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">ray_res</span> <span class="ow">in</span> <span class="n">cast_results</span> <span class="k">if</span> <span class="n">ray_res</span><span class="p">[</span><span class="s1">&#39;hit&#39;</span><span class="p">]]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>    <span class="k">return</span> <span class="n">ray_hits</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.compute_ray_destination" class="doc doc-heading">
<code class="highlight language-python"><span class="n">compute_ray_destination</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">is_top</span><span class="p">,</span> <span class="n">start_pos</span><span class="p">,</span> <span class="n">aabb_min</span><span class="p">,</span> <span class="n">aabb_max</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Compute the point on the AABB defined by @aabb_min and @aabb_max from shooting a ray at @start_pos
in the direction defined by global axis @axis and @is_top</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>axis</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Which direction to compute the ray destination. Valid options are {0, 1, 2} -- the
x, y, or z axes</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>is_top</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Whether to shoot in the positive or negative @axis direction</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>aabb_min</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) position defining the lower corner of the AABB</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>aabb_max</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) position defining the upper corner of the AABB</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>3-array: computed (x,y,z) point on the AABB surface</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span>
<span class="normal"><a href="#__codelineno-0-1046">1046</a></span>
<span class="normal"><a href="#__codelineno-0-1047">1047</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1005" name="__codelineno-0-1005"></a><span class="k">def</span> <span class="nf">compute_ray_destination</span><span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">is_top</span><span class="p">,</span> <span class="n">start_pos</span><span class="p">,</span> <span class="n">aabb_min</span><span class="p">,</span> <span class="n">aabb_max</span><span class="p">):</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a><span class="sd">    Compute the point on the AABB defined by @aabb_min and @aabb_max from shooting a ray at @start_pos</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a><span class="sd">    in the direction defined by global axis @axis and @is_top</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a><span class="sd">        axis (int): Which direction to compute the ray destination. Valid options are {0, 1, 2} -- the</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a><span class="sd">            x, y, or z axes</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a><span class="sd">        is_top (bool): Whether to shoot in the positive or negative @axis direction</span>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a><span class="sd">        aabb_min (3-array): (x,y,z) position defining the lower corner of the AABB</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a><span class="sd">        aabb_max (3-array): (x,y,z) position defining the upper corner of the AABB</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a><span class="sd">        3-array: computed (x,y,z) point on the AABB surface</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a>    <span class="c1"># Get the ray casting direction - we want to do it parallel to the sample axis.</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a>    <span class="n">ray_direction</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a>    <span class="n">ray_direction</span><span class="p">[</span><span class="n">axis</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a>    <span class="n">ray_direction</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">is_top</span> <span class="k">else</span> <span class="mi">1</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a>    <span class="c1"># We want to extend our ray until it intersects one of the AABB&#39;s faces.</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a>    <span class="c1"># Start by getting the distances towards the min and max boundaries of the AABB on each axis.</span>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a>    <span class="n">point_to_min</span> <span class="o">=</span> <span class="n">aabb_min</span> <span class="o">-</span> <span class="n">start_pos</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a>    <span class="n">point_to_max</span> <span class="o">=</span> <span class="n">aabb_max</span> <span class="o">-</span> <span class="n">start_pos</span>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a>    <span class="c1"># Then choose the distance to the point in the correct direction on each axis.</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a>    <span class="n">closer_point_on_each_axis</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">ray_direction</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">point_to_min</span><span class="p">,</span> <span class="n">point_to_max</span><span class="p">)</span>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a>    <span class="c1"># For each axis, find how many times the ray direction should be multiplied to reach the AABB&#39;s boundary.</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a>    <span class="n">multiple_to_face_on_each_axis</span> <span class="o">=</span> <span class="n">closer_point_on_each_axis</span> <span class="o">/</span> <span class="n">ray_direction</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a>    <span class="c1"># Choose the minimum of these multiples, e.g. how many times the ray direction should be multiplied</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>    <span class="c1"># to reach the nearest boundary.</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a>    <span class="n">multiple_to_face</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">multiple_to_face_on_each_axis</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">multiple_to_face_on_each_axis</span><span class="p">)])</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>    <span class="c1"># Finally, use the multiple we found to calculate the point on the AABB boundary that we want to cast our</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>    <span class="c1"># ray until.</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>    <span class="n">point_on_face</span> <span class="o">=</span> <span class="n">start_pos</span> <span class="o">+</span> <span class="n">ray_direction</span> <span class="o">*</span> <span class="n">multiple_to_face</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>    <span class="c1"># Make sure that we did not end up with all NaNs or infinities due to division issues.</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">point_on_face</span><span class="p">))</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">point_on_face</span><span class="p">))</span>
<a id="__codelineno-0-1046" name="__codelineno-0-1046"></a>
<a id="__codelineno-0-1047" name="__codelineno-0-1047"></a>    <span class="k">return</span> <span class="n">point_on_face</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.compute_rotation_from_grid_sample" class="doc doc-heading">
<code class="highlight language-python"><span class="n">compute_rotation_from_grid_sample</span><span class="p">(</span><span class="n">two_d_grid</span><span class="p">,</span> <span class="n">projected_hits</span><span class="p">,</span> <span class="n">cuboid_centroid</span><span class="p">,</span> <span class="n">this_cuboid_dimensions</span><span class="p">,</span> <span class="n">hits</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Computes</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>two_d_grid</code></td>
          <td>
                <code>n, 2</code>
          </td>
          <td><p>(x,y) raycast origin points in the local plane frame</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>projected_hits</code></td>
          <td>
                <code>k,3)-array</code>
          </td>
          <td><p>Points' positions projected onto the plane generated</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cuboid_centroid</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) sampled position of the hit cuboid centroid in the global frame</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>this_cuboid_dimensions</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) size of cuboid being sampled from the grid</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>hits</code></td>
          <td>
                <code>list of bool</code>
          </td>
          <td><p>whether each point from @two_d_grid is a valid hit or not</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>refusal_log</code></td>
          <td>
                <code>dict</code>
          </td>
          <td><p>Dictionary to write debugging and log information to</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>None or scipy.Rotation: If successfully hit, returns relative rotation from two_d_grid to
generated hit plane. Otherwise, returns None</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span>
<span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-882" name="__codelineno-0-882"></a><span class="k">def</span> <span class="nf">compute_rotation_from_grid_sample</span><span class="p">(</span><span class="n">two_d_grid</span><span class="p">,</span> <span class="n">projected_hits</span><span class="p">,</span> <span class="n">cuboid_centroid</span><span class="p">,</span> <span class="n">this_cuboid_dimensions</span><span class="p">,</span> <span class="n">hits</span><span class="p">,</span> <span class="n">refusal_log</span><span class="p">):</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a><span class="sd">    Computes</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="sd">        two_d_grid (n, 2): (x,y) raycast origin points in the local plane frame</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="sd">        projected_hits ((k,3)-array): Points&#39; positions projected onto the plane generated</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a><span class="sd">        cuboid_centroid (3-array): (x,y,z) sampled position of the hit cuboid centroid in the global frame</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a><span class="sd">        this_cuboid_dimensions (3-array): (x,y,z) size of cuboid being sampled from the grid</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="sd">        hits (list of bool): whether each point from @two_d_grid is a valid hit or not</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a><span class="sd">        refusal_log (dict): Dictionary to write debugging and log information to</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a><span class="sd">        None or scipy.Rotation: If successfully hit, returns relative rotation from two_d_grid to</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a><span class="sd">            generated hit plane. Otherwise, returns None</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a>    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">hits</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a>        <span class="k">if</span> <span class="n">og</span><span class="o">.</span><span class="n">debug_sampling</span><span class="p">:</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a>            <span class="n">refusal_log</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;insufficient hits to compute the rotation of the grid: needs 3, has </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">hits</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>    <span class="n">grid_in_planar_coordinates</span> <span class="o">=</span> <span class="n">two_d_grid</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a>    <span class="n">grid_in_planar_coordinates</span> <span class="o">=</span> <span class="n">grid_in_planar_coordinates</span><span class="p">[</span><span class="n">hits</span><span class="p">]</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a>    <span class="n">grid_in_object_coordinates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">grid_in_planar_coordinates</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a>    <span class="n">grid_in_object_coordinates</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">grid_in_planar_coordinates</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a>    <span class="n">grid_in_object_coordinates</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">this_cuboid_dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a>    <span class="n">projected_hits</span> <span class="o">=</span> <span class="n">projected_hits</span><span class="p">[</span><span class="n">hits</span><span class="p">]</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a>    <span class="n">sampled_grid_relative_vectors</span> <span class="o">=</span> <span class="n">projected_hits</span> <span class="o">-</span> <span class="n">cuboid_centroid</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a>    <span class="n">rotation</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">align_vectors</span><span class="p">(</span><span class="n">sampled_grid_relative_vectors</span><span class="p">,</span> <span class="n">grid_in_object_coordinates</span><span class="p">)</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a>    <span class="k">return</span> <span class="n">rotation</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.draw_debug_markers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">draw_debug_markers</span><span class="p">(</span><span class="n">hit_positions</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Helper method to generate and place debug markers at @hit_positions</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>hit_positions</code></td>
          <td>
                <code>n, 3)-array</code>
          </td>
          <td><p>Desired positions to place markers at</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>radius</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Radius of the generated virtual marker</p></td>
          <td>
                <code>0.01</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="k">def</span> <span class="nf">draw_debug_markers</span><span class="p">(</span><span class="n">hit_positions</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">):</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">    Helper method to generate and place debug markers at @hit_positions</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">        hit_positions ((n, 3)-array): Desired positions to place markers at</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">        radius (float): Radius of the generated virtual marker</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>    <span class="c1"># Import here to avoid circular imports</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span class="kn">from</span> <span class="nn">omnigibson.objects.primitive_object</span> <span class="kn">import</span> <span class="n">PrimitiveObject</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span class="n">color</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>    <span class="k">for</span> <span class="n">vec</span> <span class="ow">in</span> <span class="n">hit_positions</span><span class="p">:</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="n">time_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="n">cur_time</span> <span class="o">=</span> <span class="n">time_str</span><span class="p">[(</span><span class="n">time_str</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):]</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="n">obj</span> <span class="o">=</span> <span class="n">PrimitiveObject</span><span class="p">(</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>            <span class="n">prim_path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/World/debug_marker_</span><span class="si">{</span><span class="n">cur_time</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;debug_marker_</span><span class="si">{</span><span class="n">cur_time</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>            <span class="n">primitive_type</span><span class="o">=</span><span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>            <span class="n">visual_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>            <span class="n">rgba</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>            <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>        <span class="p">)</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_object</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>        <span class="n">obj</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.fit_plane" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fit_plane</span><span class="p">(</span><span class="n">points</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Fits a plane to the given 3D points.
Copied from https://stackoverflow.com/a/18968498</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>points</code></td>
          <td>
                <code>k, 3)-array</code>
          </td>
          <td><p>np.array of shape (k, 3)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>2-tuple:
- 3-array: (x,y,z) points' centroid
- 3-array: (x,y,z) normal of the fitted plane</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="k">def</span> <span class="nf">fit_plane</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    Fits a plane to the given 3D points.</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    Copied from https://stackoverflow.com/a/18968498</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">        points ((k, 3)-array): np.array of shape (k, 3)</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">        2-tuple:</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">            - 3-array: (x,y,z) points&#39; centroid</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">            - 3-array: (x,y,z) normal of the fitted plane</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="k">assert</span> <span class="n">points</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">points</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;Cannot fit plane with only </span><span class="si">{}</span><span class="s2"> points in </span><span class="si">{}</span><span class="s2"> dimensions.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>        <span class="n">points</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">points</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="n">ctr</span> <span class="o">=</span> <span class="n">points</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="n">x</span> <span class="o">=</span> <span class="n">points</span> <span class="o">-</span> <span class="n">ctr</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="n">normal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">svd</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">x</span><span class="p">))[</span><span class="mi">0</span><span class="p">][:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="n">normal</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="k">return</span> <span class="n">ctr</span><span class="p">,</span> <span class="n">normal</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.get_distance_to_plane" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_distance_to_plane</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Computes distance from @points to plane defined by @plane_centroid and @plane_normal</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>points</code></td>
          <td>
                <code>k, 3)-array</code>
          </td>
          <td><p>np.array of shape (k, 3)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>plane_centroid</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) points' centroid</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>plane_normal</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) normal of the fitted plane</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>k-array: Absolute distances from each point to the plane</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="k">def</span> <span class="nf">get_distance_to_plane</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">):</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">    Computes distance from @points to plane defined by @plane_centroid and @plane_normal</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="sd">        points ((k, 3)-array): np.array of shape (k, 3)</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="sd">        plane_centroid (3-array): (x,y,z) points&#39; centroid</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">        plane_normal (3-array): (x,y,z) normal of the fitted plane</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">        k-array: Absolute distances from each point to the plane</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">points</span> <span class="o">-</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.get_parallel_rays" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_parallel_rays</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">new_ray_per_horizontal_distance</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Given an input ray described by a source and a destination, sample parallel rays around it as the center.</p>
<p>The parallel rays start at the corners of a square of edge length <code>offset</code> centered on <code>source</code>, with the square
orthogonal to the ray direction. That is, the cast rays are the height edges of a square-base cuboid with bases
centered on <code>source</code> and <code>destination</code>.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>source</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) source of the ray to sample parallel rays of.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>destination</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>Source of the ray to sample parallel rays of.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>offset</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Orthogonal distance of parallel rays from input ray.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>new_ray_per_horizontal_distance</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>Step in offset beyond which an additional split will be applied in the
parallel ray grid (which at minimum is 3x3 at the AABB corners &amp; center).</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>3-tuple:
- list: generated sources from the original ray
- list: generated destinations from the original ray
- (W, H, 3)-array: unflattened, untransformed grid of parallel rays in object coordinates</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="k">def</span> <span class="nf">get_parallel_rays</span><span class="p">(</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">new_ray_per_horizontal_distance</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="p">):</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">    Given an input ray described by a source and a destination, sample parallel rays around it as the center.</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    The parallel rays start at the corners of a square of edge length `offset` centered on `source`, with the square</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">    orthogonal to the ray direction. That is, the cast rays are the height edges of a square-base cuboid with bases</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">    centered on `source` and `destination`.</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">        source (3-array): (x,y,z) source of the ray to sample parallel rays of.</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">        destination (3-array): Source of the ray to sample parallel rays of.</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">        offset (float): Orthogonal distance of parallel rays from input ray.</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">        new_ray_per_horizontal_distance (float): Step in offset beyond which an additional split will be applied in the</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">            parallel ray grid (which at minimum is 3x3 at the AABB corners &amp; center).</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">        3-tuple:</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">            - list: generated sources from the original ray</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">            - list: generated destinations from the original ray</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">            - (W, H, 3)-array: unflattened, untransformed grid of parallel rays in object coordinates</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>    <span class="n">ray_direction</span> <span class="o">=</span> <span class="n">destination</span> <span class="o">-</span> <span class="n">source</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>    <span class="c1"># Get an orthogonal vector using a random vector.</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span class="n">random_vector</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>    <span class="n">orthogonal_vector_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">ray_direction</span><span class="p">,</span> <span class="n">random_vector</span><span class="p">)</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>    <span class="n">orthogonal_vector_1</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">orthogonal_vector_1</span><span class="p">)</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="c1"># Get a second vector orthogonal to both the ray and the first vector.</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="n">orthogonal_vector_2</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">ray_direction</span><span class="p">,</span> <span class="n">orthogonal_vector_1</span><span class="p">)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>    <span class="n">orthogonal_vector_2</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">orthogonal_vector_2</span><span class="p">)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span class="n">orthogonal_vectors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">orthogonal_vector_1</span><span class="p">,</span> <span class="n">orthogonal_vector_2</span><span class="p">])</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">orthogonal_vectors</span><span class="p">))</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>    <span class="c1"># Convert the offset into a 2-vector if it already isn&#39;t one.</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>    <span class="n">offset</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="n">offset</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>    <span class="c1"># Compute the grid of rays</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>    <span class="n">steps</span> <span class="o">=</span> <span class="p">(</span><span class="n">offset</span> <span class="o">/</span> <span class="n">new_ray_per_horizontal_distance</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="n">steps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">steps</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>    <span class="n">x_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">steps</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>    <span class="n">y_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">steps</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span class="n">ray_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x_range</span><span class="p">,</span> <span class="n">y_range</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s2">&quot;ij&quot;</span><span class="p">))</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>    <span class="n">ray_grid_flattened</span> <span class="o">=</span> <span class="n">ray_grid</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>    <span class="c1"># Apply the grid onto the orthogonal vectors to obtain the rays in the world frame.</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="n">source</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">offsets</span><span class="p">,</span> <span class="n">orthogonal_vectors</span><span class="p">)</span> <span class="k">for</span> <span class="n">offsets</span> <span class="ow">in</span> <span class="n">ray_grid_flattened</span><span class="p">]</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>    <span class="n">destinations</span> <span class="o">=</span> <span class="p">[</span><span class="n">destination</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">offsets</span><span class="p">,</span> <span class="n">orthogonal_vectors</span><span class="p">)</span> <span class="k">for</span> <span class="n">offsets</span> <span class="ow">in</span> <span class="n">ray_grid_flattened</span><span class="p">]</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>    <span class="k">return</span> <span class="n">sources</span><span class="p">,</span> <span class="n">destinations</span><span class="p">,</span> <span class="n">ray_grid</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.get_projection_onto_plane" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_projection_onto_plane</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Computes @points' projection onto the plane defined by @plane_centroid and @plane_normal</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>points</code></td>
          <td>
                <code>k, 3)-array</code>
          </td>
          <td><p>np.array of shape (k, 3)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>plane_centroid</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) points' centroid</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>plane_normal</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) normal of the fitted plane</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>(k,3)-array: Points' positions projected onto the plane</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="k">def</span> <span class="nf">get_projection_onto_plane</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">):</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="sd">    Computes @points&#39; projection onto the plane defined by @plane_centroid and @plane_normal</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">        points ((k, 3)-array): np.array of shape (k, 3)</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">        plane_centroid (3-array): (x,y,z) points&#39; centroid</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">        plane_normal (3-array): (x,y,z) normal of the fitted plane</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">        (k,3)-array: Points&#39; positions projected onto the plane</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="n">distances_to_plane</span> <span class="o">=</span> <span class="n">get_distance_to_plane</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">)</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="k">return</span> <span class="n">points</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span><span class="n">distances_to_plane</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.raytest" class="doc doc-heading">
<code class="highlight language-python"><span class="n">raytest</span><span class="p">(</span><span class="n">start_point</span><span class="p">,</span> <span class="n">end_point</span><span class="p">,</span> <span class="n">only_closest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ignore_bodies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore_collisions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Computes raytest collision for ray cast from @start_point to @end_point</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>start_point</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) global start location of the ray</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_point</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>(x,y,z) global end location of the ray</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>only_closest</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Whether we report the first (closest) hit from the ray or grab all hits</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>ignore_bodies</code></td>
          <td>
                <code>None or list of str</code>
          </td>
          <td><p>If specified, specifies absolute USD paths to rigid bodies
whose collisions should be ignored</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>ignore_collisions</code></td>
          <td>
                <code>None or list of str</code>
          </td>
          <td><p>If specified, specifies absolute USD paths to collision geoms
whose collisions should be ignored</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>dict or list of dict: Results for this raytest. If @only_closest=True, then we only return the information from
the closest hit. Otherwise, we return an (unordered) list of information for all hits encountered.
Each dict is composed of:</p>
<p>"hit" (bool): Whether an object was hit or not
"position" (3-array): Location of the hit position
"normal" (3-array): normal vector of the face hit
"distance" (float): distance from @start_point the hit occurred
"collision" (str): absolute USD path to the collision body hit
"rigidBody" (str): absolute USD path to the associated rigid body hit</p>
<p>Note that only "hit" = False exists in the dict if no hit was found</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="k">def</span> <span class="nf">raytest</span><span class="p">(</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>    <span class="n">start_point</span><span class="p">,</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>    <span class="n">end_point</span><span class="p">,</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>    <span class="n">only_closest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>    <span class="n">ignore_bodies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>    <span class="n">ignore_collisions</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="p">):</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">    Computes raytest collision for ray cast from @start_point to @end_point</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="sd">        start_point (3-array): (x,y,z) global start location of the ray</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">        end_point (3-array): (x,y,z) global end location of the ray</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="sd">        only_closest (bool): Whether we report the first (closest) hit from the ray or grab all hits</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="sd">        ignore_bodies (None or list of str): If specified, specifies absolute USD paths to rigid bodies</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">            whose collisions should be ignored</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">        ignore_collisions (None or list of str): If specified, specifies absolute USD paths to collision geoms</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">            whose collisions should be ignored</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">        dict or list of dict: Results for this raytest. If @only_closest=True, then we only return the information from</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">            the closest hit. Otherwise, we return an (unordered) list of information for all hits encountered.</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">            Each dict is composed of:</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">            &quot;hit&quot; (bool): Whether an object was hit or not</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">            &quot;position&quot; (3-array): Location of the hit position</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">            &quot;normal&quot; (3-array): normal vector of the face hit</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">            &quot;distance&quot; (float): distance from @start_point the hit occurred</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="sd">            &quot;collision&quot; (str): absolute USD path to the collision body hit</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="sd">            &quot;rigidBody&quot; (str): absolute USD path to the associated rigid body hit</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a><span class="sd">            Note that only &quot;hit&quot; = False exists in the dict if no hit was found</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>    <span class="c1"># Make sure start point, end point are numpy arrays</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>    <span class="n">start_point</span><span class="p">,</span> <span class="n">end_point</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">start_point</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">end_point</span><span class="p">)</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="n">point_diff</span> <span class="o">=</span> <span class="n">end_point</span> <span class="o">-</span> <span class="n">start_point</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>    <span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">point_diff</span><span class="p">)</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>    <span class="n">direction</span> <span class="o">=</span> <span class="n">point_diff</span> <span class="o">/</span> <span class="n">distance</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>    <span class="c1"># For efficiency&#39;s sake, we handle special case of no ignore_bodies, ignore_collisions, and closest_hit</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>    <span class="k">if</span> <span class="n">only_closest</span> <span class="ow">and</span> <span class="n">ignore_bodies</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ignore_collisions</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>        <span class="k">return</span> <span class="n">get_physx_scene_query_interface</span><span class="p">()</span><span class="o">.</span><span class="n">raycast_closest</span><span class="p">(</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>            <span class="n">origin</span><span class="o">=</span><span class="n">start_point</span><span class="p">,</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>            <span class="nb">dir</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>            <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>        <span class="p">)</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>        <span class="c1"># Compose callback function for finding raycasts</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>        <span class="n">hits</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>        <span class="n">ignore_bodies</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="k">if</span> <span class="n">ignore_bodies</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">set</span><span class="p">(</span><span class="n">ignore_bodies</span><span class="p">)</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>        <span class="n">ignore_collisions</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span> <span class="k">if</span> <span class="n">ignore_collisions</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">set</span><span class="p">(</span><span class="n">ignore_collisions</span><span class="p">)</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>        <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">hit</span><span class="p">):</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>            <span class="c1"># Only add to hits if we&#39;re not ignoring this body or collision</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>            <span class="k">if</span> <span class="n">hit</span><span class="o">.</span><span class="n">rigid_body</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore_bodies</span> <span class="ow">and</span> <span class="n">hit</span><span class="o">.</span><span class="n">collision</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ignore_collisions</span><span class="p">:</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>                <span class="n">hits</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>                    <span class="s2">&quot;hit&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>                    <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">hit</span><span class="o">.</span><span class="n">position</span><span class="p">),</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>                    <span class="s2">&quot;normal&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">hit</span><span class="o">.</span><span class="n">normal</span><span class="p">),</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>                    <span class="s2">&quot;distance&quot;</span><span class="p">:</span> <span class="n">hit</span><span class="o">.</span><span class="n">distance</span><span class="p">,</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>                    <span class="s2">&quot;collision&quot;</span><span class="p">:</span> <span class="n">hit</span><span class="o">.</span><span class="n">collision</span><span class="p">,</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>                    <span class="s2">&quot;rigidBody&quot;</span><span class="p">:</span> <span class="n">hit</span><span class="o">.</span><span class="n">rigid_body</span><span class="p">,</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>                <span class="p">})</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>            <span class="c1"># We always want to continue traversing to collect all hits</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>        <span class="c1"># Grab all collisions</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>        <span class="n">get_physx_scene_query_interface</span><span class="p">()</span><span class="o">.</span><span class="n">raycast_all</span><span class="p">(</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>            <span class="n">origin</span><span class="o">=</span><span class="n">start_point</span><span class="p">,</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>            <span class="nb">dir</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>            <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="p">,</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>            <span class="n">reportFn</span><span class="o">=</span><span class="n">callback</span><span class="p">,</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>        <span class="p">)</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>        <span class="c1"># If we only want the closest, we need to sort these hits, otherwise we return them all</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>        <span class="k">if</span> <span class="n">only_closest</span><span class="p">:</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>            <span class="c1"># Return the empty hit dictionary if our ray did not hit anything, otherwise we return the closest</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;hit&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">hits</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">hit</span><span class="p">:</span> <span class="n">hit</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>            <span class="c1"># Return all hits (list)</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>            <span class="k">return</span> <span class="n">hits</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.raytest_batch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">raytest_batch</span><span class="p">(</span><span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span><span class="p">,</span> <span class="n">only_closest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ignore_bodies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore_collisions</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Computes raytest collisions for a set of rays cast from @start_points to @end_points.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>start_points</code></td>
          <td>
                <code>list of 3-array</code>
          </td>
          <td><p>Array of start locations to cast rays, where each is (x,y,z) global
start location of the ray</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_points</code></td>
          <td>
                <code>list of 3-array</code>
          </td>
          <td><p>Array of end locations to cast rays, where each is (x,y,z) global
end location of the ray</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>only_closest</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Whether we report the first (closest) hit from the ray or grab all hits</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>ignore_bodies</code></td>
          <td>
                <code>None or list of str</code>
          </td>
          <td><p>If specified, specifies absolute USD paths to rigid bodies
whose collisions should be ignored</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>ignore_collisions</code></td>
          <td>
                <code>None or list of str</code>
          </td>
          <td><p>If specified, specifies absolute USD paths to collision geoms
whose collisions should be ignored</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>list of dict or list of list of dict: Results for all rays, where each entry corresponds to the result for the
ith ray cast. If @only_closest=True, each entry in the list is the closest hit. Otherwise, each entry is
its own (unordered) list of hits for that ray. Each dict is composed of:</p>
<p>"hit" (bool): Whether an object was hit or not
"position" (3-array): Location of the hit position
"normal" (3-array): normal vector of the face hit
"distance" (float): distance from @start_point the hit occurred
"collision" (str): absolute USD path to the collision body hit
"rigidBody" (str): absolute USD path to the associated rigid body hit</p>
<p>Note that only "hit" = False exists in the dict if no hit was found</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="k">def</span> <span class="nf">raytest_batch</span><span class="p">(</span><span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span><span class="p">,</span> <span class="n">only_closest</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ignore_bodies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore_collisions</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">    Computes raytest collisions for a set of rays cast from @start_points to @end_points.</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">        start_points (list of 3-array): Array of start locations to cast rays, where each is (x,y,z) global</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">            start location of the ray</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">        end_points (list of 3-array): Array of end locations to cast rays, where each is (x,y,z) global</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="sd">            end location of the ray</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">        only_closest (bool): Whether we report the first (closest) hit from the ray or grab all hits</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="sd">        ignore_bodies (None or list of str): If specified, specifies absolute USD paths to rigid bodies</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="sd">            whose collisions should be ignored</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">        ignore_collisions (None or list of str): If specified, specifies absolute USD paths to collision geoms</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="sd">            whose collisions should be ignored</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="sd">        list of dict or list of list of dict: Results for all rays, where each entry corresponds to the result for the</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="sd">            ith ray cast. If @only_closest=True, each entry in the list is the closest hit. Otherwise, each entry is</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a><span class="sd">            its own (unordered) list of hits for that ray. Each dict is composed of:</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="sd">            &quot;hit&quot; (bool): Whether an object was hit or not</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a><span class="sd">            &quot;position&quot; (3-array): Location of the hit position</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a><span class="sd">            &quot;normal&quot; (3-array): normal vector of the face hit</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="sd">            &quot;distance&quot; (float): distance from @start_point the hit occurred</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="sd">            &quot;collision&quot; (str): absolute USD path to the collision body hit</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">            &quot;rigidBody&quot; (str): absolute USD path to the associated rigid body hit</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="sd">            Note that only &quot;hit&quot; = False exists in the dict if no hit was found</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="c1"># For now, we do a naive for loop over individual raytests until a better API comes out</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>    <span class="k">for</span> <span class="n">start_point</span><span class="p">,</span> <span class="n">end_point</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span><span class="p">):</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">raytest</span><span class="p">(</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>            <span class="n">start_point</span><span class="o">=</span><span class="n">start_point</span><span class="p">,</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>            <span class="n">end_point</span><span class="o">=</span><span class="n">end_point</span><span class="p">,</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>            <span class="n">only_closest</span><span class="o">=</span><span class="n">only_closest</span><span class="p">,</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>            <span class="n">ignore_bodies</span><span class="o">=</span><span class="n">ignore_bodies</span><span class="p">,</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>            <span class="n">ignore_collisions</span><span class="o">=</span><span class="n">ignore_collisions</span><span class="p">,</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span class="p">))</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.sample_cuboid_on_object" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample_cuboid_on_object</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span><span class="p">,</span> <span class="n">cuboid_dimensions</span><span class="p">,</span> <span class="n">ignore_objs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_ray_per_horizontal_distance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_NEW_RAY_PER_HORIZONTAL_DISTANCE</span><span class="p">,</span> <span class="n">hit_proportion</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_PROPORTION</span><span class="p">,</span> <span class="n">max_angle_with_z_axis</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_ANGLE_WITH_Z_AXIS</span><span class="p">,</span> <span class="n">parallel_ray_normal_angle_tolerance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_PARALLEL_RAY_NORMAL_ANGLE_TOLERANCE</span><span class="p">,</span> <span class="n">hit_to_plane_threshold</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_TO_PLANE_THRESHOLD</span><span class="p">,</span> <span class="n">cuboid_bottom_padding</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_CUBOID_BOTTOM_PADDING</span><span class="p">,</span> <span class="n">undo_cuboid_bottom_padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">refuse_downwards</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Samples points on an object's surface using ray casting.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>obj</code></td>
          <td>
                <code>DatasetObject</code>
          </td>
          <td><p>The object to sample points on.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start_points</code></td>
          <td>
                <code>n, s, 3)-array</code>
          </td>
          <td><p>(num_samples, max_sampling_attempts, 3) shaped array representing the start points for
raycasting defined in the world frame</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_points</code></td>
          <td>
                <code>n, s, 3)-array</code>
          </td>
          <td><p>(num_samples, max_sampling_attempts, 3) shaped array representing the end points for
raycasting defined in the world frame</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cuboid_dimensions</code></td>
          <td>
                <code>n, 3)-array</code>
          </td>
          <td><p>Float sequence of len 3, the size of the empty cuboid we are trying to sample.
Can also provide list of cuboid dimension triplets in which case each i'th sample will be sampled using
the i'th triplet. Alternatively, cuboid_dimensions can be set to be all zeros if the user just want to
sample points (instead of cuboids) for significantly better performance. This applies when the user wants
to sample very small particles.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>ignore_objs</code></td>
          <td>
                <code>None or list of EntityPrim</code>
          </td>
          <td><p>If @obj is None, this can be used to filter objects when checking
for valid cuboid locations. Any sampled rays that hit an object in @ignore_objs will be ignored. If None,
no filtering will be used</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>new_ray_per_horizontal_distance</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>per this distance of the cuboid dimension, increase the grid size of
the parallel ray-testing by 1. This controls how fine-grained the grid ray-casting should be with respect to
the size of the sampled cuboid.</p></td>
          <td>
                <code>m.DEFAULT_NEW_RAY_PER_HORIZONTAL_DISTANCE</code>
          </td>
        </tr>
        <tr>
          <td><code>hit_proportion</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>the minimum percentage of the hits required across the grid.</p></td>
          <td>
                <code>m.DEFAULT_HIT_PROPORTION</code>
          </td>
        </tr>
        <tr>
          <td><code>max_angle_with_z_axis</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>maximum angle between hit normal and positive Z axis allowed. Can be used to
disallow downward-facing hits when refuse_downwards=True.</p></td>
          <td>
                <code>m.DEFAULT_MAX_ANGLE_WITH_Z_AXIS</code>
          </td>
        </tr>
        <tr>
          <td><code>parallel_ray_normal_angle_tolerance</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>maximum angle difference between the normal of the center hit
and the normal of other hits allowed.</p></td>
          <td>
                <code>m.DEFAULT_PARALLEL_RAY_NORMAL_ANGLE_TOLERANCE</code>
          </td>
        </tr>
        <tr>
          <td><code>hit_to_plane_threshold</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>how far any given hit position can be from the least-squares fit plane to
all of the hit positions before the sample is rejected.</p></td>
          <td>
                <code>m.DEFAULT_HIT_TO_PLANE_THRESHOLD</code>
          </td>
        </tr>
        <tr>
          <td><code>cuboid_bottom_padding</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>additional padding applied to the bottom of the cuboid. This is needed for the
emptiness check (@check_cuboid_empty) within the cuboid. un_padding=True can be set if the user wants to remove
the padding after the emptiness check.</p></td>
          <td>
                <code>m.DEFAULT_CUBOID_BOTTOM_PADDING</code>
          </td>
        </tr>
        <tr>
          <td><code>refuse_downwards</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>whether downward-facing hits (as defined by max_angle_with_z_axis) are allowed.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>undo_cuboid_bottom_padding</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Whether the bottom padding that's applied to the cuboid should be removed before return.
Useful when the cuboid needs to be flush with the surface for whatever reason. Note that the padding will still
be applied initially (since it's not possible to do the cuboid emptiness check without doing this - otherwise
the rays will hit the sampled-on object), so the emptiness check still checks a padded cuboid. This flag will
simply make the sampler undo the padding prior to returning.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>list of tuple: list of length num_samples elements where each element is a tuple in the form of
(cuboid_centroid, cuboid_up_vector, cuboid_rotation, {refusal_reason: [refusal_details...]}). Cuboid positions
are set to None when no successful sampling happens within the max number of attempts. Refusal details are only
filled if the debug_sampling flag is globally set to True.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span>
<span class="normal"><a href="#__codelineno-0-734">734</a></span>
<span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span>
<span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span>
<span class="normal"><a href="#__codelineno-0-844">844</a></span>
<span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span>
<span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span>
<span class="normal"><a href="#__codelineno-0-872">872</a></span>
<span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="k">def</span> <span class="nf">sample_cuboid_on_object</span><span class="p">(</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>    <span class="n">obj</span><span class="p">,</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>    <span class="n">start_points</span><span class="p">,</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a>    <span class="n">end_points</span><span class="p">,</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a>    <span class="n">cuboid_dimensions</span><span class="p">,</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a>    <span class="n">ignore_objs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a>    <span class="n">new_ray_per_horizontal_distance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_NEW_RAY_PER_HORIZONTAL_DISTANCE</span><span class="p">,</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>    <span class="n">hit_proportion</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_PROPORTION</span><span class="p">,</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>    <span class="n">max_angle_with_z_axis</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_ANGLE_WITH_Z_AXIS</span><span class="p">,</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>    <span class="n">parallel_ray_normal_angle_tolerance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_PARALLEL_RAY_NORMAL_ANGLE_TOLERANCE</span><span class="p">,</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>    <span class="n">hit_to_plane_threshold</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_TO_PLANE_THRESHOLD</span><span class="p">,</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>    <span class="n">cuboid_bottom_padding</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_CUBOID_BOTTOM_PADDING</span><span class="p">,</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>    <span class="n">undo_cuboid_bottom_padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>    <span class="n">refuse_downwards</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a><span class="p">):</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a><span class="sd">    Samples points on an object&#39;s surface using ray casting.</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a><span class="sd">        obj (DatasetObject): The object to sample points on.</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a><span class="sd">        start_points ((n, s, 3)-array): (num_samples, max_sampling_attempts, 3) shaped array representing the start points for</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a><span class="sd">            raycasting defined in the world frame</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a><span class="sd">        end_points ((n, s, 3)-array): (num_samples, max_sampling_attempts, 3) shaped array representing the end points for</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a><span class="sd">            raycasting defined in the world frame</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a><span class="sd">        cuboid_dimensions ((n, 3)-array): Float sequence of len 3, the size of the empty cuboid we are trying to sample.</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a><span class="sd">            Can also provide list of cuboid dimension triplets in which case each i&#39;th sample will be sampled using</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a><span class="sd">            the i&#39;th triplet. Alternatively, cuboid_dimensions can be set to be all zeros if the user just want to</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a><span class="sd">            sample points (instead of cuboids) for significantly better performance. This applies when the user wants</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a><span class="sd">            to sample very small particles.</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a><span class="sd">        ignore_objs (None or list of EntityPrim): If @obj is None, this can be used to filter objects when checking</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="sd">            for valid cuboid locations. Any sampled rays that hit an object in @ignore_objs will be ignored. If None,</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a><span class="sd">            no filtering will be used</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="sd">        new_ray_per_horizontal_distance (float): per this distance of the cuboid dimension, increase the grid size of</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="sd">            the parallel ray-testing by 1. This controls how fine-grained the grid ray-casting should be with respect to</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="sd">            the size of the sampled cuboid.</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">        hit_proportion (float): the minimum percentage of the hits required across the grid.</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">        max_angle_with_z_axis (float): maximum angle between hit normal and positive Z axis allowed. Can be used to</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">            disallow downward-facing hits when refuse_downwards=True.</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a><span class="sd">        parallel_ray_normal_angle_tolerance (float): maximum angle difference between the normal of the center hit</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">            and the normal of other hits allowed.</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">        hit_to_plane_threshold (float): how far any given hit position can be from the least-squares fit plane to</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">            all of the hit positions before the sample is rejected.</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a><span class="sd">        cuboid_bottom_padding (float): additional padding applied to the bottom of the cuboid. This is needed for the</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a><span class="sd">            emptiness check (@check_cuboid_empty) within the cuboid. un_padding=True can be set if the user wants to remove</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a><span class="sd">            the padding after the emptiness check.</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a><span class="sd">        refuse_downwards (bool): whether downward-facing hits (as defined by max_angle_with_z_axis) are allowed.</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a><span class="sd">        undo_cuboid_bottom_padding (bool): Whether the bottom padding that&#39;s applied to the cuboid should be removed before return.</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a><span class="sd">            Useful when the cuboid needs to be flush with the surface for whatever reason. Note that the padding will still</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a><span class="sd">            be applied initially (since it&#39;s not possible to do the cuboid emptiness check without doing this - otherwise</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a><span class="sd">            the rays will hit the sampled-on object), so the emptiness check still checks a padded cuboid. This flag will</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a><span class="sd">            simply make the sampler undo the padding prior to returning.</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a><span class="sd">        list of tuple: list of length num_samples elements where each element is a tuple in the form of</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a><span class="sd">            (cuboid_centroid, cuboid_up_vector, cuboid_rotation, {refusal_reason: [refusal_details...]}). Cuboid positions</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a><span class="sd">            are set to None when no successful sampling happens within the max number of attempts. Refusal details are only</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a><span class="sd">            filled if the debug_sampling flag is globally set to True.</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a>    <span class="k">assert</span> <span class="n">start_points</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">end_points</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> \
<a id="__codelineno-0-709" name="__codelineno-0-709"></a>        <span class="s2">&quot;the start and end points of raycasting are expected to have the same shape.&quot;</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a>    <span class="n">num_samples</span> <span class="o">=</span> <span class="n">start_points</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a>    <span class="n">cuboid_dimensions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">cuboid_dimensions</span><span class="p">)</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a>    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">cuboid_dimensions</span> <span class="o">&gt;</span> <span class="mf">50.0</span><span class="p">):</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WARNING: Trying to sample for a very large cuboid (at least one dimensions &gt; 50).&quot;</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a>              <span class="s2">&quot;This will take a prohibitively large amount of time!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a>    <span class="k">assert</span> <span class="n">cuboid_dimensions</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&lt;=</span> <span class="mi">2</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a>    <span class="k">assert</span> <span class="n">cuboid_dimensions</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;Cuboid dimensions need to contain all three dimensions.&quot;</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a>    <span class="k">if</span> <span class="n">cuboid_dimensions</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a>        <span class="k">assert</span> <span class="n">cuboid_dimensions</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">num_samples</span><span class="p">,</span> <span class="s2">&quot;Need as many offsets as samples requested.&quot;</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a>    <span class="n">results</span> <span class="o">=</span> <span class="p">[(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_samples</span><span class="p">)]</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>    <span class="n">rigid_bodies</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[</span><span class="n">link</span><span class="o">.</span><span class="n">prim_path</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>    <span class="n">ignore_rigid_bodies</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">ignore_objs</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> \
<a id="__codelineno-0-724" name="__codelineno-0-724"></a>        <span class="p">[</span><span class="n">link</span><span class="o">.</span><span class="n">prim_path</span> <span class="k">for</span> <span class="n">ignore_obj</span> <span class="ow">in</span> <span class="n">ignore_objs</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">ignore_obj</span><span class="o">.</span><span class="n">links</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_samples</span><span class="p">):</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>        <span class="n">refusal_reasons</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">4</span><span class="p">]</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>        <span class="c1"># Try each sampled position in the AABB.</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>        <span class="k">for</span> <span class="n">start_pos</span><span class="p">,</span> <span class="n">end_pos</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">end_points</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>            <span class="c1"># If we have a list of cuboid dimensions, pick the one that corresponds to this particular sample.</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>            <span class="n">this_cuboid_dimensions</span> <span class="o">=</span> <span class="n">cuboid_dimensions</span> <span class="k">if</span> <span class="n">cuboid_dimensions</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">cuboid_dimensions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>            <span class="n">zero_cuboid_dimension</span> <span class="o">=</span> <span class="p">(</span><span class="n">this_cuboid_dimensions</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">zero_cuboid_dimension</span><span class="p">:</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>                <span class="c1"># Make sure we have valid (nonzero) x and y values</span>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a>                <span class="k">assert</span> <span class="p">(</span><span class="n">this_cuboid_dimensions</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span> \
<a id="__codelineno-0-738" name="__codelineno-0-738"></a>                    <span class="sa">f</span><span class="s2">&quot;Cuboid x and y dimensions must not be zero if z dimension is nonzero! Got: </span><span class="si">{</span><span class="n">this_cuboid_dimensions</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a>                <span class="c1"># Obtain the parallel rays using the direction sampling method.</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a>                <span class="n">sources</span><span class="p">,</span> <span class="n">destinations</span><span class="p">,</span> <span class="n">grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">get_parallel_rays</span><span class="p">(</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>                    <span class="n">start_pos</span><span class="p">,</span> <span class="n">end_pos</span><span class="p">,</span> <span class="n">this_cuboid_dimensions</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">new_ray_per_horizontal_distance</span><span class="p">,</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a>                <span class="p">))</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a>                <span class="n">sources</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">start_pos</span><span class="p">])</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a>                <span class="n">destinations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">end_pos</span><span class="p">])</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>            <span class="c1"># Time to cast the rays.</span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a>            <span class="n">cast_results</span> <span class="o">=</span> <span class="n">raytest_batch</span><span class="p">(</span><span class="n">start_points</span><span class="o">=</span><span class="n">sources</span><span class="p">,</span> <span class="n">end_points</span><span class="o">=</span><span class="n">destinations</span><span class="p">)</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a>            <span class="c1"># Check whether sufficient number of rays hit the object</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>            <span class="n">hits</span> <span class="o">=</span> <span class="n">check_rays_hit_object</span><span class="p">(</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a>                <span class="n">cast_results</span><span class="p">,</span> <span class="n">hit_proportion</span><span class="p">,</span> <span class="n">refusal_reasons</span><span class="p">[</span><span class="s2">&quot;missed_object&quot;</span><span class="p">],</span> <span class="n">rigid_bodies</span><span class="p">,</span> <span class="n">ignore_rigid_bodies</span><span class="p">)</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a>            <span class="k">if</span> <span class="n">hits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>                <span class="k">continue</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>            <span class="n">center_idx</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">hits</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>            <span class="c1"># Only consider objects whose center idx has a ray hit</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">hits</span><span class="p">[</span><span class="n">center_idx</span><span class="p">]:</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>                <span class="k">continue</span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>            <span class="n">filtered_cast_results</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a>            <span class="n">filtered_center_idx</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a>            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">hit</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">hits</span><span class="p">):</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a>                <span class="k">if</span> <span class="n">hit</span><span class="p">:</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a>                    <span class="n">filtered_cast_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cast_results</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a>                    <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="n">center_idx</span><span class="p">:</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a>                        <span class="n">filtered_center_idx</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered_cast_results</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a>            <span class="c1"># Process the hit positions and normals.</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a>            <span class="n">hit_positions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ray_res</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">ray_res</span> <span class="ow">in</span> <span class="n">filtered_cast_results</span><span class="p">])</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a>            <span class="n">hit_normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ray_res</span><span class="p">[</span><span class="s2">&quot;normal&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">ray_res</span> <span class="ow">in</span> <span class="n">filtered_cast_results</span><span class="p">])</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a>            <span class="n">hit_normals</span> <span class="o">/=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">hit_normals</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">keepdims</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a>            <span class="k">assert</span> <span class="n">filtered_center_idx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a>            <span class="n">hit_link</span> <span class="o">=</span> <span class="n">filtered_cast_results</span><span class="p">[</span><span class="n">filtered_center_idx</span><span class="p">][</span><span class="s2">&quot;rigidBody&quot;</span><span class="p">]</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>            <span class="n">center_hit_pos</span> <span class="o">=</span> <span class="n">hit_positions</span><span class="p">[</span><span class="n">filtered_center_idx</span><span class="p">]</span>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a>            <span class="n">center_hit_normal</span> <span class="o">=</span> <span class="n">hit_normals</span><span class="p">[</span><span class="n">filtered_center_idx</span><span class="p">]</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a>            <span class="c1"># Reject anything facing more than 45deg downwards if requested.</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a>            <span class="k">if</span> <span class="n">refuse_downwards</span><span class="p">:</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">check_hit_max_angle_from_z_axis</span><span class="p">(</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>                    <span class="n">center_hit_normal</span><span class="p">,</span> <span class="n">max_angle_with_z_axis</span><span class="p">,</span> <span class="n">refusal_reasons</span><span class="p">[</span><span class="s2">&quot;downward_normal&quot;</span><span class="p">]</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a>                <span class="p">):</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a>            <span class="c1"># Check that none of the parallel rays&#39; hit normal differs from center ray by more than threshold.</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">zero_cuboid_dimension</span><span class="p">:</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">check_normal_similarity</span><span class="p">(</span><span class="n">center_hit_normal</span><span class="p">,</span> <span class="n">hit_normals</span><span class="p">,</span> <span class="n">parallel_ray_normal_angle_tolerance</span><span class="p">,</span> <span class="n">refusal_reasons</span><span class="p">[</span><span class="s2">&quot;hit_normal_similarity&quot;</span><span class="p">]):</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>                <span class="c1"># Fit a plane to the points.</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>                <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span> <span class="o">=</span> <span class="n">fit_plane</span><span class="p">(</span><span class="n">hit_positions</span><span class="p">)</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a>                <span class="c1"># The fit_plane normal can be facing either direction on the normal axis, but we want it to face away from</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>                <span class="c1"># the object for purposes of normal checking and padding. To do this:</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>                <span class="c1"># We get a vector from the centroid towards the center ray source, and flip the plane normal to match it.</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>                <span class="c1"># The cosine has positive sign if the two vectors are similar and a negative one if not.</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>                <span class="n">plane_to_source</span> <span class="o">=</span> <span class="n">sources</span><span class="p">[</span><span class="n">center_idx</span><span class="p">]</span> <span class="o">-</span> <span class="n">plane_centroid</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>                <span class="n">plane_normal</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">plane_to_source</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">))</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>                <span class="c1"># Check that the plane normal is similar to the hit normal</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">check_normal_similarity</span><span class="p">(</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>                    <span class="n">center_hit_normal</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">:],</span> <span class="n">parallel_ray_normal_angle_tolerance</span><span class="p">,</span> <span class="n">refusal_reasons</span><span class="p">[</span><span class="s2">&quot;plane_normal_similarity&quot;</span><span class="p">]</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>                <span class="p">):</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>                <span class="c1"># Check that the points are all within some acceptable distance of the plane.</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">check_distance_to_plane</span><span class="p">(</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>                    <span class="n">hit_positions</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">,</span> <span class="n">hit_to_plane_threshold</span><span class="p">,</span> <span class="n">refusal_reasons</span><span class="p">[</span><span class="s2">&quot;dist_to_plane&quot;</span><span class="p">]</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>                <span class="p">):</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>                <span class="c1"># Get projection of the base onto the plane, fit a rotation, and compute the new center hit / corners.</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>                <span class="n">hit_positions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ray_res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">ray_res</span> <span class="ow">in</span> <span class="n">cast_results</span><span class="p">])</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>                <span class="n">projected_hits</span> <span class="o">=</span> <span class="n">get_projection_onto_plane</span><span class="p">(</span><span class="n">hit_positions</span><span class="p">,</span> <span class="n">plane_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">)</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>                <span class="n">padding</span> <span class="o">=</span> <span class="n">cuboid_bottom_padding</span> <span class="o">*</span> <span class="n">plane_normal</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>                <span class="n">projected_hits</span> <span class="o">+=</span> <span class="n">padding</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a>                <span class="n">center_projected_hit</span> <span class="o">=</span> <span class="n">projected_hits</span><span class="p">[</span><span class="n">center_idx</span><span class="p">]</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a>                <span class="n">cuboid_centroid</span> <span class="o">=</span> <span class="n">center_projected_hit</span> <span class="o">+</span> <span class="n">plane_normal</span> <span class="o">*</span> <span class="n">this_cuboid_dimensions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>                <span class="n">rotation</span> <span class="o">=</span> <span class="n">compute_rotation_from_grid_sample</span><span class="p">(</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>                    <span class="n">grid</span><span class="p">,</span> <span class="n">projected_hits</span><span class="p">,</span> <span class="n">cuboid_centroid</span><span class="p">,</span> <span class="n">this_cuboid_dimensions</span><span class="p">,</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>                    <span class="n">hits</span><span class="p">,</span> <span class="n">refusal_reasons</span><span class="p">[</span><span class="s2">&quot;rotation_not_computable&quot;</span><span class="p">])</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>                <span class="c1"># Make sure there are enough hit points that can be used for alignment to find the rotation</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>                <span class="k">if</span> <span class="n">rotation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>                <span class="n">corner_positions</span> <span class="o">=</span> <span class="n">cuboid_centroid</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="p">:]</span> <span class="o">+</span> <span class="p">(</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a>                    <span class="n">rotation</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>                        <span class="mf">0.5</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a>                        <span class="o">*</span> <span class="n">this_cuboid_dimensions</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a>                        <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a>                            <span class="p">[</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>                                <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a>                                <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a>                                <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a>                                <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>                            <span class="p">]</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>                        <span class="p">)</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>                    <span class="p">)</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>                <span class="p">)</span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a>                <span class="c1"># Now we use the cuboid&#39;s diagonals to check that the cuboid is actually empty</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">check_cuboid_empty</span><span class="p">(</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>                        <span class="n">plane_normal</span><span class="p">,</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>                        <span class="n">corner_positions</span><span class="p">,</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a>                        <span class="n">this_cuboid_dimensions</span><span class="p">,</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>                        <span class="n">refusal_reasons</span><span class="p">[</span><span class="s2">&quot;cuboid_not_empty&quot;</span><span class="p">],</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>                        <span class="n">ignore_body_names</span><span class="o">=</span><span class="n">ignore_rigid_bodies</span><span class="p">,</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a>                <span class="p">):</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>                <span class="k">if</span> <span class="n">undo_cuboid_bottom_padding</span><span class="p">:</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>                    <span class="n">cuboid_centroid</span> <span class="o">-=</span> <span class="n">padding</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a>                <span class="n">cuboid_centroid</span> <span class="o">=</span> <span class="n">center_hit_pos</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">undo_cuboid_bottom_padding</span><span class="p">:</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a>                    <span class="n">padding</span> <span class="o">=</span> <span class="n">cuboid_bottom_padding</span> <span class="o">*</span> <span class="n">center_hit_normal</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a>                    <span class="n">cuboid_centroid</span> <span class="o">+=</span> <span class="n">padding</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a>                <span class="n">plane_normal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a>                <span class="n">rotation</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">from_quat</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>            <span class="c1"># We&#39;ve found a nice attachment point. Continue onto next point to sample.</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a>            <span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">cuboid_centroid</span><span class="p">,</span> <span class="n">plane_normal</span><span class="p">,</span> <span class="n">rotation</span><span class="o">.</span><span class="n">as_quat</span><span class="p">(),</span> <span class="n">hit_link</span><span class="p">,</span> <span class="n">refusal_reasons</span><span class="p">)</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a>            <span class="k">break</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a>    <span class="k">if</span> <span class="n">og</span><span class="o">.</span><span class="n">debug_sampling</span><span class="p">:</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sampling rejection reasons:&quot;</span><span class="p">)</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a>        <span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a>        <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a>            <span class="k">for</span> <span class="n">reason</span><span class="p">,</span> <span class="n">refusals</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a>                <span class="n">counter</span><span class="p">[</span><span class="n">reason</span><span class="p">]</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">refusals</span><span class="p">)</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">pair</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">counter</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a>    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.sample_cuboid_on_object_full_grid_topdown" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample_cuboid_on_object_full_grid_topdown</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ray_spacing</span><span class="p">,</span> <span class="n">cuboid_dimensions</span><span class="p">,</span> <span class="n">new_ray_per_horizontal_distance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_NEW_RAY_PER_HORIZONTAL_DISTANCE</span><span class="p">,</span> <span class="n">hit_proportion</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_PROPORTION</span><span class="p">,</span> <span class="n">aabb_offset</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_AABB_OFFSET</span><span class="p">,</span> <span class="n">max_angle_with_z_axis</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_ANGLE_WITH_Z_AXIS</span><span class="p">,</span> <span class="n">parallel_ray_normal_angle_tolerance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_PARALLEL_RAY_NORMAL_ANGLE_TOLERANCE</span><span class="p">,</span> <span class="n">hit_to_plane_threshold</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_TO_PLANE_THRESHOLD</span><span class="p">,</span> <span class="n">cuboid_bottom_padding</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_CUBOID_BOTTOM_PADDING</span><span class="p">,</span> <span class="n">undo_cuboid_bottom_padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">refuse_downwards</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Samples points on an object's surface using ray casting.
Rays are sampled with a dense grid from top down.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>obj</code></td>
          <td>
                <code>DatasetObject</code>
          </td>
          <td><p>The object to sample points on.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>ray_spacing</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>spacing between the rays, or equivalently, size of the grid cell, when sampling the
start and end points. This implicitly determines the number of cuboids that will be sampled.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cuboid_dimensions</code></td>
          <td>
                <code>n, 3)-array</code>
          </td>
          <td><p>Float sequence of len 3, the size of the empty cuboid we are trying to sample.
Can also provide list of cuboid dimension triplets in which case each i'th sample will be sampled using
the i'th triplet. Alternatively, cuboid_dimensions can be set to be all zeros if the user just want to
sample points (instead of cuboids) for significantly better performance. This applies when the user wants
to sample very small particles.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>new_ray_per_horizontal_distance</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>per this distance of the cuboid dimension, increase the grid size of
the parallel ray-testing by 1. This controls how fine-grained the grid ray-casting should be with respect to
the size of the sampled cuboid.</p></td>
          <td>
                <code>m.DEFAULT_NEW_RAY_PER_HORIZONTAL_DISTANCE</code>
          </td>
        </tr>
        <tr>
          <td><code>hit_proportion</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>the minimum percentage of the hits required across the grid.</p></td>
          <td>
                <code>m.DEFAULT_HIT_PROPORTION</code>
          </td>
        </tr>
        <tr>
          <td><code>aabb_offset</code></td>
          <td>
                <code>float or 3-array</code>
          </td>
          <td><p>padding for AABB to initiate ray-testing.</p></td>
          <td>
                <code>m.DEFAULT_AABB_OFFSET</code>
          </td>
        </tr>
        <tr>
          <td><code>max_angle_with_z_axis</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>maximum angle between hit normal and positive Z axis allowed. Can be used to
disallow downward-facing hits when refuse_downwards=True.</p></td>
          <td>
                <code>m.DEFAULT_MAX_ANGLE_WITH_Z_AXIS</code>
          </td>
        </tr>
        <tr>
          <td><code>parallel_ray_normal_angle_tolerance</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>maximum angle difference between the normal of the center hit
and the normal of other hits allowed.</p></td>
          <td>
                <code>m.DEFAULT_PARALLEL_RAY_NORMAL_ANGLE_TOLERANCE</code>
          </td>
        </tr>
        <tr>
          <td><code>hit_to_plane_threshold</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>how far any given hit position can be from the least-squares fit plane to
all of the hit positions before the sample is rejected.</p></td>
          <td>
                <code>m.DEFAULT_HIT_TO_PLANE_THRESHOLD</code>
          </td>
        </tr>
        <tr>
          <td><code>cuboid_bottom_padding</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>additional padding applied to the bottom of the cuboid. This is needed for the
emptiness check (@check_cuboid_empty) within the cuboid. un_padding=True can be set if the user wants to remove
the padding after the emptiness check.</p></td>
          <td>
                <code>m.DEFAULT_CUBOID_BOTTOM_PADDING</code>
          </td>
        </tr>
        <tr>
          <td><code>refuse_downwards</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>whether downward-facing hits (as defined by max_angle_with_z_axis) are allowed.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>undo_cuboid_bottom_padding</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Whether the bottom padding that's applied to the cuboid should be removed before return.
Useful when the cuboid needs to be flush with the surface for whatever reason. Note that the padding will still
be applied initially (since it's not possible to do the cuboid emptiness check without doing this - otherwise
the rays will hit the sampled-on object), so the emptiness check still checks a padded cuboid. This flag will
simply make the sampler undo the padding prior to returning.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>list of tuple: list of length num_samples elements where each element is a tuple in the form of
(cuboid_centroid, cuboid_up_vector, cuboid_rotation, {refusal_reason: [refusal_details...]}). Cuboid positions
are set to None when no successful sampling happens within the max number of attempts. Refusal details are only
filled if the debug_sampling flag is globally set to True.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="k">def</span> <span class="nf">sample_cuboid_on_object_full_grid_topdown</span><span class="p">(</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>    <span class="n">obj</span><span class="p">,</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>    <span class="n">ray_spacing</span><span class="p">,</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>    <span class="n">cuboid_dimensions</span><span class="p">,</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>    <span class="n">new_ray_per_horizontal_distance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_NEW_RAY_PER_HORIZONTAL_DISTANCE</span><span class="p">,</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>    <span class="n">hit_proportion</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_PROPORTION</span><span class="p">,</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>    <span class="n">aabb_offset</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_AABB_OFFSET</span><span class="p">,</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>    <span class="n">max_angle_with_z_axis</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_ANGLE_WITH_Z_AXIS</span><span class="p">,</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>    <span class="n">parallel_ray_normal_angle_tolerance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_PARALLEL_RAY_NORMAL_ANGLE_TOLERANCE</span><span class="p">,</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>    <span class="n">hit_to_plane_threshold</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_TO_PLANE_THRESHOLD</span><span class="p">,</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>    <span class="n">cuboid_bottom_padding</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_CUBOID_BOTTOM_PADDING</span><span class="p">,</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>    <span class="n">undo_cuboid_bottom_padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>    <span class="n">refuse_downwards</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a><span class="p">):</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a><span class="sd">    Samples points on an object&#39;s surface using ray casting.</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a><span class="sd">    Rays are sampled with a dense grid from top down.</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a><span class="sd">        obj (DatasetObject): The object to sample points on.</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a><span class="sd">        ray_spacing (float): spacing between the rays, or equivalently, size of the grid cell, when sampling the</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a><span class="sd">            start and end points. This implicitly determines the number of cuboids that will be sampled.</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a><span class="sd">        cuboid_dimensions ((n, 3)-array): Float sequence of len 3, the size of the empty cuboid we are trying to sample.</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a><span class="sd">            Can also provide list of cuboid dimension triplets in which case each i&#39;th sample will be sampled using</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a><span class="sd">            the i&#39;th triplet. Alternatively, cuboid_dimensions can be set to be all zeros if the user just want to</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a><span class="sd">            sample points (instead of cuboids) for significantly better performance. This applies when the user wants</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a><span class="sd">            to sample very small particles.</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a><span class="sd">        new_ray_per_horizontal_distance (float): per this distance of the cuboid dimension, increase the grid size of</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a><span class="sd">            the parallel ray-testing by 1. This controls how fine-grained the grid ray-casting should be with respect to</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a><span class="sd">            the size of the sampled cuboid.</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a><span class="sd">        hit_proportion (float): the minimum percentage of the hits required across the grid.</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a><span class="sd">        aabb_offset (float or 3-array): padding for AABB to initiate ray-testing.</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a><span class="sd">        max_angle_with_z_axis (float): maximum angle between hit normal and positive Z axis allowed. Can be used to</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a><span class="sd">            disallow downward-facing hits when refuse_downwards=True.</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a><span class="sd">        parallel_ray_normal_angle_tolerance (float): maximum angle difference between the normal of the center hit</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a><span class="sd">            and the normal of other hits allowed.</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a><span class="sd">        hit_to_plane_threshold (float): how far any given hit position can be from the least-squares fit plane to</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a><span class="sd">            all of the hit positions before the sample is rejected.</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a><span class="sd">        cuboid_bottom_padding (float): additional padding applied to the bottom of the cuboid. This is needed for the</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="sd">            emptiness check (@check_cuboid_empty) within the cuboid. un_padding=True can be set if the user wants to remove</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">            the padding after the emptiness check.</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a><span class="sd">        refuse_downwards (bool): whether downward-facing hits (as defined by max_angle_with_z_axis) are allowed.</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">        undo_cuboid_bottom_padding (bool): Whether the bottom padding that&#39;s applied to the cuboid should be removed before return.</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">            Useful when the cuboid needs to be flush with the surface for whatever reason. Note that the padding will still</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">            be applied initially (since it&#39;s not possible to do the cuboid emptiness check without doing this - otherwise</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">            the rays will hit the sampled-on object), so the emptiness check still checks a padded cuboid. This flag will</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a><span class="sd">            simply make the sampler undo the padding prior to returning.</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">        list of tuple: list of length num_samples elements where each element is a tuple in the form of</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a><span class="sd">            (cuboid_centroid, cuboid_up_vector, cuboid_rotation, {refusal_reason: [refusal_details...]}). Cuboid positions</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a><span class="sd">            are set to None when no successful sampling happens within the max number of attempts. Refusal details are only</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a><span class="sd">            filled if the debug_sampling flag is globally set to True.</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>    <span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span> <span class="o">=</span> <span class="n">sample_raytest_start_end_full_grid_topdown</span><span class="p">(</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>        <span class="n">obj</span><span class="p">,</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>        <span class="n">ray_spacing</span><span class="p">,</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>        <span class="n">aabb_offset</span><span class="o">=</span><span class="n">aabb_offset</span><span class="p">,</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>    <span class="p">)</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>    <span class="k">return</span> <span class="n">sample_cuboid_on_object</span><span class="p">(</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>        <span class="n">obj</span><span class="p">,</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>        <span class="n">start_points</span><span class="p">,</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>        <span class="n">end_points</span><span class="p">,</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>        <span class="n">cuboid_dimensions</span><span class="p">,</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>        <span class="n">undo_cuboid_bottom_padding</span><span class="o">=</span><span class="n">undo_cuboid_bottom_padding</span><span class="p">,</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>        <span class="n">new_ray_per_horizontal_distance</span><span class="o">=</span><span class="n">new_ray_per_horizontal_distance</span><span class="p">,</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>        <span class="n">hit_proportion</span><span class="o">=</span><span class="n">hit_proportion</span><span class="p">,</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>        <span class="n">max_angle_with_z_axis</span><span class="o">=</span><span class="n">max_angle_with_z_axis</span><span class="p">,</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>        <span class="n">parallel_ray_normal_angle_tolerance</span><span class="o">=</span><span class="n">parallel_ray_normal_angle_tolerance</span><span class="p">,</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>        <span class="n">hit_to_plane_threshold</span><span class="o">=</span><span class="n">hit_to_plane_threshold</span><span class="p">,</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>        <span class="n">cuboid_bottom_padding</span><span class="o">=</span><span class="n">cuboid_bottom_padding</span><span class="p">,</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a>        <span class="n">refuse_downwards</span><span class="o">=</span><span class="n">refuse_downwards</span><span class="p">,</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.sample_cuboid_on_object_symmetric_bimodal_distribution" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample_cuboid_on_object_symmetric_bimodal_distribution</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">num_samples</span><span class="p">,</span> <span class="n">cuboid_dimensions</span><span class="p">,</span> <span class="n">bimodal_mean_fraction</span><span class="p">,</span> <span class="n">bimodal_stdev_fraction</span><span class="p">,</span> <span class="n">axis_probabilities</span><span class="p">,</span> <span class="n">new_ray_per_horizontal_distance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_NEW_RAY_PER_HORIZONTAL_DISTANCE</span><span class="p">,</span> <span class="n">hit_proportion</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_PROPORTION</span><span class="p">,</span> <span class="n">aabb_offset</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_AABB_OFFSET</span><span class="p">,</span> <span class="n">max_sampling_attempts</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_SAMPLING_ATTEMPTS</span><span class="p">,</span> <span class="n">max_angle_with_z_axis</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_ANGLE_WITH_Z_AXIS</span><span class="p">,</span> <span class="n">parallel_ray_normal_angle_tolerance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_PARALLEL_RAY_NORMAL_ANGLE_TOLERANCE</span><span class="p">,</span> <span class="n">hit_to_plane_threshold</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_TO_PLANE_THRESHOLD</span><span class="p">,</span> <span class="n">cuboid_bottom_padding</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_CUBOID_BOTTOM_PADDING</span><span class="p">,</span> <span class="n">undo_cuboid_bottom_padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">refuse_downwards</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Samples points on an object's surface using ray casting.
Rays are sampled with a symmetric bimodal distribution.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>obj</code></td>
          <td>
                <code>DatasetObject</code>
          </td>
          <td><p>The object to sample points on.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>num_samples</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>the number of points to try to sample.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>cuboid_dimensions</code></td>
          <td>
                <code>n, 3)-array</code>
          </td>
          <td><p>Float sequence of len 3, the size of the empty cuboid we are trying to sample.
Can also provide list of cuboid dimension triplets in which case each i'th sample will be sampled using
the i'th triplet. Alternatively, cuboid_dimensions can be set to be all zeros if the user just want to
sample points (instead of cuboids) for significantly better performance. This applies when the user wants
to sample very small particles.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>bimodal_mean_fraction</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>the mean of one side of the symmetric bimodal distribution as a fraction of the
min-max range.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>bimodal_stdev_fraction</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>the standard deviation of one side of the symmetric bimodal distribution as a
fraction of the min-max range.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>axis_probabilities</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>the probability of ray casting along each axis.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>new_ray_per_horizontal_distance</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>per this distance of the cuboid dimension, increase the grid size of
the parallel ray-testing by 1. This controls how fine-grained the grid ray-casting should be with respect to
the size of the sampled cuboid.</p></td>
          <td>
                <code>m.DEFAULT_NEW_RAY_PER_HORIZONTAL_DISTANCE</code>
          </td>
        </tr>
        <tr>
          <td><code>hit_proportion</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>the minimum percentage of the hits required across the grid.</p></td>
          <td>
                <code>m.DEFAULT_HIT_PROPORTION</code>
          </td>
        </tr>
        <tr>
          <td><code>aabb_offset</code></td>
          <td>
                <code>float or 3-array</code>
          </td>
          <td><p>padding for AABB to initiate ray-testing.</p></td>
          <td>
                <code>m.DEFAULT_AABB_OFFSET</code>
          </td>
        </tr>
        <tr>
          <td><code>max_sampling_attempts</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>how many times sampling will be attempted for each requested point.</p></td>
          <td>
                <code>m.DEFAULT_MAX_SAMPLING_ATTEMPTS</code>
          </td>
        </tr>
        <tr>
          <td><code>max_angle_with_z_axis</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>maximum angle between hit normal and positive Z axis allowed. Can be used to
disallow downward-facing hits when refuse_downwards=True.</p></td>
          <td>
                <code>m.DEFAULT_MAX_ANGLE_WITH_Z_AXIS</code>
          </td>
        </tr>
        <tr>
          <td><code>parallel_ray_normal_angle_tolerance</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>maximum angle difference between the normal of the center hit
and the normal of other hits allowed.</p></td>
          <td>
                <code>m.DEFAULT_PARALLEL_RAY_NORMAL_ANGLE_TOLERANCE</code>
          </td>
        </tr>
        <tr>
          <td><code>hit_to_plane_threshold</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>how far any given hit position can be from the least-squares fit plane to
all of the hit positions before the sample is rejected.</p></td>
          <td>
                <code>m.DEFAULT_HIT_TO_PLANE_THRESHOLD</code>
          </td>
        </tr>
        <tr>
          <td><code>cuboid_bottom_padding</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>additional padding applied to the bottom of the cuboid. This is needed for the
emptiness check (@check_cuboid_empty) within the cuboid. un_padding=True can be set if the user wants to remove
the padding after the emptiness check.</p></td>
          <td>
                <code>m.DEFAULT_CUBOID_BOTTOM_PADDING</code>
          </td>
        </tr>
        <tr>
          <td><code>refuse_downwards</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>whether downward-facing hits (as defined by max_angle_with_z_axis) are allowed.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>undo_cuboid_bottom_padding</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>Whether the bottom padding that's applied to the cuboid should be removed before return.
Useful when the cuboid needs to be flush with the surface for whatever reason. Note that the padding will still
be applied initially (since it's not possible to do the cuboid emptiness check without doing this - otherwise
the rays will hit the sampled-on object), so the emptiness check still checks a padded cuboid. This flag will
simply make the sampler undo the padding prior to returning.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>list of tuple: list of length num_samples elements where each element is a tuple in the form of
(cuboid_centroid, cuboid_up_vector, cuboid_rotation, {refusal_reason: [refusal_details...]}). Cuboid positions
are set to None when no successful sampling happens within the max number of attempts. Refusal details are only
filled if the debug_sampling flag is globally set to True.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-486" name="__codelineno-0-486"></a><span class="k">def</span> <span class="nf">sample_cuboid_on_object_symmetric_bimodal_distribution</span><span class="p">(</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>    <span class="n">obj</span><span class="p">,</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a>    <span class="n">num_samples</span><span class="p">,</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>    <span class="n">cuboid_dimensions</span><span class="p">,</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>    <span class="n">bimodal_mean_fraction</span><span class="p">,</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>    <span class="n">bimodal_stdev_fraction</span><span class="p">,</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>    <span class="n">axis_probabilities</span><span class="p">,</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>    <span class="n">new_ray_per_horizontal_distance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_NEW_RAY_PER_HORIZONTAL_DISTANCE</span><span class="p">,</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>    <span class="n">hit_proportion</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_PROPORTION</span><span class="p">,</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>    <span class="n">aabb_offset</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_AABB_OFFSET</span><span class="p">,</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a>    <span class="n">max_sampling_attempts</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_SAMPLING_ATTEMPTS</span><span class="p">,</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>    <span class="n">max_angle_with_z_axis</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_ANGLE_WITH_Z_AXIS</span><span class="p">,</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a>    <span class="n">parallel_ray_normal_angle_tolerance</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_PARALLEL_RAY_NORMAL_ANGLE_TOLERANCE</span><span class="p">,</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>    <span class="n">hit_to_plane_threshold</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_HIT_TO_PLANE_THRESHOLD</span><span class="p">,</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>    <span class="n">cuboid_bottom_padding</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_CUBOID_BOTTOM_PADDING</span><span class="p">,</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>    <span class="n">undo_cuboid_bottom_padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>    <span class="n">refuse_downwards</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="p">):</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a><span class="sd">    Samples points on an object&#39;s surface using ray casting.</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="sd">    Rays are sampled with a symmetric bimodal distribution.</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="sd">        obj (DatasetObject): The object to sample points on.</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">        num_samples (int): the number of points to try to sample.</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">        cuboid_dimensions ((n, 3)-array): Float sequence of len 3, the size of the empty cuboid we are trying to sample.</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">            Can also provide list of cuboid dimension triplets in which case each i&#39;th sample will be sampled using</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">            the i&#39;th triplet. Alternatively, cuboid_dimensions can be set to be all zeros if the user just want to</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a><span class="sd">            sample points (instead of cuboids) for significantly better performance. This applies when the user wants</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">            to sample very small particles.</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a><span class="sd">        bimodal_mean_fraction (float): the mean of one side of the symmetric bimodal distribution as a fraction of the</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">            min-max range.</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a><span class="sd">        bimodal_stdev_fraction (float): the standard deviation of one side of the symmetric bimodal distribution as a</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">            fraction of the min-max range.</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="sd">        axis_probabilities (3-array): the probability of ray casting along each axis.</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a><span class="sd">        new_ray_per_horizontal_distance (float): per this distance of the cuboid dimension, increase the grid size of</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">            the parallel ray-testing by 1. This controls how fine-grained the grid ray-casting should be with respect to</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">            the size of the sampled cuboid.</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a><span class="sd">        hit_proportion (float): the minimum percentage of the hits required across the grid.</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">        aabb_offset (float or 3-array): padding for AABB to initiate ray-testing.</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">        max_sampling_attempts (int): how many times sampling will be attempted for each requested point.</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">        max_angle_with_z_axis (float): maximum angle between hit normal and positive Z axis allowed. Can be used to</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">            disallow downward-facing hits when refuse_downwards=True.</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a><span class="sd">        parallel_ray_normal_angle_tolerance (float): maximum angle difference between the normal of the center hit</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a><span class="sd">            and the normal of other hits allowed.</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">        hit_to_plane_threshold (float): how far any given hit position can be from the least-squares fit plane to</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a><span class="sd">            all of the hit positions before the sample is rejected.</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a><span class="sd">        cuboid_bottom_padding (float): additional padding applied to the bottom of the cuboid. This is needed for the</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="sd">            emptiness check (@check_cuboid_empty) within the cuboid. un_padding=True can be set if the user wants to remove</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a><span class="sd">            the padding after the emptiness check.</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">        refuse_downwards (bool): whether downward-facing hits (as defined by max_angle_with_z_axis) are allowed.</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a><span class="sd">        undo_cuboid_bottom_padding (bool): Whether the bottom padding that&#39;s applied to the cuboid should be removed before return.</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">            Useful when the cuboid needs to be flush with the surface for whatever reason. Note that the padding will still</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a><span class="sd">            be applied initially (since it&#39;s not possible to do the cuboid emptiness check without doing this - otherwise</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a><span class="sd">            the rays will hit the sampled-on object), so the emptiness check still checks a padded cuboid. This flag will</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a><span class="sd">            simply make the sampler undo the padding prior to returning.</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a><span class="sd">        list of tuple: list of length num_samples elements where each element is a tuple in the form of</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a><span class="sd">            (cuboid_centroid, cuboid_up_vector, cuboid_rotation, {refusal_reason: [refusal_details...]}). Cuboid positions</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a><span class="sd">            are set to None when no successful sampling happens within the max number of attempts. Refusal details are only</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a><span class="sd">            filled if the debug_sampling flag is globally set to True.</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a>    <span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span> <span class="o">=</span> <span class="n">sample_raytest_start_end_symmetric_bimodal_distribution</span><span class="p">(</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>        <span class="n">obj</span><span class="p">,</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>        <span class="n">num_samples</span><span class="p">,</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a>        <span class="n">bimodal_mean_fraction</span><span class="p">,</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>        <span class="n">bimodal_stdev_fraction</span><span class="p">,</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>        <span class="n">axis_probabilities</span><span class="p">,</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>        <span class="n">aabb_offset</span><span class="o">=</span><span class="n">aabb_offset</span><span class="p">,</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a>        <span class="n">max_sampling_attempts</span><span class="o">=</span><span class="n">max_sampling_attempts</span><span class="p">,</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>    <span class="p">)</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>    <span class="k">return</span> <span class="n">sample_cuboid_on_object</span><span class="p">(</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>        <span class="n">obj</span><span class="p">,</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>        <span class="n">start_points</span><span class="p">,</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>        <span class="n">end_points</span><span class="p">,</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>        <span class="n">cuboid_dimensions</span><span class="p">,</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>        <span class="n">undo_cuboid_bottom_padding</span><span class="o">=</span><span class="n">undo_cuboid_bottom_padding</span><span class="p">,</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>        <span class="n">new_ray_per_horizontal_distance</span><span class="o">=</span><span class="n">new_ray_per_horizontal_distance</span><span class="p">,</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>        <span class="n">hit_proportion</span><span class="o">=</span><span class="n">hit_proportion</span><span class="p">,</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>        <span class="n">max_angle_with_z_axis</span><span class="o">=</span><span class="n">max_angle_with_z_axis</span><span class="p">,</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>        <span class="n">parallel_ray_normal_angle_tolerance</span><span class="o">=</span><span class="n">parallel_ray_normal_angle_tolerance</span><span class="p">,</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>        <span class="n">hit_to_plane_threshold</span><span class="o">=</span><span class="n">hit_to_plane_threshold</span><span class="p">,</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>        <span class="n">cuboid_bottom_padding</span><span class="o">=</span><span class="n">cuboid_bottom_padding</span><span class="p">,</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>        <span class="n">refuse_downwards</span><span class="o">=</span><span class="n">refuse_downwards</span><span class="p">,</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.sample_origin_positions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample_origin_positions</span><span class="p">(</span><span class="n">mins</span><span class="p">,</span> <span class="n">maxes</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">bimodal_mean_fraction</span><span class="p">,</span> <span class="n">bimodal_stdev_fraction</span><span class="p">,</span> <span class="n">axis_probabilities</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Sample ray casting origin positions with a given distribution.</p>
<p>The way the sampling works is that for each particle, it will sample two coordinates uniformly and one
using a symmetric, bimodal truncated normal distribution. This way, the particles will mostly be close to the faces
of the AABB (given a correctly parameterized bimodal truncated normal) and will be spread across each face,
but there will still be a small number of particles spawned inside the object if it has an interior.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>mins</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>the minimum coordinate along each axis.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>maxes</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>the maximum coordinate along each axis.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>count</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>Number of origins to sample.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>bimodal_mean_fraction</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>the mean of one side of the symmetric bimodal distribution as a fraction of the
min-max range.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>bimodal_stdev_fraction</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>the standard deviation of one side of the symmetric bimodal distribution as a
fraction of the min-max range.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>axis_probabilities</code></td>
          <td>
                <code>3-array</code>
          </td>
          <td><p>the probability of ray casting along each axis.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>list</code></td>          <td>
          </td>
          <td><p>List where each element is (ray cast axis index, bool whether the axis was sampled from the top side,
[x, y, z]) tuples.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="k">def</span> <span class="nf">sample_origin_positions</span><span class="p">(</span><span class="n">mins</span><span class="p">,</span> <span class="n">maxes</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">bimodal_mean_fraction</span><span class="p">,</span> <span class="n">bimodal_stdev_fraction</span><span class="p">,</span> <span class="n">axis_probabilities</span><span class="p">):</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">    Sample ray casting origin positions with a given distribution.</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">    The way the sampling works is that for each particle, it will sample two coordinates uniformly and one</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">    using a symmetric, bimodal truncated normal distribution. This way, the particles will mostly be close to the faces</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">    of the AABB (given a correctly parameterized bimodal truncated normal) and will be spread across each face,</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="sd">    but there will still be a small number of particles spawned inside the object if it has an interior.</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">        mins (3-array): the minimum coordinate along each axis.</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">        maxes (3-array): the maximum coordinate along each axis.</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">        count (int): Number of origins to sample.</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">        bimodal_mean_fraction (float): the mean of one side of the symmetric bimodal distribution as a fraction of the</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">            min-max range.</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">        bimodal_stdev_fraction (float): the standard deviation of one side of the symmetric bimodal distribution as a</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">            fraction of the min-max range.</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">        axis_probabilities (3-array): the probability of ray casting along each axis.</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">        list: List where each element is (ray cast axis index, bool whether the axis was sampled from the top side,</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">            [x, y, z]) tuples.</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">mins</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span class="k">assert</span> <span class="n">mins</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">maxes</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>        <span class="c1"># Get the uniform sample first.</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>        <span class="n">position</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>        <span class="c1"># Sample the bimodal normal.</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>        <span class="n">bottom</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span> <span class="o">-</span> <span class="n">bimodal_mean_fraction</span><span class="p">)</span> <span class="o">/</span> <span class="n">bimodal_stdev_fraction</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>        <span class="n">top</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">bimodal_mean_fraction</span><span class="p">)</span> <span class="o">/</span> <span class="n">bimodal_stdev_fraction</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>        <span class="n">bimodal_sample</span> <span class="o">=</span> <span class="n">truncnorm</span><span class="o">.</span><span class="n">rvs</span><span class="p">(</span><span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="n">bimodal_mean_fraction</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">bimodal_stdev_fraction</span><span class="p">)</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>        <span class="c1"># Pick which axis the bimodal normal sample should go to.</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>        <span class="n">bimodal_axis</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="o">=</span><span class="n">axis_probabilities</span><span class="p">)</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>        <span class="c1"># Choose which side of the axis to sample from. We only sample from the top for the Z axis.</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>        <span class="k">if</span> <span class="n">bimodal_axis</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>            <span class="n">bimodal_axis_top_side</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>            <span class="n">bimodal_axis_top_side</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>        <span class="c1"># Move sample based on chosen side.</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>        <span class="n">position</span><span class="p">[</span><span class="n">bimodal_axis</span><span class="p">]</span> <span class="o">=</span> <span class="n">bimodal_sample</span> <span class="k">if</span> <span class="n">bimodal_axis_top_side</span> <span class="k">else</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">bimodal_sample</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>        <span class="c1"># Scale the position from the standard normal range to the min-max range.</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>        <span class="n">scaled_position</span> <span class="o">=</span> <span class="n">mins</span> <span class="o">+</span> <span class="p">(</span><span class="n">maxes</span> <span class="o">-</span> <span class="n">mins</span><span class="p">)</span> <span class="o">*</span> <span class="n">position</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span class="c1"># Save the result.</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">bimodal_axis</span><span class="p">,</span> <span class="n">bimodal_axis_top_side</span><span class="p">,</span> <span class="n">scaled_position</span><span class="p">))</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.sample_raytest_start_end_full_grid_topdown" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample_raytest_start_end_full_grid_topdown</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">ray_spacing</span><span class="p">,</span> <span class="n">aabb_offset</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_AABB_OFFSET</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Sample the start points and end points around a given object by a dense grid from top down.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>obj</code></td>
          <td>
                <code>DatasetObject</code>
          </td>
          <td><p>The object to sample points on.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>ray_spacing</code></td>
          <td>
                <code>float</code>
          </td>
          <td><p>spacing between the rays, or equivalently, size of the grid cell</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>aabb_offset</code></td>
          <td>
                <code>float or numpy array</code>
          </td>
          <td><p>padding for AABB to initiate ray-testing.</p></td>
          <td>
                <code>m.DEFAULT_AABB_OFFSET</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>2-tuple:
- (n, s, 3)-array: (num_samples, max_sampling_attempts, 3) shaped array representing the start points for
    raycasting defined in the world frame
- (n, s, 3)-array: (num_samples, max_sampling_attempts, 3) shaped array representing the end points for
    raycasting defined in the world frame</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-439" name="__codelineno-0-439"></a><span class="k">def</span> <span class="nf">sample_raytest_start_end_full_grid_topdown</span><span class="p">(</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>    <span class="n">obj</span><span class="p">,</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>    <span class="n">ray_spacing</span><span class="p">,</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>    <span class="n">aabb_offset</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_AABB_OFFSET</span><span class="p">,</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a><span class="p">):</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a><span class="sd">    Sample the start points and end points around a given object by a dense grid from top down.</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a><span class="sd">        obj (DatasetObject): The object to sample points on.</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a><span class="sd">        ray_spacing (float): spacing between the rays, or equivalently, size of the grid cell</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a><span class="sd">        aabb_offset (float or numpy array): padding for AABB to initiate ray-testing.</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a><span class="sd">        2-tuple:</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="sd">            - (n, s, 3)-array: (num_samples, max_sampling_attempts, 3) shaped array representing the start points for</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">                raycasting defined in the world frame</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a><span class="sd">            - (n, s, 3)-array: (num_samples, max_sampling_attempts, 3) shaped array representing the end points for</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="sd">                raycasting defined in the world frame</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>    <span class="n">bbox_center</span><span class="p">,</span> <span class="n">bbox_orn</span><span class="p">,</span> <span class="n">bbox_bf_extent</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_base_aligned_bbox</span><span class="p">(</span><span class="n">xy_aligned</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fallback_to_aabb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>    <span class="n">half_extent_with_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">bbox_bf_extent</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">aabb_offset</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">half_extent_with_offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">half_extent_with_offset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">half_extent_with_offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">ray_spacing</span><span class="p">))</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">half_extent_with_offset</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">half_extent_with_offset</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">half_extent_with_offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">ray_spacing</span><span class="p">))</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>    <span class="n">n_rays</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>    <span class="n">start_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>        <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a>        <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>        <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">n_rays</span><span class="p">)</span> <span class="o">*</span> <span class="n">half_extent_with_offset</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>    <span class="p">])</span><span class="o">.</span><span class="n">T</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>    <span class="n">end_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">start_points</span><span class="p">)</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a>    <span class="n">end_points</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">half_extent_with_offset</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a>    <span class="c1"># Convert the points into the world frame</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a>    <span class="n">to_wf_transform</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">pose2mat</span><span class="p">((</span><span class="n">bbox_center</span><span class="p">,</span> <span class="n">bbox_orn</span><span class="p">))</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a>    <span class="n">start_points</span> <span class="o">=</span> <span class="n">trimesh</span><span class="o">.</span><span class="n">transformations</span><span class="o">.</span><span class="n">transform_points</span><span class="p">(</span><span class="n">start_points</span><span class="p">,</span> <span class="n">to_wf_transform</span><span class="p">)</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>    <span class="n">end_points</span> <span class="o">=</span> <span class="n">trimesh</span><span class="o">.</span><span class="n">transformations</span><span class="o">.</span><span class="n">transform_points</span><span class="p">(</span><span class="n">end_points</span><span class="p">,</span> <span class="n">to_wf_transform</span><span class="p">)</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>    <span class="n">start_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">expand_dims</span><span class="p">(</span><span class="n">start_points</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>    <span class="n">end_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">expand_dims</span><span class="p">(</span><span class="n">end_points</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>    <span class="k">return</span> <span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h2 id="utils.sampling_utils.sample_raytest_start_end_symmetric_bimodal_distribution" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample_raytest_start_end_symmetric_bimodal_distribution</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">num_samples</span><span class="p">,</span> <span class="n">bimodal_mean_fraction</span><span class="p">,</span> <span class="n">bimodal_stdev_fraction</span><span class="p">,</span> <span class="n">axis_probabilities</span><span class="p">,</span> <span class="n">aabb_offset</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_AABB_OFFSET</span><span class="p">,</span> <span class="n">max_sampling_attempts</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_SAMPLING_ATTEMPTS</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>Sample the start points and end points around a given object by a symmetric bimodal distribution</p>
<p>obj (DatasetObject): The object to sample points on.
num_samples (int): the number of points to try to sample.
bimodal_mean_fraction (float): the mean of one side of the symmetric bimodal distribution as a fraction of the
    min-max range.
bimodal_stdev_fraction (float): the standard deviation of one side of the symmetric bimodal distribution as a
    fraction of the min-max range.
axis_probabilities (3-array): probability of ray casting along each axis.
aabb_offset (float or 3-array): padding for AABB to initiate ray-testing.
max_sampling_attempts (int): how many times sampling will be attempted for each requested point.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>2-tuple:
- (n, s, 3)-array: (num_samples, max_sampling_attempts, 3) shaped array representing the start points for
    raycasting defined in the world frame
- (n, s, 3)-array: (num_samples, max_sampling_attempts, 3) shaped array representing the end points for
    raycasting defined in the world frame</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>utils/sampling_utils.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="k">def</span> <span class="nf">sample_raytest_start_end_symmetric_bimodal_distribution</span><span class="p">(</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>    <span class="n">obj</span><span class="p">,</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>    <span class="n">num_samples</span><span class="p">,</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>    <span class="n">bimodal_mean_fraction</span><span class="p">,</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>    <span class="n">bimodal_stdev_fraction</span><span class="p">,</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>    <span class="n">axis_probabilities</span><span class="p">,</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>    <span class="n">aabb_offset</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_AABB_OFFSET</span><span class="p">,</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>    <span class="n">max_sampling_attempts</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">DEFAULT_MAX_SAMPLING_ATTEMPTS</span><span class="p">,</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="p">):</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">    Sample the start points and end points around a given object by a symmetric bimodal distribution</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a><span class="sd">    obj (DatasetObject): The object to sample points on.</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="sd">    num_samples (int): the number of points to try to sample.</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="sd">    bimodal_mean_fraction (float): the mean of one side of the symmetric bimodal distribution as a fraction of the</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">        min-max range.</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="sd">    bimodal_stdev_fraction (float): the standard deviation of one side of the symmetric bimodal distribution as a</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">        fraction of the min-max range.</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">    axis_probabilities (3-array): probability of ray casting along each axis.</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a><span class="sd">    aabb_offset (float or 3-array): padding for AABB to initiate ray-testing.</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a><span class="sd">    max_sampling_attempts (int): how many times sampling will be attempted for each requested point.</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a><span class="sd">        2-tuple:</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="sd">            - (n, s, 3)-array: (num_samples, max_sampling_attempts, 3) shaped array representing the start points for</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a><span class="sd">                raycasting defined in the world frame</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="sd">            - (n, s, 3)-array: (num_samples, max_sampling_attempts, 3) shaped array representing the end points for</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="sd">                raycasting defined in the world frame</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>    <span class="n">bbox_center</span><span class="p">,</span> <span class="n">bbox_orn</span><span class="p">,</span> <span class="n">bbox_bf_extent</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_base_aligned_bbox</span><span class="p">(</span><span class="n">xy_aligned</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fallback_to_aabb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>    <span class="n">half_extent_with_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">bbox_bf_extent</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">aabb_offset</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>    <span class="n">start_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">num_samples</span><span class="p">,</span> <span class="n">max_sampling_attempts</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>    <span class="n">end_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">num_samples</span><span class="p">,</span> <span class="n">max_sampling_attempts</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_samples</span><span class="p">):</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>        <span class="c1"># Sample the starting positions in advance.</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>        <span class="c1"># TODO: Narrow down the sampling domain so that we don&#39;t sample scenarios where the center is in-domain but the</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>        <span class="c1"># full extent isn&#39;t. Currently a lot of samples are being wasted because of this.</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>        <span class="n">samples</span> <span class="o">=</span> <span class="n">sample_origin_positions</span><span class="p">(</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>            <span class="o">-</span><span class="n">half_extent_with_offset</span><span class="p">,</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>            <span class="n">half_extent_with_offset</span><span class="p">,</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>            <span class="n">max_sampling_attempts</span><span class="p">,</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>            <span class="n">bimodal_mean_fraction</span><span class="p">,</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>            <span class="n">bimodal_stdev_fraction</span><span class="p">,</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>            <span class="n">axis_probabilities</span><span class="p">,</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>        <span class="p">)</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>        <span class="c1"># Try each sampled position in the AABB.</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="p">(</span><span class="n">axis</span><span class="p">,</span> <span class="n">is_top</span><span class="p">,</span> <span class="n">start_point</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">samples</span><span class="p">):</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>            <span class="c1"># Compute the ray&#39;s destination using the sampling &amp; AABB information.</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>            <span class="n">end_point</span> <span class="o">=</span> <span class="n">compute_ray_destination</span><span class="p">(</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>                <span class="n">axis</span><span class="p">,</span> <span class="n">is_top</span><span class="p">,</span> <span class="n">start_point</span><span class="p">,</span> <span class="o">-</span><span class="n">half_extent_with_offset</span><span class="p">,</span> <span class="n">half_extent_with_offset</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>            <span class="p">)</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>            <span class="n">start_points</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">start_point</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>            <span class="n">end_points</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">end_point</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>    <span class="c1"># Convert the points into the world frame</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>    <span class="n">orig_shape</span> <span class="o">=</span> <span class="n">start_points</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>    <span class="n">to_wf_transform</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">pose2mat</span><span class="p">((</span><span class="n">bbox_center</span><span class="p">,</span> <span class="n">bbox_orn</span><span class="p">))</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>    <span class="n">start_points</span> <span class="o">=</span> <span class="n">trimesh</span><span class="o">.</span><span class="n">transformations</span><span class="o">.</span><span class="n">transform_points</span><span class="p">(</span><span class="n">start_points</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">to_wf_transform</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">orig_shape</span><span class="p">)</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>    <span class="n">end_points</span> <span class="o">=</span> <span class="n">trimesh</span><span class="o">.</span><span class="n">transformations</span><span class="o">.</span><span class="n">transform_points</span><span class="p">(</span><span class="n">end_points</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">to_wf_transform</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">orig_shape</span><span class="p">)</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>    <span class="k">return</span> <span class="n">start_points</span><span class="p">,</span> <span class="n">end_points</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="render_utils.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: render_utils" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              render_utils
            </div>
          </div>
        </a>
      
      
        
        <a href="sim_utils.html" class="md-footer__link md-footer__link--next" aria-label="Next: sim_utils" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              sim_utils
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.939a4419.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.af94fead.min.js"></script>
      
    
    
  </body>
</html>