
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/OmniGibson_logo.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.11+insiders-4.26.6">
    
    
      
        <title>Building Blocks - OmniGibson Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.9b35cbb9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#building-blocks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="OmniGibson Documentation" class="md-header__button md-logo" aria-label="OmniGibson Documentation" data-md-component="logo">
      
  <img src="../assets/OmniGibson_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OmniGibson Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Building Blocks
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/StanfordVL/OmniGibson" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    StanfordVL/OmniGibson
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            <nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        




  
    <li class="md-tabs__item">
      <a href="../index.html" class="md-tabs__link">
        
  
  Home

      </a>
    </li>
  

      
        

  




  
    
    
    
      <li class="md-tabs__item">
        <a href="installation.html" class="md-tabs__link md-tabs__link--active">
          
  
  Getting Started

        </a>
      </li>
    
  

      
        




  
    
    
    
      <li class="md-tabs__item">
        <a href="../reference/app_omni.html" class="md-tabs__link">
          
  
  Code Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="OmniGibson Documentation" class="md-nav__button md-logo" aria-label="OmniGibson Documentation" data-md-component="logo">
      
  <img src="../assets/OmniGibson_logo.png" alt="logo">

    </a>
    OmniGibson Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/StanfordVL/OmniGibson" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    StanfordVL/OmniGibson
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
        
        
          <label class="md-nav__link" for="__nav_2">
            
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="installation.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.78 15.3 6 6 2.11-2.16-6-6-2.11 2.16m3.72-5.2c-.39 0-.81-.05-1.14-.19L4.97 21.25l-2.11-2.11 7.41-7.4L8.5 9.96l-.72.7-1.45-1.41v2.86l-.7.7-3.52-3.56.7-.7h2.81l-1.4-1.41 3.56-3.56a2.976 2.976 0 0 1 4.22 0L9.89 5.74l1.41 1.4-.71.71 1.79 1.78 1.82-1.88c-.14-.33-.2-.75-.2-1.12a3.49 3.49 0 0 1 3.5-3.52c.59 0 1.11.14 1.58.42L16.41 6.2l1.5 1.5 2.67-2.67c.28.47.42.97.42 1.6 0 1.92-1.55 3.47-3.5 3.47Z"/></svg>
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="quickstart.html" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M14.064 0a8.75 8.75 0 0 0-6.187 2.563l-.459.458c-.314.314-.616.641-.904.979H3.31a1.75 1.75 0 0 0-1.49.833L.11 7.607a.75.75 0 0 0 .418 1.11l3.102.954c.037.051.079.1.124.145l2.429 2.428c.046.046.094.088.145.125l.954 3.102a.75.75 0 0 0 1.11.418l2.774-1.707a1.75 1.75 0 0 0 .833-1.49V9.485c.338-.288.665-.59.979-.904l.458-.459A8.75 8.75 0 0 0 16 1.936V1.75A1.75 1.75 0 0 0 14.25 0h-.186zM10.5 10.625c-.088.06-.177.118-.266.175l-2.35 1.521.548 1.783 1.949-1.2a.25.25 0 0 0 .119-.213v-2.066zM3.678 8.116 5.2 5.766c.058-.09.117-.178.176-.266H3.309a.25.25 0 0 0-.213.119l-1.2 1.95 1.782.547zm5.26-4.493A7.25 7.25 0 0 1 14.063 1.5h.186a.25.25 0 0 1 .25.25v.186a7.25 7.25 0 0 1-2.123 5.127l-.459.458a15.21 15.21 0 0 1-2.499 2.02l-2.317 1.5-2.143-2.143 1.5-2.317a15.25 15.25 0 0 1 2.02-2.5l.458-.458h.002zM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-8.44 9.56a1.5 1.5 0 1 0-2.12-2.12c-.734.73-1.047 2.332-1.15 3.003a.23.23 0 0 0 .265.265c.671-.103 2.273-.416 3.005-1.148z"/></svg>
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.878.392a1.75 1.75 0 0 0-1.756 0l-5.25 3.045A1.75 1.75 0 0 0 1 4.951v6.098c0 .624.332 1.2.872 1.514l5.25 3.045a1.75 1.75 0 0 0 1.756 0l5.25-3.045c.54-.313.872-.89.872-1.514V4.951c0-.624-.332-1.2-.872-1.514L8.878.392zM7.875 1.69a.25.25 0 0 1 .25 0l4.63 2.685L8 7.133 3.245 4.375l4.63-2.685zM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432L2.5 5.677zm6.25 8.271 4.625-2.683a.25.25 0 0 0 .125-.216V5.677L8.75 8.432v5.516z"/></svg>
  
  <span class="md-ellipsis">
    Building Blocks
    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="building_blocks.html" class="md-nav__link md-nav__link--active">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.878.392a1.75 1.75 0 0 0-1.756 0l-5.25 3.045A1.75 1.75 0 0 0 1 4.951v6.098c0 .624.332 1.2.872 1.514l5.25 3.045a1.75 1.75 0 0 0 1.756 0l5.25-3.045c.54-.313.872-.89.872-1.514V4.951c0-.624-.332-1.2-.872-1.514L8.878.392zM7.875 1.69a.25.25 0 0 1 .25 0l4.63 2.685L8 7.133 3.245 4.375l4.63-2.685zM2.5 5.677v5.372c0 .09.047.171.125.216l4.625 2.683V8.432L2.5 5.677zm6.25 8.271 4.625-2.683a.25.25 0 0 0 .125-.216V5.677L8.75 8.432v5.516z"/></svg>
  
  <span class="md-ellipsis">
    Building Blocks
    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-quick-word-about-macros" class="md-nav__link">
    <span class="md-ellipsis">
      ⚙️ A quick word about macros
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environments" class="md-nav__link">
    <span class="md-ellipsis">
      🌎 Environments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🌎 Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#behavior-task-demo" class="md-nav__link">
    <span class="md-ellipsis">
      BEHAVIOR Task Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#navigation-task-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Navigation Task Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config-selection-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Config Selection Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning" class="md-nav__link">
    <span class="md-ellipsis">
      🧑‍🏫 Learning
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🧑‍🏫 Learning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reinforcement-learning-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Reinforcement Learning Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scenes" class="md-nav__link">
    <span class="md-ellipsis">
      🏔️ Scenes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🏔️ Scenes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scene-selector-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Scene Selector Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traversability-map-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Traversability Map Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objects" class="md-nav__link">
    <span class="md-ellipsis">
      🎾 Objects
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🎾 Objects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#load-object-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Load Object Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-visualizer-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Object Visualizer Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highlight-object" class="md-nav__link">
    <span class="md-ellipsis">
      Highlight Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#draw-object-bounding-box-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Draw Object Bounding Box Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#object-states" class="md-nav__link">
    <span class="md-ellipsis">
      🌡️ Object States
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🌡️ Object States">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attachment-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Attachment Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleaning-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Cleaning Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-cleaning-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Cleaning Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folded-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Folded Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temperature-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Temperature Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heat-source-or-sink-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Heat Source or Sink Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heated-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Heated Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-texture-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Object Texture Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#particle-applier-and-remover-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Particle Applier and Remover Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kinematics-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Kinematics Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slicing-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Slicing Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robots" class="md-nav__link">
    <span class="md-ellipsis">
      🤖 Robots
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🤖 Robots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot-visualizer-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Robot Visualizer Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot-control-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Robot Control Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot-grasping-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Robot Grasping Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulator" class="md-nav__link">
    <span class="md-ellipsis">
      🧰 Simulator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🧰 Simulator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-saving-and-loading-demo" class="md-nav__link">
    <span class="md-ellipsis">
      State Saving and Loading Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
        
        
          <label class="md-nav__link" for="__nav_3">
            
  
  <span class="md-ellipsis">
    Code Reference
    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" aria-label="Code Reference" data-md-level="1">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Code Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/app_omni.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    app_omni
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/controllers/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    controllers
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="controllers" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            controllers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/controllers/controller_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    controller_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/controllers/dd_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dd_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/controllers/ik_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ik_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/controllers/joint_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    joint_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/controllers/multi_finger_gripper_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    multi_finger_gripper_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/controllers/null_joint_controller.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    null_joint_controller
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/envs/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    envs
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_3">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="envs" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            envs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/envs/env_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    env_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    examples
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="examples" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/blender_demo_transition_machine.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    blender_demo_transition_machine
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_2" type="checkbox" id="__nav_3_4_2" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/environments/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    environments
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_2">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="environments" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            environments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/environments/behavior_env_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    behavior_env_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/environments/config_selector.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config_selector
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/environments/navigation_env_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    navigation_env_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/example_selector.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    example_selector
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_4" type="checkbox" id="__nav_3_4_4" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/learning/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    learning
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_4">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="learning" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_4">
            <span class="md-nav__icon md-icon"></span>
            learning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/learning/stable_baselines3_ppo_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stable_baselines3_ppo_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_5" type="checkbox" id="__nav_3_4_5" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/object_states/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    object_states
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_5">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="object_states" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_5">
            <span class="md-nav__icon md-icon"></span>
            object_states
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/attachment_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    attachment_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/blender_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    blender_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/cleaning_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cleaning_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/cleaning_demo_simple.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cleaning_demo_simple
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/folded_state_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    folded_state_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/heat_source_or_sink_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    heat_source_or_sink_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/heated_state_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    heated_state_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/object_state_texture_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    object_state_texture_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/particle_applier_remover_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    particle_applier_remover_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/sample_kinematics_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sample_kinematics_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/slicing_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slicing_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/object_states/temperature_demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    temperature_demo
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_6" type="checkbox" id="__nav_3_4_6" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/objects/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    objects
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="objects" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_6">
            <span class="md-nav__icon md-icon"></span>
            objects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/objects/draw_bounding_box.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    draw_bounding_box
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/objects/highlight_objects.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    highlight_objects
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/objects/load_object_selector.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    load_object_selector
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/objects/visualize_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    visualize_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_7" type="checkbox" id="__nav_3_4_7" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/renderer_settings/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    renderer_settings
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_7">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="renderer_settings" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_7">
            <span class="md-nav__icon md-icon"></span>
            renderer_settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/renderer_settings/renderer_settings_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    renderer_settings_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_8" type="checkbox" id="__nav_3_4_8" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/robots/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    robots
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_8">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="robots" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_8">
            <span class="md-nav__icon md-icon"></span>
            robots
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_8_1" type="checkbox" id="__nav_3_4_8_1" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/robots/advanced/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    advanced
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_8_1">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="advanced" data-md-level="4">
          <label class="md-nav__title" for="__nav_3_4_8_1">
            <span class="md-nav__icon md-icon"></span>
            advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/robots/advanced/ik_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ik_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/robots/all_robots_visualizer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    all_robots_visualizer
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/robots/grasping_mode_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    grasping_mode_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/robots/robot_control_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    robot_control_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_9" type="checkbox" id="__nav_3_4_9" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/scenes/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    scenes
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_9">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="scenes" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_9">
            <span class="md-nav__icon md-icon"></span>
            scenes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/scenes/scene_selector.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scene_selector
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/scenes/traversability_map_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    traversability_map_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4_10" type="checkbox" id="__nav_3_4_10" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/examples/simulator/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    simulator
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_4_10">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="simulator" data-md-level="3">
          <label class="md-nav__title" for="__nav_3_4_10">
            <span class="md-nav__icon md-icon"></span>
            simulator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/examples/simulator/sim_save_load_example.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sim_save_load_example
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/macros.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    macros
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/maps/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    maps
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_6">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="maps" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            maps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/maps/map_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    map_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/maps/segmentation_map.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    segmentation_map
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/maps/traversable_map.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    traversable_map
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_7" type="checkbox" id="__nav_3_7" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/object_states/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    object_states
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_7">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="object_states" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            object_states
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/aabb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aabb
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/adjacency.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    adjacency
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/attachment.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    attachment
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/burnt.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    burnt
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/contact_bodies.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    contact_bodies
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/contact_subscribed_state_mixin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    contact_subscribed_state_mixin
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/cooked.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cooked
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/covered.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    covered
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/factory.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    factory
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/filled.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    filled
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/fluid_sink.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fluid_sink
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/fluid_source.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fluid_source
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/folded.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    folded
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/frozen.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    frozen
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/heat_source_or_sink.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    heat_source_or_sink
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/heated.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    heated
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/inside.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    inside
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/kinematics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kinematics
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/link_based_state_mixin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    link_based_state_mixin
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/max_temperature.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    max_temperature
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/next_to.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    next_to
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/object_state_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    object_state_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/on_top.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    on_top
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/open.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    open
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/particle_modifier.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    particle_modifier
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/pose.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pose
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/robot_related_states.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    robot_related_states
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/room_states.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    room_states
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/saturated.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    saturated
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/sliced.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sliced
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/slicer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slicer
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/temperature.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    temperature
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/toggle.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    toggle
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/touching.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    touching
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/under.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    under
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/water_sink.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    water_sink
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/object_states/water_source.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    water_source
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_8" type="checkbox" id="__nav_3_8" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/objects/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    objects
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_8">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="objects" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            objects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/objects/controllable_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    controllable_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/objects/dataset_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dataset_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/objects/light_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    light_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/objects/object_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    object_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/objects/primitive_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    primitive_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/objects/stateful_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stateful_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/objects/usd_object.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    usd_object
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_9" type="checkbox" id="__nav_3_9" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/prims/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    prims
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_9">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="prims" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            prims
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/prims/cloth_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cloth_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/prims/entity_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    entity_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/prims/geom_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    geom_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/prims/joint_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    joint_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/prims/material_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    material_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/prims/prim_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    prim_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/prims/rigid_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rigid_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/prims/xform_prim.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    xform_prim
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_10" type="checkbox" id="__nav_3_10" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/renderer_settings/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    renderer_settings
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_10">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="renderer_settings" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            renderer_settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/renderer_settings/common_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/renderer_settings/path_tracing_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    path_tracing_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/renderer_settings/post_processing_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    post_processing_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/renderer_settings/real_time_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    real_time_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/renderer_settings/renderer_settings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    renderer_settings
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/renderer_settings/settings_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    settings_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_11" type="checkbox" id="__nav_3_11" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/reward_functions/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    reward_functions
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_11">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="reward_functions" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_11">
            <span class="md-nav__icon md-icon"></span>
            reward_functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/reward_functions/collision_reward.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    collision_reward
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/reward_functions/point_goal_reward.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_goal_reward
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/reward_functions/potential_reward.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    potential_reward
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/reward_functions/reaching_goal_reward.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reaching_goal_reward
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/reward_functions/reward_function_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reward_function_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_12" type="checkbox" id="__nav_3_12" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/robots/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    robots
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_12">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="robots" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            robots
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/active_camera_robot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    active_camera_robot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/fetch.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fetch
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/freight.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    freight
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/husky.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    husky
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/locobot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    locobot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/locomotion_robot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    locomotion_robot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/manipulation_robot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    manipulation_robot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/robot_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    robot_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/tiago.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    tiago
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/turtlebot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    turtlebot
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/robots/two_wheel_robot.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    two_wheel_robot
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_13" type="checkbox" id="__nav_3_13" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/scenes/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    scenes
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_13">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="scenes" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_13">
            <span class="md-nav__icon md-icon"></span>
            scenes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/scenes/interactive_traversable_scene.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    interactive_traversable_scene
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/scenes/scene_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scene_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/scenes/static_traversable_scene.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    static_traversable_scene
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/scenes/traversable_scene.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    traversable_scene
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_14" type="checkbox" id="__nav_3_14" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/sensors/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    sensors
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_14">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="sensors" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_14">
            <span class="md-nav__icon md-icon"></span>
            sensors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sensors/dropout_sensor_noise.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dropout_sensor_noise
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sensors/scan_sensor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    scan_sensor
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sensors/sensor_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sensor_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sensors/sensor_noise_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sensor_noise_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/sensors/vision_sensor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vision_sensor
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/simulator.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    simulator
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_16" type="checkbox" id="__nav_3_16" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/systems/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    systems
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_16">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="systems" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_16">
            <span class="md-nav__icon md-icon"></span>
            systems
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/systems/macro_particle_system.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    macro_particle_system
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/systems/micro_particle_system.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    micro_particle_system
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/systems/particle_system_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    particle_system_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/systems/system_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    system_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_17" type="checkbox" id="__nav_3_17" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/tasks/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    tasks
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_17">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="tasks" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_17">
            <span class="md-nav__icon md-icon"></span>
            tasks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/tasks/bddl_backend.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bddl_backend
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/tasks/behavior_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    behavior_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/tasks/dummy_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dummy_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/tasks/furniture_closing_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    furniture_closing_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/tasks/point_navigation_obstacle_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_navigation_obstacle_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/tasks/point_navigation_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_navigation_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/tasks/point_reaching_task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_reaching_task
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/tasks/task_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    task_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_18" type="checkbox" id="__nav_3_18" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/termination_conditions/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    termination_conditions
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_18">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="termination_conditions" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_18">
            <span class="md-nav__icon md-icon"></span>
            termination_conditions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/termination_conditions/falling.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    falling
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/termination_conditions/max_collision.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    max_collision
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/termination_conditions/point_goal.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    point_goal
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/termination_conditions/predicate_goal.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    predicate_goal
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/termination_conditions/reaching_goal.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    reaching_goal
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/termination_conditions/termination_condition_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    termination_condition_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/termination_conditions/timeout.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    timeout
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/transition_rules.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transition_rules
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_20" type="checkbox" id="__nav_3_20" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/utils/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    utils
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_20">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="utils" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_20">
            <span class="md-nav__icon md-icon"></span>
            utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/asset_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asset_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/config_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    config_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/constants.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    constants
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/control_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    control_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/deprecated_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    deprecated_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/geometry_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    geometry_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/git_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/gym_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gym_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/object_state_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    object_state_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/physx_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    physx_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/processing_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    processing_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/python_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    python_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/registry_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    registry_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/render_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    render_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/sampling_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sampling_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/sim_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    sim_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/transform_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transform_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/ui_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ui_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/usd_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    usd_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/utils/vision_utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vision_utils
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_21" type="checkbox" id="__nav_3_21" >
        
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../reference/wrappers/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    wrappers
    
  </span>
  
  

            </a>
            
              <label class="md-nav__link " for="__nav_3_21">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" aria-label="wrappers" data-md-level="2">
          <label class="md-nav__title" for="__nav_3_21">
            <span class="md-nav__icon md-icon"></span>
            wrappers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reference/wrappers/wrapper_base.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    wrapper_base
    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#a-quick-word-about-macros" class="md-nav__link">
    <span class="md-ellipsis">
      ⚙️ A quick word about macros
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environments" class="md-nav__link">
    <span class="md-ellipsis">
      🌎 Environments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🌎 Environments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#behavior-task-demo" class="md-nav__link">
    <span class="md-ellipsis">
      BEHAVIOR Task Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#navigation-task-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Navigation Task Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config-selection-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Config Selection Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning" class="md-nav__link">
    <span class="md-ellipsis">
      🧑‍🏫 Learning
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🧑‍🏫 Learning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reinforcement-learning-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Reinforcement Learning Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scenes" class="md-nav__link">
    <span class="md-ellipsis">
      🏔️ Scenes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🏔️ Scenes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scene-selector-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Scene Selector Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traversability-map-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Traversability Map Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objects" class="md-nav__link">
    <span class="md-ellipsis">
      🎾 Objects
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🎾 Objects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#load-object-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Load Object Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-visualizer-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Object Visualizer Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highlight-object" class="md-nav__link">
    <span class="md-ellipsis">
      Highlight Object
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#draw-object-bounding-box-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Draw Object Bounding Box Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#object-states" class="md-nav__link">
    <span class="md-ellipsis">
      🌡️ Object States
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🌡️ Object States">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attachment-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Attachment Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleaning-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Cleaning Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-cleaning-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Cleaning Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folded-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Folded Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temperature-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Temperature Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heat-source-or-sink-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Heat Source or Sink Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heated-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Heated Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-texture-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Object Texture Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#particle-applier-and-remover-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Particle Applier and Remover Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kinematics-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Kinematics Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#slicing-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Slicing Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#robots" class="md-nav__link">
    <span class="md-ellipsis">
      🤖 Robots
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🤖 Robots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#robot-visualizer-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Robot Visualizer Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot-control-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Robot Control Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#robot-grasping-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Robot Grasping Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#simulator" class="md-nav__link">
    <span class="md-ellipsis">
      🧰 Simulator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🧰 Simulator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-saving-and-loading-demo" class="md-nav__link">
    <span class="md-ellipsis">
      State Saving and Loading Demo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/StanfordVL/OmniGibson/edit/master/docs/getting_started/building_blocks.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="building-blocks">🧱 <strong>Building Blocks</strong></h1>
<p><strong><code>OmniGibson</code></strong> ships with many demo scripts highlighting its modularity and diverse feature set intended as a set of building blocks enabling your research. Let's try them out!</p>
<hr />
<h2 id="a-quick-word-about-macros">⚙️ <strong>A quick word about macros</strong></h2>
<details class="question annotate">
<summary>Why macros?</summary>
<p>Macros enforce global behavior that is consistent within an individual python process but can differ between processes. This is useful because globally enabling all of <strong><code>OmniGibson</code></strong>'s features can cause unecessary slowdowns (1), and so configuring the macros for your specific use case can optimize performance.</p>
</details>
<ol>
<li>For example, Omniverse provides a so-called <code>flatcache</code> feature which provides significant performance boosts, but cannot be used when fluids or soft bodies are present. So, we ideally should always have <code>gm.USE_FLATCACHE=True</code> unless we have fluids or soft bodies in our environment.</li>
</ol>
<p><code>macros</code> define a globally available set of magic numbers or flags set throughout <strong><code>OmniGibson</code></strong>. These can either be directly set in <code>omnigibson.macros.py</code>, or can be programmatically modified at runtime via:</p>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span><span class="p">,</span> <span class="n">macros</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">gm</span><span class="o">.&lt;</span><span class="n">GLOBAL_MACRO</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VALUE</span><span class="o">&gt;</span> <span class="c1"># (1)!</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">macros</span><span class="o">.&lt;</span><span class="n">OG_DIRECTORY</span><span class="o">&gt;.&lt;</span><span class="n">OG_MODULE</span><span class="o">&gt;.&lt;</span><span class="n">MODULE_MACRO</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">VALUE</span><span class="o">&gt;</span> <span class="c1"># (2)!</span>
</code></pre></div>
<ol>
<li><code>gm</code> refers to the "global" macros -- i.e.: settings that generally impact the entire <strong><code>OmniGibson</code></strong> stack. These are usually the only settings you may need to modify.</li>
<li><code>macros</code> captures all remaining macros defined throughout <strong><code>OmniGibson</code></strong>'s codebase -- these are often hardcoded default settings or magic numbers defined in a specific module. These can also be overridden, but we recommend inspecting the module first to understand how it is used.</li>
</ol>
<p>Many of our examples set various <code>macros</code> settings at the beginning of the script, and is a good way to understand use cases for modifying them!</p>
<hr />
<h2 id="environments">🌎 <strong>Environments</strong></h2>
<p>These examples showcase the full <strong><code>OmniGibson</code></strong> stack in use, and the types of environments immediately supported.</p>
<h3 id="behavior-task-demo"><strong>BEHAVIOR Task Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to instantiate a BEHAVIOR task</li>
<li>Understanding how a pre-defined configuration file is used</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">environments</span><span class="o">.</span><span class="n">behavior_env_demo</span>
</code></pre></div>
<p>This demo instantiates one of our BEHAVIOR tasks (and optionally sampling object locations online) in a fully-populated scene and loads a <code>Fetch</code> robot. The robot executes random actions and the environment is reset periodically.</p>
<details class="code">
<summary>behavior_env_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span>
<span class="normal"><a href="#__codelineno-2-33">33</a></span>
<span class="normal"><a href="#__codelineno-2-34">34</a></span>
<span class="normal"><a href="#__codelineno-2-35">35</a></span>
<span class="normal"><a href="#__codelineno-2-36">36</a></span>
<span class="normal"><a href="#__codelineno-2-37">37</a></span>
<span class="normal"><a href="#__codelineno-2-38">38</a></span>
<span class="normal"><a href="#__codelineno-2-39">39</a></span>
<span class="normal"><a href="#__codelineno-2-40">40</a></span>
<span class="normal"><a href="#__codelineno-2-41">41</a></span>
<span class="normal"><a href="#__codelineno-2-42">42</a></span>
<span class="normal"><a href="#__codelineno-2-43">43</a></span>
<span class="normal"><a href="#__codelineno-2-44">44</a></span>
<span class="normal"><a href="#__codelineno-2-45">45</a></span>
<span class="normal"><a href="#__codelineno-2-46">46</a></span>
<span class="normal"><a href="#__codelineno-2-47">47</a></span>
<span class="normal"><a href="#__codelineno-2-48">48</a></span>
<span class="normal"><a href="#__codelineno-2-49">49</a></span>
<span class="normal"><a href="#__codelineno-2-50">50</a></span>
<span class="normal"><a href="#__codelineno-2-51">51</a></span>
<span class="normal"><a href="#__codelineno-2-52">52</a></span>
<span class="normal"><a href="#__codelineno-2-53">53</a></span>
<span class="normal"><a href="#__codelineno-2-54">54</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="kn">import</span> <span class="nn">yaml</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="sd">    Generates a BEHAVIOR Task environment from a pre-defined configuration file.</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="sd">    It steps the environment 100 times with random actions sampled from the action space,</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="sd">    using the Gym interface, resetting it 10 times.</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a>    <span class="c1"># Ask the user whether they want online object sampling or not</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a>    <span class="n">sampling_options</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a>        <span class="kc">False</span><span class="p">:</span> <span class="s2">&quot;Use a pre-sampled cached BEHAVIOR activity scene&quot;</span><span class="p">,</span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a>        <span class="kc">True</span><span class="p">:</span> <span class="s2">&quot;Sample the BEHAVIOR activity in an online fashion&quot;</span><span class="p">,</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a>    <span class="p">}</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a>    <span class="n">should_sample</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">sampling_options</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;online object sampling&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a>    <span class="c1"># Load the pre-selected configuration and set the online_sampling flag</span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a>    <span class="n">config_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">og</span><span class="o">.</span><span class="n">example_config_path</span><span class="p">,</span> <span class="s2">&quot;fetch_behavior.yaml&quot;</span><span class="p">)</span>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">config_filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">),</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a>    <span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;task&quot;</span><span class="p">][</span><span class="s2">&quot;online_object_sampling&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">should_sample</span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a>    <span class="c1"># Load the environment</span>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<a id="__codelineno-2-33" name="__codelineno-2-33"></a>
<a id="__codelineno-2-34" name="__codelineno-2-34"></a>    <span class="c1"># Allow user to move camera more easily</span>
<a id="__codelineno-2-35" name="__codelineno-2-35"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">enable_viewer_camera_teleoperation</span><span class="p">()</span>
<a id="__codelineno-2-36" name="__codelineno-2-36"></a>
<a id="__codelineno-2-37" name="__codelineno-2-37"></a>    <span class="c1"># Run a simple loop and reset periodically</span>
<a id="__codelineno-2-38" name="__codelineno-2-38"></a>    <span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">1</span>
<a id="__codelineno-2-39" name="__codelineno-2-39"></a>    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_iterations</span><span class="p">):</span>
<a id="__codelineno-2-40" name="__codelineno-2-40"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Resetting environment&quot;</span><span class="p">)</span>
<a id="__codelineno-2-41" name="__codelineno-2-41"></a>        <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<a id="__codelineno-2-42" name="__codelineno-2-42"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-2-43" name="__codelineno-2-43"></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">action_space</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
<a id="__codelineno-2-44" name="__codelineno-2-44"></a>            <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
<a id="__codelineno-2-45" name="__codelineno-2-45"></a>            <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
<a id="__codelineno-2-46" name="__codelineno-2-46"></a>                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Episode finished after </span><span class="si">{}</span><span class="s2"> timesteps&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<a id="__codelineno-2-47" name="__codelineno-2-47"></a>                <span class="k">break</span>
<a id="__codelineno-2-48" name="__codelineno-2-48"></a>
<a id="__codelineno-2-49" name="__codelineno-2-49"></a>    <span class="c1"># Always close the environment at the end</span>
<a id="__codelineno-2-50" name="__codelineno-2-50"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-2-51" name="__codelineno-2-51"></a>
<a id="__codelineno-2-52" name="__codelineno-2-52"></a>
<a id="__codelineno-2-53" name="__codelineno-2-53"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-2-54" name="__codelineno-2-54"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="navigation-task-demo"><strong>Navigation Task Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to instantiate a navigation task</li>
<li>Understanding how a pre-defined configuration file is used</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">environments</span><span class="o">.</span><span class="n">navigation_env_demo</span>
</code></pre></div>
<p>This demo instantiates one of our navigation tasks in a fully-populated scene and loads a <code>Turtlebot</code> robot. The robot executes random actions and the environment is reset periodically.</p>
<details class="code">
<summary>navigation_env_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span>
<span class="normal"><a href="#__codelineno-4-30">30</a></span>
<span class="normal"><a href="#__codelineno-4-31">31</a></span>
<span class="normal"><a href="#__codelineno-4-32">32</a></span>
<span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span>
<span class="normal"><a href="#__codelineno-4-35">35</a></span>
<span class="normal"><a href="#__codelineno-4-36">36</a></span>
<span class="normal"><a href="#__codelineno-4-37">37</a></span>
<span class="normal"><a href="#__codelineno-4-38">38</a></span>
<span class="normal"><a href="#__codelineno-4-39">39</a></span>
<span class="normal"><a href="#__codelineno-4-40">40</a></span>
<span class="normal"><a href="#__codelineno-4-41">41</a></span>
<span class="normal"><a href="#__codelineno-4-42">42</a></span>
<span class="normal"><a href="#__codelineno-4-43">43</a></span>
<span class="normal"><a href="#__codelineno-4-44">44</a></span>
<span class="normal"><a href="#__codelineno-4-45">45</a></span>
<span class="normal"><a href="#__codelineno-4-46">46</a></span>
<span class="normal"><a href="#__codelineno-4-47">47</a></span>
<span class="normal"><a href="#__codelineno-4-48">48</a></span>
<span class="normal"><a href="#__codelineno-4-49">49</a></span>
<span class="normal"><a href="#__codelineno-4-50">50</a></span>
<span class="normal"><a href="#__codelineno-4-51">51</a></span>
<span class="normal"><a href="#__codelineno-4-52">52</a></span>
<span class="normal"><a href="#__codelineno-4-53">53</a></span>
<span class="normal"><a href="#__codelineno-4-54">54</a></span>
<span class="normal"><a href="#__codelineno-4-55">55</a></span>
<span class="normal"><a href="#__codelineno-4-56">56</a></span>
<span class="normal"><a href="#__codelineno-4-57">57</a></span>
<span class="normal"><a href="#__codelineno-4-58">58</a></span>
<span class="normal"><a href="#__codelineno-4-59">59</a></span>
<span class="normal"><a href="#__codelineno-4-60">60</a></span>
<span class="normal"><a href="#__codelineno-4-61">61</a></span>
<span class="normal"><a href="#__codelineno-4-62">62</a></span>
<span class="normal"><a href="#__codelineno-4-63">63</a></span>
<span class="normal"><a href="#__codelineno-4-64">64</a></span>
<span class="normal"><a href="#__codelineno-4-65">65</a></span>
<span class="normal"><a href="#__codelineno-4-66">66</a></span>
<span class="normal"><a href="#__codelineno-4-67">67</a></span>
<span class="normal"><a href="#__codelineno-4-68">68</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="kn">import</span> <span class="nn">yaml</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="c1"># Use flatcache for performance speedups unless we&#39;re using GPU dynamics</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="k">if</span> <span class="ow">not</span> <span class="n">gm</span><span class="o">.</span><span class="n">USE_GPU_DYNAMICS</span><span class="p">:</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a>    <span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_FLATCACHE</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="sd">    Prompts the user to select a type of scene and loads a turtlebot into it, generating a Point-Goal navigation</span>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="sd">    task within the environment.</span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="sd">    It steps the environment 100 times with random actions sampled from the action space,</span>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="sd">    using the Gym interface, resetting it 10 times.</span>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-4-23" name="__codelineno-4-23"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-4-24" name="__codelineno-4-24"></a>
<a id="__codelineno-4-25" name="__codelineno-4-25"></a>    <span class="c1"># Infer which config to load based on the scene selected</span>
<a id="__codelineno-4-26" name="__codelineno-4-26"></a>    <span class="n">scene_options</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-4-27" name="__codelineno-4-27"></a>        <span class="s2">&quot;InteractiveTraversableScene&quot;</span><span class="p">:</span> <span class="s2">&quot;Rs_int scene with fully interactive objects&quot;</span><span class="p">,</span>
<a id="__codelineno-4-28" name="__codelineno-4-28"></a>        <span class="s2">&quot;StaticTraversableScene&quot;</span><span class="p">:</span> <span class="s2">&quot;Adrian scene mesh with no interactive objects&quot;</span><span class="p">,</span>
<a id="__codelineno-4-29" name="__codelineno-4-29"></a>    <span class="p">}</span>
<a id="__codelineno-4-30" name="__codelineno-4-30"></a>    <span class="n">scene_type</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">scene_options</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;scene type&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-4-31" name="__codelineno-4-31"></a>    <span class="n">config_name</span> <span class="o">=</span> <span class="s2">&quot;turtlebot_nav&quot;</span> <span class="k">if</span> <span class="n">scene_type</span> <span class="o">==</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span> <span class="k">else</span> <span class="s2">&quot;turtlebot_static_nav&quot;</span>
<a id="__codelineno-4-32" name="__codelineno-4-32"></a>    <span class="n">config_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">og</span><span class="o">.</span><span class="n">example_config_path</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">config_name</span><span class="si">}</span><span class="s2">.yaml&quot;</span><span class="p">)</span>
<a id="__codelineno-4-33" name="__codelineno-4-33"></a>    <span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">config_filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">),</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span>
<a id="__codelineno-4-34" name="__codelineno-4-34"></a>
<a id="__codelineno-4-35" name="__codelineno-4-35"></a>    <span class="c1"># If the scene type is interactive, also check if we want to quick load or full load the scene</span>
<a id="__codelineno-4-36" name="__codelineno-4-36"></a>    <span class="k">if</span> <span class="n">scene_type</span> <span class="o">==</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span><span class="p">:</span>
<a id="__codelineno-4-37" name="__codelineno-4-37"></a>        <span class="n">load_options</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-4-38" name="__codelineno-4-38"></a>            <span class="s2">&quot;Quick&quot;</span><span class="p">:</span> <span class="s2">&quot;Only load the building assets (i.e.: the floors, walls, ceilings)&quot;</span><span class="p">,</span>
<a id="__codelineno-4-39" name="__codelineno-4-39"></a>            <span class="s2">&quot;Full&quot;</span><span class="p">:</span> <span class="s2">&quot;Load all interactive objects in the scene&quot;</span><span class="p">,</span>
<a id="__codelineno-4-40" name="__codelineno-4-40"></a>        <span class="p">}</span>
<a id="__codelineno-4-41" name="__codelineno-4-41"></a>        <span class="n">load_mode</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">load_options</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;load mode&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-4-42" name="__codelineno-4-42"></a>        <span class="k">if</span> <span class="n">load_mode</span> <span class="o">==</span> <span class="s2">&quot;Quick&quot;</span><span class="p">:</span>
<a id="__codelineno-4-43" name="__codelineno-4-43"></a>            <span class="n">config</span><span class="p">[</span><span class="s2">&quot;scene&quot;</span><span class="p">][</span><span class="s2">&quot;load_object_categories&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;floors&quot;</span><span class="p">,</span> <span class="s2">&quot;walls&quot;</span><span class="p">,</span> <span class="s2">&quot;ceilings&quot;</span><span class="p">]</span>
<a id="__codelineno-4-44" name="__codelineno-4-44"></a>
<a id="__codelineno-4-45" name="__codelineno-4-45"></a>    <span class="c1"># Load the environment</span>
<a id="__codelineno-4-46" name="__codelineno-4-46"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<a id="__codelineno-4-47" name="__codelineno-4-47"></a>
<a id="__codelineno-4-48" name="__codelineno-4-48"></a>    <span class="c1"># Allow user to move camera more easily</span>
<a id="__codelineno-4-49" name="__codelineno-4-49"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">enable_viewer_camera_teleoperation</span><span class="p">()</span>
<a id="__codelineno-4-50" name="__codelineno-4-50"></a>
<a id="__codelineno-4-51" name="__codelineno-4-51"></a>    <span class="c1"># Run a simple loop and reset periodically</span>
<a id="__codelineno-4-52" name="__codelineno-4-52"></a>    <span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">1</span>
<a id="__codelineno-4-53" name="__codelineno-4-53"></a>    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_iterations</span><span class="p">):</span>
<a id="__codelineno-4-54" name="__codelineno-4-54"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Resetting environment&quot;</span><span class="p">)</span>
<a id="__codelineno-4-55" name="__codelineno-4-55"></a>        <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<a id="__codelineno-4-56" name="__codelineno-4-56"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-4-57" name="__codelineno-4-57"></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">action_space</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
<a id="__codelineno-4-58" name="__codelineno-4-58"></a>            <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
<a id="__codelineno-4-59" name="__codelineno-4-59"></a>            <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
<a id="__codelineno-4-60" name="__codelineno-4-60"></a>                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Episode finished after </span><span class="si">{}</span><span class="s2"> timesteps&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<a id="__codelineno-4-61" name="__codelineno-4-61"></a>                <span class="k">break</span>
<a id="__codelineno-4-62" name="__codelineno-4-62"></a>
<a id="__codelineno-4-63" name="__codelineno-4-63"></a>    <span class="c1"># Always close the environment at the end</span>
<a id="__codelineno-4-64" name="__codelineno-4-64"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-4-65" name="__codelineno-4-65"></a>
<a id="__codelineno-4-66" name="__codelineno-4-66"></a>
<a id="__codelineno-4-67" name="__codelineno-4-67"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-4-68" name="__codelineno-4-68"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="config-selection-demo"><strong>Config Selection Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how pre-defined configuration files are used</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">environments</span><span class="o">.</span><span class="n">config_selector</span>
</code></pre></div>
<p>This demo allows you to choose one of our environment configuration files, loads the environment, and then cycles the environment periodically.</p>
<details class="code">
<summary>config_selector.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span>
<span class="normal"><a href="#__codelineno-6-33">33</a></span>
<span class="normal"><a href="#__codelineno-6-34">34</a></span>
<span class="normal"><a href="#__codelineno-6-35">35</a></span>
<span class="normal"><a href="#__codelineno-6-36">36</a></span>
<span class="normal"><a href="#__codelineno-6-37">37</a></span>
<span class="normal"><a href="#__codelineno-6-38">38</a></span>
<span class="normal"><a href="#__codelineno-6-39">39</a></span>
<span class="normal"><a href="#__codelineno-6-40">40</a></span>
<span class="normal"><a href="#__codelineno-6-41">41</a></span>
<span class="normal"><a href="#__codelineno-6-42">42</a></span>
<span class="normal"><a href="#__codelineno-6-43">43</a></span>
<span class="normal"><a href="#__codelineno-6-44">44</a></span>
<span class="normal"><a href="#__codelineno-6-45">45</a></span>
<span class="normal"><a href="#__codelineno-6-46">46</a></span>
<span class="normal"><a href="#__codelineno-6-47">47</a></span>
<span class="normal"><a href="#__codelineno-6-48">48</a></span>
<span class="normal"><a href="#__codelineno-6-49">49</a></span>
<span class="normal"><a href="#__codelineno-6-50">50</a></span>
<span class="normal"><a href="#__codelineno-6-51">51</a></span>
<span class="normal"><a href="#__codelineno-6-52">52</a></span>
<span class="normal"><a href="#__codelineno-6-53">53</a></span>
<span class="normal"><a href="#__codelineno-6-54">54</a></span>
<span class="normal"><a href="#__codelineno-6-55">55</a></span>
<span class="normal"><a href="#__codelineno-6-56">56</a></span>
<span class="normal"><a href="#__codelineno-6-57">57</a></span>
<span class="normal"><a href="#__codelineno-6-58">58</a></span>
<span class="normal"><a href="#__codelineno-6-59">59</a></span>
<span class="normal"><a href="#__codelineno-6-60">60</a></span>
<span class="normal"><a href="#__codelineno-6-61">61</a></span>
<span class="normal"><a href="#__codelineno-6-62">62</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="kn">import</span> <span class="nn">yaml</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.asset_utils</span> <span class="kn">import</span> <span class="n">folder_is_hidden</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="sd">    Prompts the user to select any available interactive scene and loads a turtlebot into it.</span>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="sd">    It steps the environment 100 times with random actions sampled from the action space,</span>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="sd">    using the Gym interface, resetting it 10 times.</span>
<a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a>    <span class="c1"># Grab all configs and choose one to load</span>
<a id="__codelineno-6-20" name="__codelineno-6-20"></a>    <span class="n">og_config_path</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">example_config_path</span>
<a id="__codelineno-6-21" name="__codelineno-6-21"></a>    <span class="n">available_configs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
<a id="__codelineno-6-22" name="__codelineno-6-22"></a>        <span class="p">[</span>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a>            <span class="n">f</span>
<a id="__codelineno-6-24" name="__codelineno-6-24"></a>            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">og_config_path</span><span class="p">)</span>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a>            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">folder_is_hidden</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">og_config_path</span><span class="p">,</span> <span class="n">f</span><span class="p">)))</span>
<a id="__codelineno-6-26" name="__codelineno-6-26"></a>        <span class="p">]</span>
<a id="__codelineno-6-27" name="__codelineno-6-27"></a>    <span class="p">)</span>
<a id="__codelineno-6-28" name="__codelineno-6-28"></a>    <span class="n">config_id</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">available_configs</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;config file&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-6-29" name="__codelineno-6-29"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Using config file &quot;</span> <span class="o">+</span> <span class="n">config_id</span><span class="p">)</span>
<a id="__codelineno-6-30" name="__codelineno-6-30"></a>    <span class="n">config_filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">og</span><span class="o">.</span><span class="n">example_config_path</span><span class="p">,</span> <span class="n">config_id</span><span class="p">)</span>
<a id="__codelineno-6-31" name="__codelineno-6-31"></a>    <span class="n">config</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">config_filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">),</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span>
<a id="__codelineno-6-32" name="__codelineno-6-32"></a>
<a id="__codelineno-6-33" name="__codelineno-6-33"></a>    <span class="n">load_options</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-6-34" name="__codelineno-6-34"></a>        <span class="s2">&quot;Quick&quot;</span><span class="p">:</span> <span class="s2">&quot;Only load the building assets (i.e.: the floors, walls, ceilings)&quot;</span><span class="p">,</span>
<a id="__codelineno-6-35" name="__codelineno-6-35"></a>        <span class="s2">&quot;Full&quot;</span><span class="p">:</span> <span class="s2">&quot;Load all interactive objects in the scene&quot;</span><span class="p">,</span>
<a id="__codelineno-6-36" name="__codelineno-6-36"></a>    <span class="p">}</span>
<a id="__codelineno-6-37" name="__codelineno-6-37"></a>    <span class="n">load_mode</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">load_options</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;load mode&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-6-38" name="__codelineno-6-38"></a>    <span class="k">if</span> <span class="n">load_mode</span> <span class="o">==</span> <span class="s2">&quot;Quick&quot;</span><span class="p">:</span>
<a id="__codelineno-6-39" name="__codelineno-6-39"></a>        <span class="n">config</span><span class="p">[</span><span class="s2">&quot;scene&quot;</span><span class="p">][</span><span class="s2">&quot;load_object_categories&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;floors&quot;</span><span class="p">,</span> <span class="s2">&quot;walls&quot;</span><span class="p">,</span> <span class="s2">&quot;ceilings&quot;</span><span class="p">]</span>
<a id="__codelineno-6-40" name="__codelineno-6-40"></a>
<a id="__codelineno-6-41" name="__codelineno-6-41"></a>    <span class="c1"># Load the environment</span>
<a id="__codelineno-6-42" name="__codelineno-6-42"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
<a id="__codelineno-6-43" name="__codelineno-6-43"></a>
<a id="__codelineno-6-44" name="__codelineno-6-44"></a>    <span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">1</span>
<a id="__codelineno-6-45" name="__codelineno-6-45"></a>    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_iterations</span><span class="p">):</span>
<a id="__codelineno-6-46" name="__codelineno-6-46"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Resetting environment&quot;</span><span class="p">)</span>
<a id="__codelineno-6-47" name="__codelineno-6-47"></a>        <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<a id="__codelineno-6-48" name="__codelineno-6-48"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-6-49" name="__codelineno-6-49"></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">action_space</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
<a id="__codelineno-6-50" name="__codelineno-6-50"></a>            <span class="k">for</span> <span class="n">robot_name</span> <span class="ow">in</span> <span class="n">action</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-6-51" name="__codelineno-6-51"></a>                <span class="n">action</span><span class="p">[</span><span class="n">robot_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">action</span><span class="p">[</span><span class="n">robot_name</span><span class="p">]</span> <span class="o">*</span> <span class="mf">0.05</span>
<a id="__codelineno-6-52" name="__codelineno-6-52"></a>            <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
<a id="__codelineno-6-53" name="__codelineno-6-53"></a>            <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
<a id="__codelineno-6-54" name="__codelineno-6-54"></a>                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Episode finished after </span><span class="si">{}</span><span class="s2"> timesteps&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<a id="__codelineno-6-55" name="__codelineno-6-55"></a>                <span class="k">break</span>
<a id="__codelineno-6-56" name="__codelineno-6-56"></a>
<a id="__codelineno-6-57" name="__codelineno-6-57"></a>    <span class="c1"># Always close the environment at the end</span>
<a id="__codelineno-6-58" name="__codelineno-6-58"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-6-59" name="__codelineno-6-59"></a>
<a id="__codelineno-6-60" name="__codelineno-6-60"></a>
<a id="__codelineno-6-61" name="__codelineno-6-61"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-6-62" name="__codelineno-6-62"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h2 id="learning">🧑‍🏫 <strong>Learning</strong></h2>
<p>These examples showcase how <strong><code>OmniGibson</code></strong> can be used to train embodied AI agents.</p>
<h3 id="reinforcement-learning-demo"><strong>Reinforcement Learning Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to hook up <strong><code>OmniGibson</code></strong> to an external algorithm</li>
<li>Understanding how to train and evaluate a policy</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">learning</span><span class="o">.</span><span class="n">stable_baselines3_ppo_example</span>
</code></pre></div>
<p>This demo loads a BEHAVIOR task with a <code>Fetch</code> robot, and trains / evaluates the agent using <a href="https://stable-baselines3.readthedocs.io/en/master/">Stable Baseline3</a>'s PPO algorithm.</p>
<details class="code">
<summary>stable_baselines3_ppo_example.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">  1</a></span>
<span class="normal"><a href="#__codelineno-8-2">  2</a></span>
<span class="normal"><a href="#__codelineno-8-3">  3</a></span>
<span class="normal"><a href="#__codelineno-8-4">  4</a></span>
<span class="normal"><a href="#__codelineno-8-5">  5</a></span>
<span class="normal"><a href="#__codelineno-8-6">  6</a></span>
<span class="normal"><a href="#__codelineno-8-7">  7</a></span>
<span class="normal"><a href="#__codelineno-8-8">  8</a></span>
<span class="normal"><a href="#__codelineno-8-9">  9</a></span>
<span class="normal"><a href="#__codelineno-8-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-8-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-8-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-8-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-8-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-8-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-8-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-8-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-8-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-8-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-8-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-8-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-8-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-8-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-8-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-8-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-8-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-8-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-8-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-8-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-8-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-8-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-8-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-8-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-8-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-8-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-8-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-8-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-8-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-8-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-8-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-8-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-8-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-8-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-8-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-8-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-8-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-8-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-8-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-8-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-8-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-8-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-8-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-8-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-8-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-8-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-8-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-8-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-8-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-8-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-8-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-8-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-8-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-8-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-8-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-8-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-8-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-8-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-8-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-8-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-8-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-8-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-8-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-8-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-8-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-8-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-8-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-8-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-8-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-8-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-8-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-8-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-8-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-8-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-8-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-8-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-8-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-8-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-8-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-8-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-8-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-8-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-8-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-8-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-8-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-8-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-8-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-8-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-8-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-8-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-8-100">100</a></span>
<span class="normal"><a href="#__codelineno-8-101">101</a></span>
<span class="normal"><a href="#__codelineno-8-102">102</a></span>
<span class="normal"><a href="#__codelineno-8-103">103</a></span>
<span class="normal"><a href="#__codelineno-8-104">104</a></span>
<span class="normal"><a href="#__codelineno-8-105">105</a></span>
<span class="normal"><a href="#__codelineno-8-106">106</a></span>
<span class="normal"><a href="#__codelineno-8-107">107</a></span>
<span class="normal"><a href="#__codelineno-8-108">108</a></span>
<span class="normal"><a href="#__codelineno-8-109">109</a></span>
<span class="normal"><a href="#__codelineno-8-110">110</a></span>
<span class="normal"><a href="#__codelineno-8-111">111</a></span>
<span class="normal"><a href="#__codelineno-8-112">112</a></span>
<span class="normal"><a href="#__codelineno-8-113">113</a></span>
<span class="normal"><a href="#__codelineno-8-114">114</a></span>
<span class="normal"><a href="#__codelineno-8-115">115</a></span>
<span class="normal"><a href="#__codelineno-8-116">116</a></span>
<span class="normal"><a href="#__codelineno-8-117">117</a></span>
<span class="normal"><a href="#__codelineno-8-118">118</a></span>
<span class="normal"><a href="#__codelineno-8-119">119</a></span>
<span class="normal"><a href="#__codelineno-8-120">120</a></span>
<span class="normal"><a href="#__codelineno-8-121">121</a></span>
<span class="normal"><a href="#__codelineno-8-122">122</a></span>
<span class="normal"><a href="#__codelineno-8-123">123</a></span>
<span class="normal"><a href="#__codelineno-8-124">124</a></span>
<span class="normal"><a href="#__codelineno-8-125">125</a></span>
<span class="normal"><a href="#__codelineno-8-126">126</a></span>
<span class="normal"><a href="#__codelineno-8-127">127</a></span>
<span class="normal"><a href="#__codelineno-8-128">128</a></span>
<span class="normal"><a href="#__codelineno-8-129">129</a></span>
<span class="normal"><a href="#__codelineno-8-130">130</a></span>
<span class="normal"><a href="#__codelineno-8-131">131</a></span>
<span class="normal"><a href="#__codelineno-8-132">132</a></span>
<span class="normal"><a href="#__codelineno-8-133">133</a></span>
<span class="normal"><a href="#__codelineno-8-134">134</a></span>
<span class="normal"><a href="#__codelineno-8-135">135</a></span>
<span class="normal"><a href="#__codelineno-8-136">136</a></span>
<span class="normal"><a href="#__codelineno-8-137">137</a></span>
<span class="normal"><a href="#__codelineno-8-138">138</a></span>
<span class="normal"><a href="#__codelineno-8-139">139</a></span>
<span class="normal"><a href="#__codelineno-8-140">140</a></span>
<span class="normal"><a href="#__codelineno-8-141">141</a></span>
<span class="normal"><a href="#__codelineno-8-142">142</a></span>
<span class="normal"><a href="#__codelineno-8-143">143</a></span>
<span class="normal"><a href="#__codelineno-8-144">144</a></span>
<span class="normal"><a href="#__codelineno-8-145">145</a></span>
<span class="normal"><a href="#__codelineno-8-146">146</a></span>
<span class="normal"><a href="#__codelineno-8-147">147</a></span>
<span class="normal"><a href="#__codelineno-8-148">148</a></span>
<span class="normal"><a href="#__codelineno-8-149">149</a></span>
<span class="normal"><a href="#__codelineno-8-150">150</a></span>
<span class="normal"><a href="#__codelineno-8-151">151</a></span>
<span class="normal"><a href="#__codelineno-8-152">152</a></span>
<span class="normal"><a href="#__codelineno-8-153">153</a></span>
<span class="normal"><a href="#__codelineno-8-154">154</a></span>
<span class="normal"><a href="#__codelineno-8-155">155</a></span>
<span class="normal"><a href="#__codelineno-8-156">156</a></span>
<span class="normal"><a href="#__codelineno-8-157">157</a></span>
<span class="normal"><a href="#__codelineno-8-158">158</a></span>
<span class="normal"><a href="#__codelineno-8-159">159</a></span>
<span class="normal"><a href="#__codelineno-8-160">160</a></span>
<span class="normal"><a href="#__codelineno-8-161">161</a></span>
<span class="normal"><a href="#__codelineno-8-162">162</a></span>
<span class="normal"><a href="#__codelineno-8-163">163</a></span>
<span class="normal"><a href="#__codelineno-8-164">164</a></span>
<span class="normal"><a href="#__codelineno-8-165">165</a></span>
<span class="normal"><a href="#__codelineno-8-166">166</a></span>
<span class="normal"><a href="#__codelineno-8-167">167</a></span>
<span class="normal"><a href="#__codelineno-8-168">168</a></span>
<span class="normal"><a href="#__codelineno-8-169">169</a></span>
<span class="normal"><a href="#__codelineno-8-170">170</a></span>
<span class="normal"><a href="#__codelineno-8-171">171</a></span>
<span class="normal"><a href="#__codelineno-8-172">172</a></span>
<span class="normal"><a href="#__codelineno-8-173">173</a></span>
<span class="normal"><a href="#__codelineno-8-174">174</a></span>
<span class="normal"><a href="#__codelineno-8-175">175</a></span>
<span class="normal"><a href="#__codelineno-8-176">176</a></span>
<span class="normal"><a href="#__codelineno-8-177">177</a></span>
<span class="normal"><a href="#__codelineno-8-178">178</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="sd">Example training code using stable-baselines3 PPO for one BEHAVIOR activity.</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="sd">Note that due to the sparsity of the reward, this training code will not converge and achieve task success.</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="sd">This only serves as a starting point that users can further build upon.</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="kn">import</span> <span class="nn">argparse</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">cv2</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="kn">from</span> <span class="nn">omnigibson</span> <span class="kn">import</span> <span class="n">example_config_path</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="k">try</span><span class="p">:</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a>    <span class="kn">import</span> <span class="nn">gym</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a>    <span class="kn">import</span> <span class="nn">torch</span> <span class="k">as</span> <span class="nn">th</span>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a>    <span class="kn">import</span> <span class="nn">torch.nn</span> <span class="k">as</span> <span class="nn">nn</span>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a>    <span class="kn">from</span> <span class="nn">stable_baselines3</span> <span class="kn">import</span> <span class="n">PPO</span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a>    <span class="kn">from</span> <span class="nn">stable_baselines3.common.evaluation</span> <span class="kn">import</span> <span class="n">evaluate_policy</span>
<a id="__codelineno-8-22" name="__codelineno-8-22"></a>    <span class="kn">from</span> <span class="nn">stable_baselines3.common.preprocessing</span> <span class="kn">import</span> <span class="n">maybe_transpose</span>
<a id="__codelineno-8-23" name="__codelineno-8-23"></a>    <span class="kn">from</span> <span class="nn">stable_baselines3.common.torch_layers</span> <span class="kn">import</span> <span class="n">BaseFeaturesExtractor</span>
<a id="__codelineno-8-24" name="__codelineno-8-24"></a>    <span class="kn">from</span> <span class="nn">stable_baselines3.common.utils</span> <span class="kn">import</span> <span class="n">set_random_seed</span>
<a id="__codelineno-8-25" name="__codelineno-8-25"></a>    <span class="kn">from</span> <span class="nn">stable_baselines3.common.callbacks</span> <span class="kn">import</span> <span class="n">CallbackList</span><span class="p">,</span> <span class="n">CheckpointCallback</span><span class="p">,</span> <span class="n">EvalCallback</span>
<a id="__codelineno-8-26" name="__codelineno-8-26"></a>
<a id="__codelineno-8-27" name="__codelineno-8-27"></a><span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
<a id="__codelineno-8-28" name="__codelineno-8-28"></a>    <span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;stable-baselines3 is not installed. You would need to do: pip install stable-baselines3&quot;</span><span class="p">)</span>
<a id="__codelineno-8-29" name="__codelineno-8-29"></a>    <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-8-30" name="__codelineno-8-30"></a>
<a id="__codelineno-8-31" name="__codelineno-8-31"></a>
<a id="__codelineno-8-32" name="__codelineno-8-32"></a><span class="k">class</span> <span class="nc">CustomCombinedExtractor</span><span class="p">(</span><span class="n">BaseFeaturesExtractor</span><span class="p">):</span>
<a id="__codelineno-8-33" name="__codelineno-8-33"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observation_space</span><span class="p">:</span> <span class="n">gym</span><span class="o">.</span><span class="n">spaces</span><span class="o">.</span><span class="n">Dict</span><span class="p">):</span>
<a id="__codelineno-8-34" name="__codelineno-8-34"></a>        <span class="c1"># We do not know features-dim here before going over all the items,</span>
<a id="__codelineno-8-35" name="__codelineno-8-35"></a>        <span class="c1"># so put something dummy for now. PyTorch requires calling</span>
<a id="__codelineno-8-36" name="__codelineno-8-36"></a>        <span class="nb">super</span><span class="p">(</span><span class="n">CustomCombinedExtractor</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">observation_space</span><span class="p">,</span> <span class="n">features_dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-8-37" name="__codelineno-8-37"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug_length</span> <span class="o">=</span> <span class="mi">10</span>
<a id="__codelineno-8-38" name="__codelineno-8-38"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug_mode</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-8-39" name="__codelineno-8-39"></a>        <span class="n">extractors</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-8-40" name="__codelineno-8-40"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">step_index</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-8-41" name="__codelineno-8-41"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">img_save_dir</span> <span class="o">=</span> <span class="s1">&#39;img_save_dir&#39;</span>
<a id="__codelineno-8-42" name="__codelineno-8-42"></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img_save_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-8-43" name="__codelineno-8-43"></a>        <span class="n">total_concat_size</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-8-44" name="__codelineno-8-44"></a>        <span class="n">feature_size</span> <span class="o">=</span> <span class="mi">128</span>
<a id="__codelineno-8-45" name="__codelineno-8-45"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">subspace</span> <span class="ow">in</span> <span class="n">observation_space</span><span class="o">.</span><span class="n">spaces</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-8-46" name="__codelineno-8-46"></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="s2">&quot;ins_seg&quot;</span><span class="p">]:</span>
<a id="__codelineno-8-47" name="__codelineno-8-47"></a>                <span class="nb">print</span><span class="p">(</span><span class="n">subspace</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<a id="__codelineno-8-48" name="__codelineno-8-48"></a>                <span class="n">n_input_channels</span> <span class="o">=</span> <span class="n">subspace</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="c1"># channel last</span>
<a id="__codelineno-8-49" name="__codelineno-8-49"></a>                <span class="n">cnn</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span>
<a id="__codelineno-8-50" name="__codelineno-8-50"></a>                    <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="n">n_input_channels</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">stride</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-8-51" name="__codelineno-8-51"></a>                    <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>
<a id="__codelineno-8-52" name="__codelineno-8-52"></a>                    <span class="n">nn</span><span class="o">.</span><span class="n">MaxPool2d</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
<a id="__codelineno-8-53" name="__codelineno-8-53"></a>                    <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">stride</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-8-54" name="__codelineno-8-54"></a>                    <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>
<a id="__codelineno-8-55" name="__codelineno-8-55"></a>                    <span class="n">nn</span><span class="o">.</span><span class="n">MaxPool2d</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
<a id="__codelineno-8-56" name="__codelineno-8-56"></a>                    <span class="n">nn</span><span class="o">.</span><span class="n">Conv2d</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">stride</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
<a id="__codelineno-8-57" name="__codelineno-8-57"></a>                    <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">(),</span>
<a id="__codelineno-8-58" name="__codelineno-8-58"></a>                    <span class="n">nn</span><span class="o">.</span><span class="n">Flatten</span><span class="p">(),</span>
<a id="__codelineno-8-59" name="__codelineno-8-59"></a>                <span class="p">)</span>
<a id="__codelineno-8-60" name="__codelineno-8-60"></a>                <span class="n">test_tensor</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">subspace</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">subspace</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">subspace</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<a id="__codelineno-8-61" name="__codelineno-8-61"></a>                <span class="k">with</span> <span class="n">th</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
<a id="__codelineno-8-62" name="__codelineno-8-62"></a>                    <span class="n">n_flatten</span> <span class="o">=</span> <span class="n">cnn</span><span class="p">(</span><span class="n">test_tensor</span><span class="p">[</span><span class="kc">None</span><span class="p">])</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-8-63" name="__codelineno-8-63"></a>                <span class="n">fc</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">n_flatten</span><span class="p">,</span> <span class="n">feature_size</span><span class="p">),</span> <span class="n">nn</span><span class="o">.</span><span class="n">ReLU</span><span class="p">())</span>
<a id="__codelineno-8-64" name="__codelineno-8-64"></a>                <span class="n">extractors</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">cnn</span><span class="p">,</span> <span class="n">fc</span><span class="p">)</span>
<a id="__codelineno-8-65" name="__codelineno-8-65"></a>            <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;accum_reward&quot;</span><span class="p">,</span> <span class="s1">&#39;obj_joint&#39;</span><span class="p">]:</span>
<a id="__codelineno-8-66" name="__codelineno-8-66"></a>                <span class="n">extractors</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">Sequential</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Linear</span><span class="p">(</span><span class="n">subspace</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">feature_size</span><span class="p">))</span>
<a id="__codelineno-8-67" name="__codelineno-8-67"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-8-68" name="__codelineno-8-68"></a>                <span class="k">continue</span>
<a id="__codelineno-8-69" name="__codelineno-8-69"></a>            <span class="n">total_concat_size</span> <span class="o">+=</span> <span class="n">feature_size</span>
<a id="__codelineno-8-70" name="__codelineno-8-70"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extractors</span> <span class="o">=</span> <span class="n">nn</span><span class="o">.</span><span class="n">ModuleDict</span><span class="p">(</span><span class="n">extractors</span><span class="p">)</span>
<a id="__codelineno-8-71" name="__codelineno-8-71"></a>
<a id="__codelineno-8-72" name="__codelineno-8-72"></a>        <span class="c1"># Update the features dim manually</span>
<a id="__codelineno-8-73" name="__codelineno-8-73"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_features_dim</span> <span class="o">=</span> <span class="n">total_concat_size</span>
<a id="__codelineno-8-74" name="__codelineno-8-74"></a>
<a id="__codelineno-8-75" name="__codelineno-8-75"></a>    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observations</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">th</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<a id="__codelineno-8-76" name="__codelineno-8-76"></a>        <span class="n">encoded_tensor_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-8-77" name="__codelineno-8-77"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">step_index</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-8-78" name="__codelineno-8-78"></a>
<a id="__codelineno-8-79" name="__codelineno-8-79"></a>        <span class="c1"># self.extractors contain nn.Modules that do all the processing.</span>
<a id="__codelineno-8-80" name="__codelineno-8-80"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">extractor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extractors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-8-81" name="__codelineno-8-81"></a>            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">,]:</span>
<a id="__codelineno-8-82" name="__codelineno-8-82"></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug_mode</span><span class="p">:</span>
<a id="__codelineno-8-83" name="__codelineno-8-83"></a>                    <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">img_save_dir</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{0:06d}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">step_index</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug_length</span><span class="p">)),</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">((</span><span class="n">observations</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cpu</span><span class="p">()</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;uint8&#39;</span><span class="p">),</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_RGB2BGR</span><span class="p">))</span>
<a id="__codelineno-8-84" name="__codelineno-8-84"></a>                <span class="n">observations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">observations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">permute</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<a id="__codelineno-8-85" name="__codelineno-8-85"></a>            <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ins_seg&quot;</span><span class="p">]:</span>
<a id="__codelineno-8-86" name="__codelineno-8-86"></a>                <span class="n">observations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">observations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">permute</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">/</span> <span class="mf">500.</span>
<a id="__codelineno-8-87" name="__codelineno-8-87"></a>            <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;accum_reward&#39;</span><span class="p">,</span> <span class="s1">&#39;obj_joint&#39;</span><span class="p">]:</span>
<a id="__codelineno-8-88" name="__codelineno-8-88"></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">observations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
<a id="__codelineno-8-89" name="__codelineno-8-89"></a>                    <span class="n">observations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">observations</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># [:, :, 0]</span>
<a id="__codelineno-8-90" name="__codelineno-8-90"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-8-91" name="__codelineno-8-91"></a>                <span class="k">continue</span>
<a id="__codelineno-8-92" name="__codelineno-8-92"></a>
<a id="__codelineno-8-93" name="__codelineno-8-93"></a>            <span class="n">encoded_tensor_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">extractor</span><span class="p">(</span><span class="n">observations</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
<a id="__codelineno-8-94" name="__codelineno-8-94"></a>
<a id="__codelineno-8-95" name="__codelineno-8-95"></a>        <span class="n">feature</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">cat</span><span class="p">(</span><span class="n">encoded_tensor_list</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-8-96" name="__codelineno-8-96"></a>        <span class="k">return</span> <span class="n">feature</span>
<a id="__codelineno-8-97" name="__codelineno-8-97"></a>
<a id="__codelineno-8-98" name="__codelineno-8-98"></a>
<a id="__codelineno-8-99" name="__codelineno-8-99"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-8-100" name="__codelineno-8-100"></a>    <span class="c1"># Parse args</span>
<a id="__codelineno-8-101" name="__codelineno-8-101"></a>    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Train or evaluate a PPO agent in BEHAVIOR&quot;</span><span class="p">)</span>
<a id="__codelineno-8-102" name="__codelineno-8-102"></a>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<a id="__codelineno-8-103" name="__codelineno-8-103"></a>        <span class="s2">&quot;--config&quot;</span><span class="p">,</span>
<a id="__codelineno-8-104" name="__codelineno-8-104"></a>        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-8-105" name="__codelineno-8-105"></a>        <span class="n">default</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">example_config_path</span><span class="si">}</span><span class="s2">/fetch_behavior.yaml&quot;</span><span class="p">,</span>
<a id="__codelineno-8-106" name="__codelineno-8-106"></a>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Absolute path to desired OmniGibson environment config to load&quot;</span><span class="p">,</span>
<a id="__codelineno-8-107" name="__codelineno-8-107"></a>    <span class="p">)</span>
<a id="__codelineno-8-108" name="__codelineno-8-108"></a>
<a id="__codelineno-8-109" name="__codelineno-8-109"></a>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<a id="__codelineno-8-110" name="__codelineno-8-110"></a>        <span class="s2">&quot;--checkpoint&quot;</span><span class="p">,</span>
<a id="__codelineno-8-111" name="__codelineno-8-111"></a>        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-8-112" name="__codelineno-8-112"></a>        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-8-113" name="__codelineno-8-113"></a>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Absolute path to desired PPO checkpoint to load for evaluation&quot;</span><span class="p">,</span>
<a id="__codelineno-8-114" name="__codelineno-8-114"></a>    <span class="p">)</span>
<a id="__codelineno-8-115" name="__codelineno-8-115"></a>
<a id="__codelineno-8-116" name="__codelineno-8-116"></a>    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<a id="__codelineno-8-117" name="__codelineno-8-117"></a>        <span class="s2">&quot;--eval&quot;</span><span class="p">,</span>
<a id="__codelineno-8-118" name="__codelineno-8-118"></a>        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
<a id="__codelineno-8-119" name="__codelineno-8-119"></a>        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;If set, will evaluate the PPO agent found from --checkpoint&quot;</span><span class="p">,</span>
<a id="__codelineno-8-120" name="__codelineno-8-120"></a>    <span class="p">)</span>
<a id="__codelineno-8-121" name="__codelineno-8-121"></a>
<a id="__codelineno-8-122" name="__codelineno-8-122"></a>    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<a id="__codelineno-8-123" name="__codelineno-8-123"></a>    <span class="n">tensorboard_log_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;log_dir&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">-%H%M%S&quot;</span><span class="p">))</span>
<a id="__codelineno-8-124" name="__codelineno-8-124"></a>    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">tensorboard_log_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-8-125" name="__codelineno-8-125"></a>    <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-8-126" name="__codelineno-8-126"></a>    <span class="n">seed</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-8-127" name="__codelineno-8-127"></a>
<a id="__codelineno-8-128" name="__codelineno-8-128"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-8-129" name="__codelineno-8-129"></a>
<a id="__codelineno-8-130" name="__codelineno-8-130"></a>    <span class="c1"># If we&#39;re evaluating, hide the ceilings and enable camera teleoperation so the user can easily</span>
<a id="__codelineno-8-131" name="__codelineno-8-131"></a>    <span class="c1"># visualize the rollouts dynamically</span>
<a id="__codelineno-8-132" name="__codelineno-8-132"></a>    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">eval</span><span class="p">:</span>
<a id="__codelineno-8-133" name="__codelineno-8-133"></a>        <span class="n">ceiling</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;ceilings&quot;</span><span class="p">)</span>
<a id="__codelineno-8-134" name="__codelineno-8-134"></a>        <span class="n">ceiling</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-8-135" name="__codelineno-8-135"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">enable_viewer_camera_teleoperation</span><span class="p">()</span>
<a id="__codelineno-8-136" name="__codelineno-8-136"></a>
<a id="__codelineno-8-137" name="__codelineno-8-137"></a>    <span class="c1"># Set the set</span>
<a id="__codelineno-8-138" name="__codelineno-8-138"></a>    <span class="n">set_random_seed</span><span class="p">(</span><span class="n">seed</span><span class="p">)</span>
<a id="__codelineno-8-139" name="__codelineno-8-139"></a>    <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<a id="__codelineno-8-140" name="__codelineno-8-140"></a>
<a id="__codelineno-8-141" name="__codelineno-8-141"></a>    <span class="n">policy_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
<a id="__codelineno-8-142" name="__codelineno-8-142"></a>        <span class="n">features_extractor_class</span><span class="o">=</span><span class="n">CustomCombinedExtractor</span><span class="p">,</span>
<a id="__codelineno-8-143" name="__codelineno-8-143"></a>    <span class="p">)</span>
<a id="__codelineno-8-144" name="__codelineno-8-144"></a>
<a id="__codelineno-8-145" name="__codelineno-8-145"></a>    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">tensorboard_log_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-8-146" name="__codelineno-8-146"></a>
<a id="__codelineno-8-147" name="__codelineno-8-147"></a>    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">eval</span><span class="p">:</span>
<a id="__codelineno-8-148" name="__codelineno-8-148"></a>        <span class="k">assert</span> <span class="n">args</span><span class="o">.</span><span class="n">checkpoint</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;If evaluating a PPO policy, @checkpoint argument must be specified!&quot;</span>
<a id="__codelineno-8-149" name="__codelineno-8-149"></a>        <span class="n">model</span> <span class="o">=</span> <span class="n">PPO</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">checkpoint</span><span class="p">)</span>
<a id="__codelineno-8-150" name="__codelineno-8-150"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting evaluation...&quot;</span><span class="p">)</span>
<a id="__codelineno-8-151" name="__codelineno-8-151"></a>        <span class="n">mean_reward</span><span class="p">,</span> <span class="n">std_reward</span> <span class="o">=</span> <span class="n">evaluate_policy</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">n_eval_episodes</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<a id="__codelineno-8-152" name="__codelineno-8-152"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished evaluation!&quot;</span><span class="p">)</span>
<a id="__codelineno-8-153" name="__codelineno-8-153"></a>        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Mean reward: </span><span class="si">{</span><span class="n">mean_reward</span><span class="si">}</span><span class="s2"> +/- </span><span class="si">{</span><span class="n">std_reward</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-8-154" name="__codelineno-8-154"></a>
<a id="__codelineno-8-155" name="__codelineno-8-155"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-8-156" name="__codelineno-8-156"></a>        <span class="n">model</span> <span class="o">=</span> <span class="n">PPO</span><span class="p">(</span>
<a id="__codelineno-8-157" name="__codelineno-8-157"></a>            <span class="s2">&quot;MultiInputPolicy&quot;</span><span class="p">,</span>
<a id="__codelineno-8-158" name="__codelineno-8-158"></a>            <span class="n">env</span><span class="p">,</span>
<a id="__codelineno-8-159" name="__codelineno-8-159"></a>            <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-8-160" name="__codelineno-8-160"></a>            <span class="n">tensorboard_log</span><span class="o">=</span><span class="n">tensorboard_log_dir</span><span class="p">,</span>
<a id="__codelineno-8-161" name="__codelineno-8-161"></a>            <span class="n">policy_kwargs</span><span class="o">=</span><span class="n">policy_kwargs</span><span class="p">,</span>
<a id="__codelineno-8-162" name="__codelineno-8-162"></a>            <span class="n">n_steps</span><span class="o">=</span><span class="mi">20</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span>
<a id="__codelineno-8-163" name="__codelineno-8-163"></a>            <span class="n">batch_size</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
<a id="__codelineno-8-164" name="__codelineno-8-164"></a>            <span class="n">device</span><span class="o">=</span><span class="s1">&#39;cuda&#39;</span><span class="p">,</span>
<a id="__codelineno-8-165" name="__codelineno-8-165"></a>        <span class="p">)</span>
<a id="__codelineno-8-166" name="__codelineno-8-166"></a>        <span class="n">checkpoint_callback</span> <span class="o">=</span> <span class="n">CheckpointCallback</span><span class="p">(</span><span class="n">save_freq</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">save_path</span><span class="o">=</span><span class="n">tensorboard_log_dir</span><span class="p">,</span> <span class="n">name_prefix</span><span class="o">=</span><span class="n">prefix</span><span class="p">)</span>
<a id="__codelineno-8-167" name="__codelineno-8-167"></a>        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">policy</span><span class="p">)</span>
<a id="__codelineno-8-168" name="__codelineno-8-168"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<a id="__codelineno-8-169" name="__codelineno-8-169"></a>
<a id="__codelineno-8-170" name="__codelineno-8-170"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Starting training...&quot;</span><span class="p">)</span>
<a id="__codelineno-8-171" name="__codelineno-8-171"></a>        <span class="n">model</span><span class="o">.</span><span class="n">learn</span><span class="p">(</span><span class="n">total_timesteps</span><span class="o">=</span><span class="mi">10000000</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">checkpoint_callback</span><span class="p">,</span>
<a id="__codelineno-8-172" name="__codelineno-8-172"></a>                    <span class="n">eval_env</span><span class="o">=</span><span class="n">env</span><span class="p">,</span> <span class="n">eval_freq</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
<a id="__codelineno-8-173" name="__codelineno-8-173"></a>                    <span class="n">n_eval_episodes</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<a id="__codelineno-8-174" name="__codelineno-8-174"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished training!&quot;</span><span class="p">)</span>
<a id="__codelineno-8-175" name="__codelineno-8-175"></a>
<a id="__codelineno-8-176" name="__codelineno-8-176"></a>
<a id="__codelineno-8-177" name="__codelineno-8-177"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-8-178" name="__codelineno-8-178"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h2 id="scenes">🏔️ <strong>Scenes</strong></h2>
<p>These examples showcase how to leverage <strong><code>OmniGibson</code></strong>'s large-scale, diverse scenes shipped with the BEHAVIOR dataset.</p>
<h3 id="scene-selector-demo"><strong>Scene Selector Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to load a scene into <strong><code>OmniGibson</code></strong></li>
<li>Accessing all BEHAVIOR dataset scenes</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">scenes</span><span class="o">.</span><span class="n">scene_selector</span>
</code></pre></div>
<p>This demo lets you choose a scene from the BEHAVIOR dataset, loads it along with a <code>Turtlebot</code> robot, and cycles the resulting environment periodically.</p>
<details class="code">
<summary>scene_selector.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-10-10">10</a></span>
<span class="normal"><a href="#__codelineno-10-11">11</a></span>
<span class="normal"><a href="#__codelineno-10-12">12</a></span>
<span class="normal"><a href="#__codelineno-10-13">13</a></span>
<span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span>
<span class="normal"><a href="#__codelineno-10-24">24</a></span>
<span class="normal"><a href="#__codelineno-10-25">25</a></span>
<span class="normal"><a href="#__codelineno-10-26">26</a></span>
<span class="normal"><a href="#__codelineno-10-27">27</a></span>
<span class="normal"><a href="#__codelineno-10-28">28</a></span>
<span class="normal"><a href="#__codelineno-10-29">29</a></span>
<span class="normal"><a href="#__codelineno-10-30">30</a></span>
<span class="normal"><a href="#__codelineno-10-31">31</a></span>
<span class="normal"><a href="#__codelineno-10-32">32</a></span>
<span class="normal"><a href="#__codelineno-10-33">33</a></span>
<span class="normal"><a href="#__codelineno-10-34">34</a></span>
<span class="normal"><a href="#__codelineno-10-35">35</a></span>
<span class="normal"><a href="#__codelineno-10-36">36</a></span>
<span class="normal"><a href="#__codelineno-10-37">37</a></span>
<span class="normal"><a href="#__codelineno-10-38">38</a></span>
<span class="normal"><a href="#__codelineno-10-39">39</a></span>
<span class="normal"><a href="#__codelineno-10-40">40</a></span>
<span class="normal"><a href="#__codelineno-10-41">41</a></span>
<span class="normal"><a href="#__codelineno-10-42">42</a></span>
<span class="normal"><a href="#__codelineno-10-43">43</a></span>
<span class="normal"><a href="#__codelineno-10-44">44</a></span>
<span class="normal"><a href="#__codelineno-10-45">45</a></span>
<span class="normal"><a href="#__codelineno-10-46">46</a></span>
<span class="normal"><a href="#__codelineno-10-47">47</a></span>
<span class="normal"><a href="#__codelineno-10-48">48</a></span>
<span class="normal"><a href="#__codelineno-10-49">49</a></span>
<span class="normal"><a href="#__codelineno-10-50">50</a></span>
<span class="normal"><a href="#__codelineno-10-51">51</a></span>
<span class="normal"><a href="#__codelineno-10-52">52</a></span>
<span class="normal"><a href="#__codelineno-10-53">53</a></span>
<span class="normal"><a href="#__codelineno-10-54">54</a></span>
<span class="normal"><a href="#__codelineno-10-55">55</a></span>
<span class="normal"><a href="#__codelineno-10-56">56</a></span>
<span class="normal"><a href="#__codelineno-10-57">57</a></span>
<span class="normal"><a href="#__codelineno-10-58">58</a></span>
<span class="normal"><a href="#__codelineno-10-59">59</a></span>
<span class="normal"><a href="#__codelineno-10-60">60</a></span>
<span class="normal"><a href="#__codelineno-10-61">61</a></span>
<span class="normal"><a href="#__codelineno-10-62">62</a></span>
<span class="normal"><a href="#__codelineno-10-63">63</a></span>
<span class="normal"><a href="#__codelineno-10-64">64</a></span>
<span class="normal"><a href="#__codelineno-10-65">65</a></span>
<span class="normal"><a href="#__codelineno-10-66">66</a></span>
<span class="normal"><a href="#__codelineno-10-67">67</a></span>
<span class="normal"><a href="#__codelineno-10-68">68</a></span>
<span class="normal"><a href="#__codelineno-10-69">69</a></span>
<span class="normal"><a href="#__codelineno-10-70">70</a></span>
<span class="normal"><a href="#__codelineno-10-71">71</a></span>
<span class="normal"><a href="#__codelineno-10-72">72</a></span>
<span class="normal"><a href="#__codelineno-10-73">73</a></span>
<span class="normal"><a href="#__codelineno-10-74">74</a></span>
<span class="normal"><a href="#__codelineno-10-75">75</a></span>
<span class="normal"><a href="#__codelineno-10-76">76</a></span>
<span class="normal"><a href="#__codelineno-10-77">77</a></span>
<span class="normal"><a href="#__codelineno-10-78">78</a></span>
<span class="normal"><a href="#__codelineno-10-79">79</a></span>
<span class="normal"><a href="#__codelineno-10-80">80</a></span>
<span class="normal"><a href="#__codelineno-10-81">81</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.asset_utils</span> <span class="kn">import</span> <span class="n">get_available_g_scenes</span><span class="p">,</span> <span class="n">get_available_og_scenes</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="c1"># Don&#39;t use GPU dynamics and Use flatcache for performance boost</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="n">gm</span><span class="o">.</span><span class="n">USE_GPU_DYNAMICS</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_FLATCACHE</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="sd">    Prompts the user to select any available non-interactive scene and loads a turtlebot into it.</span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="sd">    It steps the environment 100 times with random actions sampled from the action space,</span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a><span class="sd">    using the Gym interface, resetting it 10 times.</span>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a>
<a id="__codelineno-10-20" name="__codelineno-10-20"></a>    <span class="c1"># Choose the scene type to load</span>
<a id="__codelineno-10-21" name="__codelineno-10-21"></a>    <span class="n">scene_options</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-10-22" name="__codelineno-10-22"></a>        <span class="s2">&quot;InteractiveTraversableScene&quot;</span><span class="p">:</span> <span class="s2">&quot;Procedurally generated scene with fully interactive objects&quot;</span><span class="p">,</span>
<a id="__codelineno-10-23" name="__codelineno-10-23"></a>        <span class="s2">&quot;StaticTraversableScene&quot;</span><span class="p">:</span> <span class="s2">&quot;Monolithic scene mesh with no interactive objects&quot;</span><span class="p">,</span>
<a id="__codelineno-10-24" name="__codelineno-10-24"></a>    <span class="p">}</span>
<a id="__codelineno-10-25" name="__codelineno-10-25"></a>    <span class="n">scene_type</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">scene_options</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;scene type&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-10-26" name="__codelineno-10-26"></a>
<a id="__codelineno-10-27" name="__codelineno-10-27"></a>    <span class="c1"># Choose the scene model to load</span>
<a id="__codelineno-10-28" name="__codelineno-10-28"></a>    <span class="n">scenes</span> <span class="o">=</span> <span class="n">get_available_og_scenes</span><span class="p">()</span> <span class="k">if</span> <span class="n">scene_type</span> <span class="o">==</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span> <span class="k">else</span> <span class="n">get_available_g_scenes</span><span class="p">()</span>
<a id="__codelineno-10-29" name="__codelineno-10-29"></a>    <span class="n">scene_model</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">scenes</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;scene model&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-10-30" name="__codelineno-10-30"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;scene model: </span><span class="si">{</span><span class="n">scene_model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-10-31" name="__codelineno-10-31"></a>
<a id="__codelineno-10-32" name="__codelineno-10-32"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-10-33" name="__codelineno-10-33"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-10-34" name="__codelineno-10-34"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">scene_type</span><span class="p">,</span>
<a id="__codelineno-10-35" name="__codelineno-10-35"></a>            <span class="s2">&quot;scene_model&quot;</span><span class="p">:</span> <span class="n">scene_model</span><span class="p">,</span>
<a id="__codelineno-10-36" name="__codelineno-10-36"></a>        <span class="p">},</span>
<a id="__codelineno-10-37" name="__codelineno-10-37"></a>        <span class="s2">&quot;robots&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-10-38" name="__codelineno-10-38"></a>            <span class="p">{</span>
<a id="__codelineno-10-39" name="__codelineno-10-39"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Turtlebot&quot;</span><span class="p">,</span>
<a id="__codelineno-10-40" name="__codelineno-10-40"></a>                <span class="s2">&quot;obs_modalities&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;scan&quot;</span><span class="p">,</span> <span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="s2">&quot;depth&quot;</span><span class="p">],</span>
<a id="__codelineno-10-41" name="__codelineno-10-41"></a>                <span class="s2">&quot;action_type&quot;</span><span class="p">:</span> <span class="s2">&quot;continuous&quot;</span><span class="p">,</span>
<a id="__codelineno-10-42" name="__codelineno-10-42"></a>                <span class="s2">&quot;action_normalize&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-10-43" name="__codelineno-10-43"></a>            <span class="p">}</span>
<a id="__codelineno-10-44" name="__codelineno-10-44"></a>        <span class="p">],</span>
<a id="__codelineno-10-45" name="__codelineno-10-45"></a>    <span class="p">}</span>
<a id="__codelineno-10-46" name="__codelineno-10-46"></a>
<a id="__codelineno-10-47" name="__codelineno-10-47"></a>    <span class="c1"># If the scene type is interactive, also check if we want to quick load or full load the scene</span>
<a id="__codelineno-10-48" name="__codelineno-10-48"></a>    <span class="k">if</span> <span class="n">scene_type</span> <span class="o">==</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span><span class="p">:</span>
<a id="__codelineno-10-49" name="__codelineno-10-49"></a>        <span class="n">load_options</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-10-50" name="__codelineno-10-50"></a>            <span class="s2">&quot;Quick&quot;</span><span class="p">:</span> <span class="s2">&quot;Only load the building assets (i.e.: the floors, walls, ceilings)&quot;</span><span class="p">,</span>
<a id="__codelineno-10-51" name="__codelineno-10-51"></a>            <span class="s2">&quot;Full&quot;</span><span class="p">:</span> <span class="s2">&quot;Load all interactive objects in the scene&quot;</span><span class="p">,</span>
<a id="__codelineno-10-52" name="__codelineno-10-52"></a>        <span class="p">}</span>
<a id="__codelineno-10-53" name="__codelineno-10-53"></a>        <span class="n">load_mode</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">load_options</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;load mode&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-10-54" name="__codelineno-10-54"></a>        <span class="k">if</span> <span class="n">load_mode</span> <span class="o">==</span> <span class="s2">&quot;Quick&quot;</span><span class="p">:</span>
<a id="__codelineno-10-55" name="__codelineno-10-55"></a>            <span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;scene&quot;</span><span class="p">][</span><span class="s2">&quot;load_object_categories&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;floors&quot;</span><span class="p">,</span> <span class="s2">&quot;walls&quot;</span><span class="p">,</span> <span class="s2">&quot;ceilings&quot;</span><span class="p">]</span>
<a id="__codelineno-10-56" name="__codelineno-10-56"></a>
<a id="__codelineno-10-57" name="__codelineno-10-57"></a>    <span class="c1"># Load the environment</span>
<a id="__codelineno-10-58" name="__codelineno-10-58"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<a id="__codelineno-10-59" name="__codelineno-10-59"></a>
<a id="__codelineno-10-60" name="__codelineno-10-60"></a>    <span class="c1"># Allow user to move camera more easily</span>
<a id="__codelineno-10-61" name="__codelineno-10-61"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">headless</span><span class="p">:</span>
<a id="__codelineno-10-62" name="__codelineno-10-62"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">enable_viewer_camera_teleoperation</span><span class="p">()</span>
<a id="__codelineno-10-63" name="__codelineno-10-63"></a>
<a id="__codelineno-10-64" name="__codelineno-10-64"></a>    <span class="c1"># Run a simple loop and reset periodically</span>
<a id="__codelineno-10-65" name="__codelineno-10-65"></a>    <span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">1</span>
<a id="__codelineno-10-66" name="__codelineno-10-66"></a>    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_iterations</span><span class="p">):</span>
<a id="__codelineno-10-67" name="__codelineno-10-67"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Resetting environment&quot;</span><span class="p">)</span>
<a id="__codelineno-10-68" name="__codelineno-10-68"></a>        <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<a id="__codelineno-10-69" name="__codelineno-10-69"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-10-70" name="__codelineno-10-70"></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">action_space</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
<a id="__codelineno-10-71" name="__codelineno-10-71"></a>            <span class="n">state</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
<a id="__codelineno-10-72" name="__codelineno-10-72"></a>            <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
<a id="__codelineno-10-73" name="__codelineno-10-73"></a>                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Episode finished after </span><span class="si">{}</span><span class="s2"> timesteps&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<a id="__codelineno-10-74" name="__codelineno-10-74"></a>                <span class="k">break</span>
<a id="__codelineno-10-75" name="__codelineno-10-75"></a>
<a id="__codelineno-10-76" name="__codelineno-10-76"></a>    <span class="c1"># Always close the environment at the end</span>
<a id="__codelineno-10-77" name="__codelineno-10-77"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-10-78" name="__codelineno-10-78"></a>
<a id="__codelineno-10-79" name="__codelineno-10-79"></a>
<a id="__codelineno-10-80" name="__codelineno-10-80"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-10-81" name="__codelineno-10-81"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="traversability-map-demo"><strong>Traversability Map Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to leverage traversability map information from BEHAVIOR dataset scenes</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">scenes</span><span class="o">.</span><span class="n">traversability_map_example</span>
</code></pre></div>
<p>This demo lets you choose a scene from the BEHAVIOR dataset, and generates its corresponding traversability map.</p>
<details class="code">
<summary>traversability_map_example.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-12-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-12-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-12-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-12-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-12-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-12-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-12-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-12-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-12-10">10</a></span>
<span class="normal"><a href="#__codelineno-12-11">11</a></span>
<span class="normal"><a href="#__codelineno-12-12">12</a></span>
<span class="normal"><a href="#__codelineno-12-13">13</a></span>
<span class="normal"><a href="#__codelineno-12-14">14</a></span>
<span class="normal"><a href="#__codelineno-12-15">15</a></span>
<span class="normal"><a href="#__codelineno-12-16">16</a></span>
<span class="normal"><a href="#__codelineno-12-17">17</a></span>
<span class="normal"><a href="#__codelineno-12-18">18</a></span>
<span class="normal"><a href="#__codelineno-12-19">19</a></span>
<span class="normal"><a href="#__codelineno-12-20">20</a></span>
<span class="normal"><a href="#__codelineno-12-21">21</a></span>
<span class="normal"><a href="#__codelineno-12-22">22</a></span>
<span class="normal"><a href="#__codelineno-12-23">23</a></span>
<span class="normal"><a href="#__codelineno-12-24">24</a></span>
<span class="normal"><a href="#__codelineno-12-25">25</a></span>
<span class="normal"><a href="#__codelineno-12-26">26</a></span>
<span class="normal"><a href="#__codelineno-12-27">27</a></span>
<span class="normal"><a href="#__codelineno-12-28">28</a></span>
<span class="normal"><a href="#__codelineno-12-29">29</a></span>
<span class="normal"><a href="#__codelineno-12-30">30</a></span>
<span class="normal"><a href="#__codelineno-12-31">31</a></span>
<span class="normal"><a href="#__codelineno-12-32">32</a></span>
<span class="normal"><a href="#__codelineno-12-33">33</a></span>
<span class="normal"><a href="#__codelineno-12-34">34</a></span>
<span class="normal"><a href="#__codelineno-12-35">35</a></span>
<span class="normal"><a href="#__codelineno-12-36">36</a></span>
<span class="normal"><a href="#__codelineno-12-37">37</a></span>
<span class="normal"><a href="#__codelineno-12-38">38</a></span>
<span class="normal"><a href="#__codelineno-12-39">39</a></span>
<span class="normal"><a href="#__codelineno-12-40">40</a></span>
<span class="normal"><a href="#__codelineno-12-41">41</a></span>
<span class="normal"><a href="#__codelineno-12-42">42</a></span>
<span class="normal"><a href="#__codelineno-12-43">43</a></span>
<span class="normal"><a href="#__codelineno-12-44">44</a></span>
<span class="normal"><a href="#__codelineno-12-45">45</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="kn">import</span> <span class="nn">cv2</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.asset_utils</span> <span class="kn">import</span> <span class="n">get_og_scene_path</span><span class="p">,</span> <span class="n">get_available_og_scenes</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a>
<a id="__codelineno-12-13" name="__codelineno-12-13"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-12-14" name="__codelineno-12-14"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-12-15" name="__codelineno-12-15"></a><span class="sd">    Traversable map demo</span>
<a id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="sd">    Loads the floor plan and obstacles for the requested scene, and overlays them in a visual figure such that the</span>
<a id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="sd">    highlighted area reflects the traversable (free-space) area</span>
<a id="__codelineno-12-18" name="__codelineno-12-18"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-12-19" name="__codelineno-12-19"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-12-20" name="__codelineno-12-20"></a>
<a id="__codelineno-12-21" name="__codelineno-12-21"></a>    <span class="n">scenes</span> <span class="o">=</span> <span class="n">get_available_og_scenes</span><span class="p">()</span>
<a id="__codelineno-12-22" name="__codelineno-12-22"></a>    <span class="n">scene_model</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">scenes</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;scene model&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-12-23" name="__codelineno-12-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generating traversability map for scene </span><span class="si">{</span><span class="n">scene_model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-12-24" name="__codelineno-12-24"></a>
<a id="__codelineno-12-25" name="__codelineno-12-25"></a>    <span class="n">trav_map_size</span> <span class="o">=</span> <span class="mi">200</span>
<a id="__codelineno-12-26" name="__codelineno-12-26"></a>    <span class="n">trav_map_erosion</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-12-27" name="__codelineno-12-27"></a>
<a id="__codelineno-12-28" name="__codelineno-12-28"></a>    <span class="n">trav_map</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_og_scene_path</span><span class="p">(</span><span class="n">scene_model</span><span class="p">),</span> <span class="s2">&quot;floor_trav_0.png&quot;</span><span class="p">))</span>
<a id="__codelineno-12-29" name="__codelineno-12-29"></a>    <span class="n">obstacle_map</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">get_og_scene_path</span><span class="p">(</span><span class="n">scene_model</span><span class="p">),</span> <span class="s2">&quot;floor_0.png&quot;</span><span class="p">))</span>
<a id="__codelineno-12-30" name="__codelineno-12-30"></a>    <span class="n">trav_map</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">trav_map</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="n">trav_map_size</span><span class="p">,</span> <span class="n">trav_map_size</span><span class="p">)))</span>
<a id="__codelineno-12-31" name="__codelineno-12-31"></a>    <span class="n">obstacle_map</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">obstacle_map</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="n">trav_map_size</span><span class="p">,</span> <span class="n">trav_map_size</span><span class="p">)))</span>
<a id="__codelineno-12-32" name="__codelineno-12-32"></a>    <span class="n">trav_map</span><span class="p">[</span><span class="n">obstacle_map</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-12-33" name="__codelineno-12-33"></a>    <span class="n">trav_map</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">erode</span><span class="p">(</span><span class="n">trav_map</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">trav_map_erosion</span><span class="p">,</span> <span class="n">trav_map_erosion</span><span class="p">)))</span>
<a id="__codelineno-12-34" name="__codelineno-12-34"></a>
<a id="__codelineno-12-35" name="__codelineno-12-35"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">headless</span><span class="p">:</span>
<a id="__codelineno-12-36" name="__codelineno-12-36"></a>        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<a id="__codelineno-12-37" name="__codelineno-12-37"></a>        <span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">trav_map</span><span class="p">)</span>
<a id="__codelineno-12-38" name="__codelineno-12-38"></a>        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Traversable area of </span><span class="si">{}</span><span class="s2"> scene&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">scene_id</span><span class="p">))</span>
<a id="__codelineno-12-39" name="__codelineno-12-39"></a>
<a id="__codelineno-12-40" name="__codelineno-12-40"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">headless</span><span class="p">:</span>
<a id="__codelineno-12-41" name="__codelineno-12-41"></a>        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<a id="__codelineno-12-42" name="__codelineno-12-42"></a>
<a id="__codelineno-12-43" name="__codelineno-12-43"></a>
<a id="__codelineno-12-44" name="__codelineno-12-44"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-12-45" name="__codelineno-12-45"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h2 id="objects">🎾 <strong>Objects</strong></h2>
<p>These examples showcase how to leverage objects in <strong><code>OmniGibson</code></strong>.</p>
<h3 id="load-object-demo"><strong>Load Object Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to load an object into <strong><code>OmniGibson</code></strong></li>
<li>Accessing all BEHAVIOR dataset asset categories and models</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">load_object_selector</span>
</code></pre></div>
<p>This demo lets you choose a specific object from the BEHAVIOR dataset, and loads the requested object into an environment.</p>
<details class="code">
<summary>load_object_selector.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span>
<span class="normal"><a href="#__codelineno-14-17">17</a></span>
<span class="normal"><a href="#__codelineno-14-18">18</a></span>
<span class="normal"><a href="#__codelineno-14-19">19</a></span>
<span class="normal"><a href="#__codelineno-14-20">20</a></span>
<span class="normal"><a href="#__codelineno-14-21">21</a></span>
<span class="normal"><a href="#__codelineno-14-22">22</a></span>
<span class="normal"><a href="#__codelineno-14-23">23</a></span>
<span class="normal"><a href="#__codelineno-14-24">24</a></span>
<span class="normal"><a href="#__codelineno-14-25">25</a></span>
<span class="normal"><a href="#__codelineno-14-26">26</a></span>
<span class="normal"><a href="#__codelineno-14-27">27</a></span>
<span class="normal"><a href="#__codelineno-14-28">28</a></span>
<span class="normal"><a href="#__codelineno-14-29">29</a></span>
<span class="normal"><a href="#__codelineno-14-30">30</a></span>
<span class="normal"><a href="#__codelineno-14-31">31</a></span>
<span class="normal"><a href="#__codelineno-14-32">32</a></span>
<span class="normal"><a href="#__codelineno-14-33">33</a></span>
<span class="normal"><a href="#__codelineno-14-34">34</a></span>
<span class="normal"><a href="#__codelineno-14-35">35</a></span>
<span class="normal"><a href="#__codelineno-14-36">36</a></span>
<span class="normal"><a href="#__codelineno-14-37">37</a></span>
<span class="normal"><a href="#__codelineno-14-38">38</a></span>
<span class="normal"><a href="#__codelineno-14-39">39</a></span>
<span class="normal"><a href="#__codelineno-14-40">40</a></span>
<span class="normal"><a href="#__codelineno-14-41">41</a></span>
<span class="normal"><a href="#__codelineno-14-42">42</a></span>
<span class="normal"><a href="#__codelineno-14-43">43</a></span>
<span class="normal"><a href="#__codelineno-14-44">44</a></span>
<span class="normal"><a href="#__codelineno-14-45">45</a></span>
<span class="normal"><a href="#__codelineno-14-46">46</a></span>
<span class="normal"><a href="#__codelineno-14-47">47</a></span>
<span class="normal"><a href="#__codelineno-14-48">48</a></span>
<span class="normal"><a href="#__codelineno-14-49">49</a></span>
<span class="normal"><a href="#__codelineno-14-50">50</a></span>
<span class="normal"><a href="#__codelineno-14-51">51</a></span>
<span class="normal"><a href="#__codelineno-14-52">52</a></span>
<span class="normal"><a href="#__codelineno-14-53">53</a></span>
<span class="normal"><a href="#__codelineno-14-54">54</a></span>
<span class="normal"><a href="#__codelineno-14-55">55</a></span>
<span class="normal"><a href="#__codelineno-14-56">56</a></span>
<span class="normal"><a href="#__codelineno-14-57">57</a></span>
<span class="normal"><a href="#__codelineno-14-58">58</a></span>
<span class="normal"><a href="#__codelineno-14-59">59</a></span>
<span class="normal"><a href="#__codelineno-14-60">60</a></span>
<span class="normal"><a href="#__codelineno-14-61">61</a></span>
<span class="normal"><a href="#__codelineno-14-62">62</a></span>
<span class="normal"><a href="#__codelineno-14-63">63</a></span>
<span class="normal"><a href="#__codelineno-14-64">64</a></span>
<span class="normal"><a href="#__codelineno-14-65">65</a></span>
<span class="normal"><a href="#__codelineno-14-66">66</a></span>
<span class="normal"><a href="#__codelineno-14-67">67</a></span>
<span class="normal"><a href="#__codelineno-14-68">68</a></span>
<span class="normal"><a href="#__codelineno-14-69">69</a></span>
<span class="normal"><a href="#__codelineno-14-70">70</a></span>
<span class="normal"><a href="#__codelineno-14-71">71</a></span>
<span class="normal"><a href="#__codelineno-14-72">72</a></span>
<span class="normal"><a href="#__codelineno-14-73">73</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.asset_utils</span> <span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a>    <span class="n">get_all_object_categories</span><span class="p">,</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a>    <span class="n">get_og_avg_category_specs</span><span class="p">,</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a>    <span class="n">get_object_models_of_category</span><span class="p">,</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="p">)</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="sd">    This demo shows how to load any scaled objects from the iG object model dataset</span>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="sd">    The user selects an object model to load</span>
<a id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="sd">    The objects can be loaded into an empty scene, an interactive scene (iG) or a static scene (Gibson)</span>
<a id="__codelineno-14-18" name="__codelineno-14-18"></a><span class="sd">    The example also shows how to use the Environment API or directly the Simulator API, loading objects and robots</span>
<a id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="sd">    and executing actions</span>
<a id="__codelineno-14-20" name="__codelineno-14-20"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-14-21" name="__codelineno-14-21"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-14-22" name="__codelineno-14-22"></a>    <span class="n">scene_options</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Scene&quot;</span><span class="p">,</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span><span class="p">,</span> <span class="s2">&quot;StaticTraversableScene&quot;</span><span class="p">]</span>
<a id="__codelineno-14-23" name="__codelineno-14-23"></a>    <span class="n">scene_type</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">scene_options</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;scene type&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-14-24" name="__codelineno-14-24"></a>
<a id="__codelineno-14-25" name="__codelineno-14-25"></a>    <span class="c1"># -- Choose the object to load --</span>
<a id="__codelineno-14-26" name="__codelineno-14-26"></a>
<a id="__codelineno-14-27" name="__codelineno-14-27"></a>    <span class="c1"># Select a category to load</span>
<a id="__codelineno-14-28" name="__codelineno-14-28"></a>    <span class="n">available_obj_categories</span> <span class="o">=</span> <span class="n">get_all_object_categories</span><span class="p">()</span>
<a id="__codelineno-14-29" name="__codelineno-14-29"></a>    <span class="n">obj_category</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">available_obj_categories</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;object category&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-14-30" name="__codelineno-14-30"></a>
<a id="__codelineno-14-31" name="__codelineno-14-31"></a>    <span class="c1"># Select a model to load</span>
<a id="__codelineno-14-32" name="__codelineno-14-32"></a>    <span class="n">available_obj_models</span> <span class="o">=</span> <span class="n">get_object_models_of_category</span><span class="p">(</span><span class="n">obj_category</span><span class="p">)</span>
<a id="__codelineno-14-33" name="__codelineno-14-33"></a>    <span class="n">obj_model</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">available_obj_models</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;object model&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-14-34" name="__codelineno-14-34"></a>
<a id="__codelineno-14-35" name="__codelineno-14-35"></a>    <span class="c1"># Load the specs of the object categories, e.g., common scaling factor</span>
<a id="__codelineno-14-36" name="__codelineno-14-36"></a>    <span class="n">avg_category_spec</span> <span class="o">=</span> <span class="n">get_og_avg_category_specs</span><span class="p">()</span>
<a id="__codelineno-14-37" name="__codelineno-14-37"></a>
<a id="__codelineno-14-38" name="__codelineno-14-38"></a>    <span class="c1"># Create and load this object into the simulator</span>
<a id="__codelineno-14-39" name="__codelineno-14-39"></a>    <span class="n">obj_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-14-40" name="__codelineno-14-40"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-14-41" name="__codelineno-14-41"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;obj&quot;</span><span class="p">,</span>
<a id="__codelineno-14-42" name="__codelineno-14-42"></a>        <span class="n">category</span><span class="o">=</span><span class="n">obj_category</span><span class="p">,</span>
<a id="__codelineno-14-43" name="__codelineno-14-43"></a>        <span class="n">model</span><span class="o">=</span><span class="n">obj_model</span><span class="p">,</span>
<a id="__codelineno-14-44" name="__codelineno-14-44"></a>        <span class="n">bounding_box</span><span class="o">=</span><span class="n">avg_category_spec</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj_category</span><span class="p">),</span>
<a id="__codelineno-14-45" name="__codelineno-14-45"></a>        <span class="n">fit_avg_dim_volume</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-14-46" name="__codelineno-14-46"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.01</span><span class="p">],</span>
<a id="__codelineno-14-47" name="__codelineno-14-47"></a>    <span class="p">)</span>
<a id="__codelineno-14-48" name="__codelineno-14-48"></a>
<a id="__codelineno-14-49" name="__codelineno-14-49"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-14-50" name="__codelineno-14-50"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-14-51" name="__codelineno-14-51"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">scene_type</span><span class="p">,</span>
<a id="__codelineno-14-52" name="__codelineno-14-52"></a>        <span class="p">},</span>
<a id="__codelineno-14-53" name="__codelineno-14-53"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">obj_cfg</span><span class="p">],</span>
<a id="__codelineno-14-54" name="__codelineno-14-54"></a>    <span class="p">}</span>
<a id="__codelineno-14-55" name="__codelineno-14-55"></a>    <span class="k">if</span> <span class="n">scene_type</span> <span class="o">==</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span><span class="p">:</span>
<a id="__codelineno-14-56" name="__codelineno-14-56"></a>        <span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;scene&quot;</span><span class="p">][</span><span class="s2">&quot;scene_model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Rs_int&quot;</span>
<a id="__codelineno-14-57" name="__codelineno-14-57"></a>    <span class="k">elif</span> <span class="n">scene_type</span> <span class="o">==</span> <span class="s2">&quot;StaticTraversableScene&quot;</span><span class="p">:</span>
<a id="__codelineno-14-58" name="__codelineno-14-58"></a>        <span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;scene&quot;</span><span class="p">][</span><span class="s2">&quot;scene_model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Adrian&quot;</span>
<a id="__codelineno-14-59" name="__codelineno-14-59"></a>
<a id="__codelineno-14-60" name="__codelineno-14-60"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-14-61" name="__codelineno-14-61"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-14-62" name="__codelineno-14-62"></a>
<a id="__codelineno-14-63" name="__codelineno-14-63"></a>    <span class="c1"># Step through the environment</span>
<a id="__codelineno-14-64" name="__codelineno-14-64"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="mi">100</span> <span class="k">if</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">10000</span>
<a id="__codelineno-14-65" name="__codelineno-14-65"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_steps</span><span class="p">):</span>
<a id="__codelineno-14-66" name="__codelineno-14-66"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-14-67" name="__codelineno-14-67"></a>
<a id="__codelineno-14-68" name="__codelineno-14-68"></a>    <span class="c1"># Always close the environment at the end</span>
<a id="__codelineno-14-69" name="__codelineno-14-69"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-14-70" name="__codelineno-14-70"></a>
<a id="__codelineno-14-71" name="__codelineno-14-71"></a>
<a id="__codelineno-14-72" name="__codelineno-14-72"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-14-73" name="__codelineno-14-73"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="object-visualizer-demo"><strong> Object Visualizer Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Viewing objects' textures as rendered in <strong><code>OmniGibson</code></strong></li>
<li>Viewing articulated objects' range of motion</li>
<li>Understanding how to reference object instances from the environment</li>
<li>Understanding how to set object poses and joint states</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">visualize_object</span>
</code></pre></div>
<p>This demo lets you choose a specific object from the BEHAVIOR dataset, and rotates the object in-place. If the object is articulated, it additionally moves its joints through its full range of motion.</p>
<details class="code">
<summary>visualize_object.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">  1</a></span>
<span class="normal"><a href="#__codelineno-16-2">  2</a></span>
<span class="normal"><a href="#__codelineno-16-3">  3</a></span>
<span class="normal"><a href="#__codelineno-16-4">  4</a></span>
<span class="normal"><a href="#__codelineno-16-5">  5</a></span>
<span class="normal"><a href="#__codelineno-16-6">  6</a></span>
<span class="normal"><a href="#__codelineno-16-7">  7</a></span>
<span class="normal"><a href="#__codelineno-16-8">  8</a></span>
<span class="normal"><a href="#__codelineno-16-9">  9</a></span>
<span class="normal"><a href="#__codelineno-16-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-16-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-16-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-16-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-16-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-16-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-16-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-16-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-16-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-16-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-16-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-16-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-16-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-16-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-16-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-16-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-16-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-16-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-16-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-16-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-16-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-16-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-16-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-16-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-16-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-16-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-16-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-16-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-16-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-16-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-16-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-16-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-16-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-16-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-16-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-16-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-16-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-16-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-16-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-16-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-16-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-16-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-16-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-16-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-16-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-16-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-16-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-16-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-16-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-16-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-16-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-16-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-16-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-16-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-16-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-16-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-16-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-16-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-16-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-16-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-16-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-16-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-16-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-16-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-16-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-16-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-16-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-16-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-16-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-16-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-16-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-16-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-16-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-16-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-16-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-16-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-16-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-16-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-16-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-16-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-16-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-16-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-16-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-16-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-16-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-16-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-16-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-16-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-16-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-16-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-16-100">100</a></span>
<span class="normal"><a href="#__codelineno-16-101">101</a></span>
<span class="normal"><a href="#__codelineno-16-102">102</a></span>
<span class="normal"><a href="#__codelineno-16-103">103</a></span>
<span class="normal"><a href="#__codelineno-16-104">104</a></span>
<span class="normal"><a href="#__codelineno-16-105">105</a></span>
<span class="normal"><a href="#__codelineno-16-106">106</a></span>
<span class="normal"><a href="#__codelineno-16-107">107</a></span>
<span class="normal"><a href="#__codelineno-16-108">108</a></span>
<span class="normal"><a href="#__codelineno-16-109">109</a></span>
<span class="normal"><a href="#__codelineno-16-110">110</a></span>
<span class="normal"><a href="#__codelineno-16-111">111</a></span>
<span class="normal"><a href="#__codelineno-16-112">112</a></span>
<span class="normal"><a href="#__codelineno-16-113">113</a></span>
<span class="normal"><a href="#__codelineno-16-114">114</a></span>
<span class="normal"><a href="#__codelineno-16-115">115</a></span>
<span class="normal"><a href="#__codelineno-16-116">116</a></span>
<span class="normal"><a href="#__codelineno-16-117">117</a></span>
<span class="normal"><a href="#__codelineno-16-118">118</a></span>
<span class="normal"><a href="#__codelineno-16-119">119</a></span>
<span class="normal"><a href="#__codelineno-16-120">120</a></span>
<span class="normal"><a href="#__codelineno-16-121">121</a></span>
<span class="normal"><a href="#__codelineno-16-122">122</a></span>
<span class="normal"><a href="#__codelineno-16-123">123</a></span>
<span class="normal"><a href="#__codelineno-16-124">124</a></span>
<span class="normal"><a href="#__codelineno-16-125">125</a></span>
<span class="normal"><a href="#__codelineno-16-126">126</a></span>
<span class="normal"><a href="#__codelineno-16-127">127</a></span>
<span class="normal"><a href="#__codelineno-16-128">128</a></span>
<span class="normal"><a href="#__codelineno-16-129">129</a></span>
<span class="normal"><a href="#__codelineno-16-130">130</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kn">import</span> <span class="nn">argparse</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.asset_utils</span> <span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a>    <span class="n">get_all_object_categories</span><span class="p">,</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a>    <span class="n">get_object_models_of_category</span><span class="p">,</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="p">)</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="kn">import</span> <span class="nn">omnigibson.utils.transform_utils</span> <span class="k">as</span> <span class="nn">T</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="sd">    Visualizes object as specified by its USD path, @usd_path. If None if specified, will instead</span>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="sd">    result in an object selection from OmniGibson&#39;s object dataset</span>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-16-20" name="__codelineno-16-20"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-16-21" name="__codelineno-16-21"></a>
<a id="__codelineno-16-22" name="__codelineno-16-22"></a>    <span class="c1"># Assuming that if random_selection=True, headless=True, short_exec=True, we are calling it from tests and we</span>
<a id="__codelineno-16-23" name="__codelineno-16-23"></a>    <span class="c1"># do not want to parse args (it would fail because the calling function is pytest &quot;testfile.py&quot;)</span>
<a id="__codelineno-16-24" name="__codelineno-16-24"></a>    <span class="n">usd_path</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-16-25" name="__codelineno-16-25"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">random_selection</span> <span class="ow">and</span> <span class="n">headless</span> <span class="ow">and</span> <span class="n">short_exec</span><span class="p">):</span>
<a id="__codelineno-16-26" name="__codelineno-16-26"></a>        <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<a id="__codelineno-16-27" name="__codelineno-16-27"></a>        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
<a id="__codelineno-16-28" name="__codelineno-16-28"></a>            <span class="s2">&quot;--usd_path&quot;</span><span class="p">,</span>
<a id="__codelineno-16-29" name="__codelineno-16-29"></a>            <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-16-30" name="__codelineno-16-30"></a>            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;USD Model to load&quot;</span><span class="p">,</span>
<a id="__codelineno-16-31" name="__codelineno-16-31"></a>        <span class="p">)</span>
<a id="__codelineno-16-32" name="__codelineno-16-32"></a>        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<a id="__codelineno-16-33" name="__codelineno-16-33"></a>        <span class="n">usd_path</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">usd_path</span>
<a id="__codelineno-16-34" name="__codelineno-16-34"></a>
<a id="__codelineno-16-35" name="__codelineno-16-35"></a>    <span class="c1"># Define objects to load</span>
<a id="__codelineno-16-36" name="__codelineno-16-36"></a>    <span class="n">light0_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-16-37" name="__codelineno-16-37"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;LightObject&quot;</span><span class="p">,</span>
<a id="__codelineno-16-38" name="__codelineno-16-38"></a>        <span class="n">light_type</span><span class="o">=</span><span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-16-39" name="__codelineno-16-39"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sphere_light0&quot;</span><span class="p">,</span>
<a id="__codelineno-16-40" name="__codelineno-16-40"></a>        <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-16-41" name="__codelineno-16-41"></a>        <span class="n">intensity</span><span class="o">=</span><span class="mf">1e5</span><span class="p">,</span>
<a id="__codelineno-16-42" name="__codelineno-16-42"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span>
<a id="__codelineno-16-43" name="__codelineno-16-43"></a>    <span class="p">)</span>
<a id="__codelineno-16-44" name="__codelineno-16-44"></a>
<a id="__codelineno-16-45" name="__codelineno-16-45"></a>    <span class="n">light1_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-16-46" name="__codelineno-16-46"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;LightObject&quot;</span><span class="p">,</span>
<a id="__codelineno-16-47" name="__codelineno-16-47"></a>        <span class="n">light_type</span><span class="o">=</span><span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-16-48" name="__codelineno-16-48"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sphere_light1&quot;</span><span class="p">,</span>
<a id="__codelineno-16-49" name="__codelineno-16-49"></a>        <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-16-50" name="__codelineno-16-50"></a>        <span class="n">intensity</span><span class="o">=</span><span class="mf">1e5</span><span class="p">,</span>
<a id="__codelineno-16-51" name="__codelineno-16-51"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span>
<a id="__codelineno-16-52" name="__codelineno-16-52"></a>    <span class="p">)</span>
<a id="__codelineno-16-53" name="__codelineno-16-53"></a>
<a id="__codelineno-16-54" name="__codelineno-16-54"></a>    <span class="c1"># Make sure we have a valid usd path</span>
<a id="__codelineno-16-55" name="__codelineno-16-55"></a>    <span class="k">if</span> <span class="n">usd_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-16-56" name="__codelineno-16-56"></a>        <span class="c1"># Select a category to load</span>
<a id="__codelineno-16-57" name="__codelineno-16-57"></a>        <span class="n">available_obj_categories</span> <span class="o">=</span> <span class="n">get_all_object_categories</span><span class="p">()</span>
<a id="__codelineno-16-58" name="__codelineno-16-58"></a>        <span class="n">obj_category</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">available_obj_categories</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;object category&quot;</span><span class="p">,</span>
<a id="__codelineno-16-59" name="__codelineno-16-59"></a>                                           <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-16-60" name="__codelineno-16-60"></a>
<a id="__codelineno-16-61" name="__codelineno-16-61"></a>        <span class="c1"># Select a model to load</span>
<a id="__codelineno-16-62" name="__codelineno-16-62"></a>        <span class="n">available_obj_models</span> <span class="o">=</span> <span class="n">get_object_models_of_category</span><span class="p">(</span><span class="n">obj_category</span><span class="p">)</span>
<a id="__codelineno-16-63" name="__codelineno-16-63"></a>        <span class="n">obj_model</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">available_obj_models</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;object model&quot;</span><span class="p">,</span>
<a id="__codelineno-16-64" name="__codelineno-16-64"></a>                                        <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-16-65" name="__codelineno-16-65"></a>
<a id="__codelineno-16-66" name="__codelineno-16-66"></a>        <span class="n">usd_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">og</span><span class="o">.</span><span class="n">og_dataset_path</span><span class="si">}</span><span class="s2">/objects/</span><span class="si">{</span><span class="n">obj_category</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">obj_model</span><span class="si">}</span><span class="s2">/usd/</span><span class="si">{</span><span class="n">obj_model</span><span class="si">}</span><span class="s2">.usd&quot;</span>
<a id="__codelineno-16-67" name="__codelineno-16-67"></a>
<a id="__codelineno-16-68" name="__codelineno-16-68"></a>    <span class="c1"># Import the desired object</span>
<a id="__codelineno-16-69" name="__codelineno-16-69"></a>    <span class="n">obj_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-16-70" name="__codelineno-16-70"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;USDObject&quot;</span><span class="p">,</span>
<a id="__codelineno-16-71" name="__codelineno-16-71"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;obj&quot;</span><span class="p">,</span>
<a id="__codelineno-16-72" name="__codelineno-16-72"></a>        <span class="n">usd_path</span><span class="o">=</span><span class="n">usd_path</span><span class="p">,</span>
<a id="__codelineno-16-73" name="__codelineno-16-73"></a>        <span class="n">visual_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-16-74" name="__codelineno-16-74"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">],</span>
<a id="__codelineno-16-75" name="__codelineno-16-75"></a>    <span class="p">)</span>
<a id="__codelineno-16-76" name="__codelineno-16-76"></a>
<a id="__codelineno-16-77" name="__codelineno-16-77"></a>    <span class="c1"># Create the scene config to load -- empty scene</span>
<a id="__codelineno-16-78" name="__codelineno-16-78"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-16-79" name="__codelineno-16-79"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-16-80" name="__codelineno-16-80"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-16-81" name="__codelineno-16-81"></a>        <span class="p">},</span>
<a id="__codelineno-16-82" name="__codelineno-16-82"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">light0_cfg</span><span class="p">,</span> <span class="n">light1_cfg</span><span class="p">,</span> <span class="n">obj_cfg</span><span class="p">],</span>
<a id="__codelineno-16-83" name="__codelineno-16-83"></a>    <span class="p">}</span>
<a id="__codelineno-16-84" name="__codelineno-16-84"></a>
<a id="__codelineno-16-85" name="__codelineno-16-85"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-16-86" name="__codelineno-16-86"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<a id="__codelineno-16-87" name="__codelineno-16-87"></a>
<a id="__codelineno-16-88" name="__codelineno-16-88"></a>    <span class="c1"># Set camera to appropriate viewing pose</span>
<a id="__codelineno-16-89" name="__codelineno-16-89"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-16-90" name="__codelineno-16-90"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.00913503</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.95750906</span><span class="p">,</span>  <span class="mf">1.36407314</span><span class="p">]),</span>
<a id="__codelineno-16-91" name="__codelineno-16-91"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.6350064</span> <span class="p">,</span> <span class="mf">0.</span>        <span class="p">,</span> <span class="mf">0.</span>        <span class="p">,</span> <span class="mf">0.77250687</span><span class="p">]),</span>
<a id="__codelineno-16-92" name="__codelineno-16-92"></a>    <span class="p">)</span>
<a id="__codelineno-16-93" name="__codelineno-16-93"></a>
<a id="__codelineno-16-94" name="__codelineno-16-94"></a>    <span class="c1"># Grab the object references</span>
<a id="__codelineno-16-95" name="__codelineno-16-95"></a>    <span class="n">obj</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;obj&quot;</span><span class="p">)</span>
<a id="__codelineno-16-96" name="__codelineno-16-96"></a>
<a id="__codelineno-16-97" name="__codelineno-16-97"></a>    <span class="c1"># Standardize the scale of the object so it fits in a [1,1,1] box -- note that we have to stop the simulator</span>
<a id="__codelineno-16-98" name="__codelineno-16-98"></a>    <span class="c1"># in order to set the scale</span>
<a id="__codelineno-16-99" name="__codelineno-16-99"></a>    <span class="n">extents</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">aabb_extent</span>
<a id="__codelineno-16-100" name="__codelineno-16-100"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<a id="__codelineno-16-101" name="__codelineno-16-101"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">/</span> <span class="n">extents</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<a id="__codelineno-16-102" name="__codelineno-16-102"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<a id="__codelineno-16-103" name="__codelineno-16-103"></a>    <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-16-104" name="__codelineno-16-104"></a>
<a id="__codelineno-16-105" name="__codelineno-16-105"></a>    <span class="c1"># Move the object so that its center is at [0, 0, 1]</span>
<a id="__codelineno-16-106" name="__codelineno-16-106"></a>    <span class="n">center_offset</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">aabb_center</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
<a id="__codelineno-16-107" name="__codelineno-16-107"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">center_offset</span><span class="p">)</span>
<a id="__codelineno-16-108" name="__codelineno-16-108"></a>
<a id="__codelineno-16-109" name="__codelineno-16-109"></a>    <span class="c1"># Allow the user to easily move the camera around</span>
<a id="__codelineno-16-110" name="__codelineno-16-110"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">enable_viewer_camera_teleoperation</span><span class="p">()</span>
<a id="__codelineno-16-111" name="__codelineno-16-111"></a>
<a id="__codelineno-16-112" name="__codelineno-16-112"></a>    <span class="c1"># Rotate the object in place</span>
<a id="__codelineno-16-113" name="__codelineno-16-113"></a>    <span class="n">steps_per_rotate</span> <span class="o">=</span> <span class="mi">360</span>
<a id="__codelineno-16-114" name="__codelineno-16-114"></a>    <span class="n">steps_per_joint</span> <span class="o">=</span> <span class="n">steps_per_rotate</span> <span class="o">/</span> <span class="mi">10</span>
<a id="__codelineno-16-115" name="__codelineno-16-115"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="mi">100</span> <span class="k">if</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">10000</span>
<a id="__codelineno-16-116" name="__codelineno-16-116"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_steps</span><span class="p">):</span>
<a id="__codelineno-16-117" name="__codelineno-16-117"></a>        <span class="n">z_angle</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">steps_per_rotate</span><span class="p">)</span> <span class="o">/</span> <span class="n">steps_per_rotate</span><span class="p">)</span>
<a id="__codelineno-16-118" name="__codelineno-16-118"></a>        <span class="n">quat</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">euler2quat</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">z_angle</span><span class="p">]))</span>
<a id="__codelineno-16-119" name="__codelineno-16-119"></a>        <span class="n">pos</span> <span class="o">=</span> <span class="n">T</span><span class="o">.</span><span class="n">quat2mat</span><span class="p">(</span><span class="n">quat</span><span class="p">)</span> <span class="o">@</span> <span class="n">center_offset</span>
<a id="__codelineno-16-120" name="__codelineno-16-120"></a>        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">n_dof</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-16-121" name="__codelineno-16-121"></a>            <span class="n">frac</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">steps_per_joint</span><span class="p">)</span> <span class="o">/</span> <span class="n">steps_per_joint</span>
<a id="__codelineno-16-122" name="__codelineno-16-122"></a>            <span class="n">j_frac</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span> <span class="o">+</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">frac</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">//</span> <span class="n">steps_per_joint</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">frac</span>
<a id="__codelineno-16-123" name="__codelineno-16-123"></a>            <span class="n">obj</span><span class="o">.</span><span class="n">set_joint_positions</span><span class="p">(</span><span class="n">positions</span><span class="o">=</span><span class="n">j_frac</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">n_dof</span><span class="p">),</span> <span class="n">normalized</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-16-124" name="__codelineno-16-124"></a>            <span class="n">obj</span><span class="o">.</span><span class="n">keep_still</span><span class="p">()</span>
<a id="__codelineno-16-125" name="__codelineno-16-125"></a>        <span class="n">obj</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="n">quat</span><span class="p">)</span>
<a id="__codelineno-16-126" name="__codelineno-16-126"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-16-127" name="__codelineno-16-127"></a>
<a id="__codelineno-16-128" name="__codelineno-16-128"></a>
<a id="__codelineno-16-129" name="__codelineno-16-129"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-16-130" name="__codelineno-16-130"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="highlight-object"><strong>Highlight Object</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to highlight individual objects within a cluttered scene</li>
<li>Understanding how to access groups of objects from the environment</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">highlight_objects</span>
</code></pre></div>
<p>This demo lets you choose a specific object from the BEHAVIOR dataset, and rotates the object in-place. If the object is articulated, it additionally moves its joints through its full range of motion.</p>
<details class="code">
<summary>highlight_objects.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span>
<span class="normal"><a href="#__codelineno-18-16">16</a></span>
<span class="normal"><a href="#__codelineno-18-17">17</a></span>
<span class="normal"><a href="#__codelineno-18-18">18</a></span>
<span class="normal"><a href="#__codelineno-18-19">19</a></span>
<span class="normal"><a href="#__codelineno-18-20">20</a></span>
<span class="normal"><a href="#__codelineno-18-21">21</a></span>
<span class="normal"><a href="#__codelineno-18-22">22</a></span>
<span class="normal"><a href="#__codelineno-18-23">23</a></span>
<span class="normal"><a href="#__codelineno-18-24">24</a></span>
<span class="normal"><a href="#__codelineno-18-25">25</a></span>
<span class="normal"><a href="#__codelineno-18-26">26</a></span>
<span class="normal"><a href="#__codelineno-18-27">27</a></span>
<span class="normal"><a href="#__codelineno-18-28">28</a></span>
<span class="normal"><a href="#__codelineno-18-29">29</a></span>
<span class="normal"><a href="#__codelineno-18-30">30</a></span>
<span class="normal"><a href="#__codelineno-18-31">31</a></span>
<span class="normal"><a href="#__codelineno-18-32">32</a></span>
<span class="normal"><a href="#__codelineno-18-33">33</a></span>
<span class="normal"><a href="#__codelineno-18-34">34</a></span>
<span class="normal"><a href="#__codelineno-18-35">35</a></span>
<span class="normal"><a href="#__codelineno-18-36">36</a></span>
<span class="normal"><a href="#__codelineno-18-37">37</a></span>
<span class="normal"><a href="#__codelineno-18-38">38</a></span>
<span class="normal"><a href="#__codelineno-18-39">39</a></span>
<span class="normal"><a href="#__codelineno-18-40">40</a></span>
<span class="normal"><a href="#__codelineno-18-41">41</a></span>
<span class="normal"><a href="#__codelineno-18-42">42</a></span>
<span class="normal"><a href="#__codelineno-18-43">43</a></span>
<span class="normal"><a href="#__codelineno-18-44">44</a></span>
<span class="normal"><a href="#__codelineno-18-45">45</a></span>
<span class="normal"><a href="#__codelineno-18-46">46</a></span>
<span class="normal"><a href="#__codelineno-18-47">47</a></span>
<span class="normal"><a href="#__codelineno-18-48">48</a></span>
<span class="normal"><a href="#__codelineno-18-49">49</a></span>
<span class="normal"><a href="#__codelineno-18-50">50</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="sd">Generate example top-down segmentation map via renderer</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="sd">    Highlights visually all object instances of some given category and then removes the highlighting</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="sd">    It also demonstrates how to apply an action on all instances of objects of a given category</span>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="sd">    ONLY WORKS WITH OPTIMIZED RENDERING (not on Mac)</span>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-18-15" name="__codelineno-18-15"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-18-16" name="__codelineno-18-16"></a>
<a id="__codelineno-18-17" name="__codelineno-18-17"></a>    <span class="c1"># Create the scene config to load -- empty scene</span>
<a id="__codelineno-18-18" name="__codelineno-18-18"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-18-19" name="__codelineno-18-19"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-18-20" name="__codelineno-18-20"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span><span class="p">,</span>
<a id="__codelineno-18-21" name="__codelineno-18-21"></a>            <span class="s2">&quot;scene_model&quot;</span><span class="p">:</span> <span class="s2">&quot;Rs_int&quot;</span><span class="p">,</span>
<a id="__codelineno-18-22" name="__codelineno-18-22"></a>        <span class="p">}</span>
<a id="__codelineno-18-23" name="__codelineno-18-23"></a>    <span class="p">}</span>
<a id="__codelineno-18-24" name="__codelineno-18-24"></a>
<a id="__codelineno-18-25" name="__codelineno-18-25"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-18-26" name="__codelineno-18-26"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<a id="__codelineno-18-27" name="__codelineno-18-27"></a>
<a id="__codelineno-18-28" name="__codelineno-18-28"></a>    <span class="c1"># Grab all window objects</span>
<a id="__codelineno-18-29" name="__codelineno-18-29"></a>    <span class="n">windows</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="s2">&quot;window&quot;</span><span class="p">)</span>
<a id="__codelineno-18-30" name="__codelineno-18-30"></a>
<a id="__codelineno-18-31" name="__codelineno-18-31"></a>    <span class="c1"># Step environment while toggling window highlighting</span>
<a id="__codelineno-18-32" name="__codelineno-18-32"></a>    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-18-33" name="__codelineno-18-33"></a>    <span class="n">highlighted</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-18-34" name="__codelineno-18-34"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">1000</span>
<a id="__codelineno-18-35" name="__codelineno-18-35"></a>    <span class="k">while</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">max_steps</span><span class="p">:</span>
<a id="__codelineno-18-36" name="__codelineno-18-36"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-18-37" name="__codelineno-18-37"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">50</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-18-38" name="__codelineno-18-38"></a>            <span class="n">highlighted</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">highlighted</span>
<a id="__codelineno-18-39" name="__codelineno-18-39"></a>            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Toggling window highlight to: </span><span class="si">{</span><span class="n">highlighted</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-18-40" name="__codelineno-18-40"></a>            <span class="k">for</span> <span class="n">window</span> <span class="ow">in</span> <span class="n">windows</span><span class="p">:</span>
<a id="__codelineno-18-41" name="__codelineno-18-41"></a>                <span class="c1"># Note that this property is R/W!</span>
<a id="__codelineno-18-42" name="__codelineno-18-42"></a>                <span class="n">window</span><span class="o">.</span><span class="n">highlighted</span> <span class="o">=</span> <span class="n">highlighted</span>
<a id="__codelineno-18-43" name="__codelineno-18-43"></a>        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-18-44" name="__codelineno-18-44"></a>
<a id="__codelineno-18-45" name="__codelineno-18-45"></a>    <span class="c1"># Always close the environment at the end</span>
<a id="__codelineno-18-46" name="__codelineno-18-46"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-18-47" name="__codelineno-18-47"></a>
<a id="__codelineno-18-48" name="__codelineno-18-48"></a>
<a id="__codelineno-18-49" name="__codelineno-18-49"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-18-50" name="__codelineno-18-50"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="draw-object-bounding-box-demo"><strong>Draw Object Bounding Box Demo</strong></h3>
<div class="admonition abstract annotate">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to access observations from a <code>GymObservable</code> object (1)</li>
<li>Understanding how to access objects' bounding box information</li>
<li>Understanding how to dynamically modify vision modalities</li>
</ul>
</div>
<ol>
<li><a href="../reference/envs/env_base.html"><code>Environment</code></a>, all sensors extending from <a href="../reference/sensors/sensor_base.html"><code>BaseSensor</code></a>, and all objects extending from <a href="../reference/objects/object_base.html"><code>BaseObject</code></a> (which includes all robots extending from <a href="../reference/robots/robot_base.html"><code>BaseRobot</code></a>!) are <a href="../reference/utils/gym_utils.html#utils.gym_utils.GymObservable"><code>GymObservable</code></a> objects!</li>
</ol>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">draw_bounding_box</span>
</code></pre></div>
<p>This demo loads a door object and banana object, and partially obscures the banana with the door. It generates both "loose" and "tight" bounding boxes (where the latter respects occlusions) for both objects, and dumps them to an image on disk.</p>
<details class="code">
<summary>draw_bounding_box.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span>
<span class="normal"><a href="#__codelineno-20-22">22</a></span>
<span class="normal"><a href="#__codelineno-20-23">23</a></span>
<span class="normal"><a href="#__codelineno-20-24">24</a></span>
<span class="normal"><a href="#__codelineno-20-25">25</a></span>
<span class="normal"><a href="#__codelineno-20-26">26</a></span>
<span class="normal"><a href="#__codelineno-20-27">27</a></span>
<span class="normal"><a href="#__codelineno-20-28">28</a></span>
<span class="normal"><a href="#__codelineno-20-29">29</a></span>
<span class="normal"><a href="#__codelineno-20-30">30</a></span>
<span class="normal"><a href="#__codelineno-20-31">31</a></span>
<span class="normal"><a href="#__codelineno-20-32">32</a></span>
<span class="normal"><a href="#__codelineno-20-33">33</a></span>
<span class="normal"><a href="#__codelineno-20-34">34</a></span>
<span class="normal"><a href="#__codelineno-20-35">35</a></span>
<span class="normal"><a href="#__codelineno-20-36">36</a></span>
<span class="normal"><a href="#__codelineno-20-37">37</a></span>
<span class="normal"><a href="#__codelineno-20-38">38</a></span>
<span class="normal"><a href="#__codelineno-20-39">39</a></span>
<span class="normal"><a href="#__codelineno-20-40">40</a></span>
<span class="normal"><a href="#__codelineno-20-41">41</a></span>
<span class="normal"><a href="#__codelineno-20-42">42</a></span>
<span class="normal"><a href="#__codelineno-20-43">43</a></span>
<span class="normal"><a href="#__codelineno-20-44">44</a></span>
<span class="normal"><a href="#__codelineno-20-45">45</a></span>
<span class="normal"><a href="#__codelineno-20-46">46</a></span>
<span class="normal"><a href="#__codelineno-20-47">47</a></span>
<span class="normal"><a href="#__codelineno-20-48">48</a></span>
<span class="normal"><a href="#__codelineno-20-49">49</a></span>
<span class="normal"><a href="#__codelineno-20-50">50</a></span>
<span class="normal"><a href="#__codelineno-20-51">51</a></span>
<span class="normal"><a href="#__codelineno-20-52">52</a></span>
<span class="normal"><a href="#__codelineno-20-53">53</a></span>
<span class="normal"><a href="#__codelineno-20-54">54</a></span>
<span class="normal"><a href="#__codelineno-20-55">55</a></span>
<span class="normal"><a href="#__codelineno-20-56">56</a></span>
<span class="normal"><a href="#__codelineno-20-57">57</a></span>
<span class="normal"><a href="#__codelineno-20-58">58</a></span>
<span class="normal"><a href="#__codelineno-20-59">59</a></span>
<span class="normal"><a href="#__codelineno-20-60">60</a></span>
<span class="normal"><a href="#__codelineno-20-61">61</a></span>
<span class="normal"><a href="#__codelineno-20-62">62</a></span>
<span class="normal"><a href="#__codelineno-20-63">63</a></span>
<span class="normal"><a href="#__codelineno-20-64">64</a></span>
<span class="normal"><a href="#__codelineno-20-65">65</a></span>
<span class="normal"><a href="#__codelineno-20-66">66</a></span>
<span class="normal"><a href="#__codelineno-20-67">67</a></span>
<span class="normal"><a href="#__codelineno-20-68">68</a></span>
<span class="normal"><a href="#__codelineno-20-69">69</a></span>
<span class="normal"><a href="#__codelineno-20-70">70</a></span>
<span class="normal"><a href="#__codelineno-20-71">71</a></span>
<span class="normal"><a href="#__codelineno-20-72">72</a></span>
<span class="normal"><a href="#__codelineno-20-73">73</a></span>
<span class="normal"><a href="#__codelineno-20-74">74</a></span>
<span class="normal"><a href="#__codelineno-20-75">75</a></span>
<span class="normal"><a href="#__codelineno-20-76">76</a></span>
<span class="normal"><a href="#__codelineno-20-77">77</a></span>
<span class="normal"><a href="#__codelineno-20-78">78</a></span>
<span class="normal"><a href="#__codelineno-20-79">79</a></span>
<span class="normal"><a href="#__codelineno-20-80">80</a></span>
<span class="normal"><a href="#__codelineno-20-81">81</a></span>
<span class="normal"><a href="#__codelineno-20-82">82</a></span>
<span class="normal"><a href="#__codelineno-20-83">83</a></span>
<span class="normal"><a href="#__codelineno-20-84">84</a></span>
<span class="normal"><a href="#__codelineno-20-85">85</a></span>
<span class="normal"><a href="#__codelineno-20-86">86</a></span>
<span class="normal"><a href="#__codelineno-20-87">87</a></span>
<span class="normal"><a href="#__codelineno-20-88">88</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="kn">from</span> <span class="nn">omni.isaac.synthetic_utils.visualization</span> <span class="kn">import</span> <span class="n">colorize_bboxes</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="sd">    Shows how to obtain the bounding box of an articulated object.</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="sd">    Draws the bounding box around the loaded object, a cabinet, and writes the visualized image to disk at the</span>
<a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="sd">    current directory named &#39;bbox_2d_[loose / tight]_img.png&#39;.</span>
<a id="__codelineno-20-15" name="__codelineno-20-15"></a>
<a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="sd">    NOTE: In the GUI, bounding boxes can be natively viewed by clicking on the sensor ((*)) icon at the top,</span>
<a id="__codelineno-20-17" name="__codelineno-20-17"></a><span class="sd">    and then selecting the appropriate bounding box modalities, and clicking &quot;Show&quot;. See:</span>
<a id="__codelineno-20-18" name="__codelineno-20-18"></a>
<a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="sd">    https://docs.omniverse.nvidia.com/prod_extensions/prod_extensions/ext_replicator/visualization.html#the-visualizer</span>
<a id="__codelineno-20-20" name="__codelineno-20-20"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-20-21" name="__codelineno-20-21"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-20-22" name="__codelineno-20-22"></a>
<a id="__codelineno-20-23" name="__codelineno-20-23"></a>    <span class="c1"># Specify objects to load</span>
<a id="__codelineno-20-24" name="__codelineno-20-24"></a>    <span class="n">banana_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-20-25" name="__codelineno-20-25"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-20-26" name="__codelineno-20-26"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;banana&quot;</span><span class="p">,</span>
<a id="__codelineno-20-27" name="__codelineno-20-27"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;banana&quot;</span><span class="p">,</span>
<a id="__codelineno-20-28" name="__codelineno-20-28"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;09_0&quot;</span><span class="p">,</span>
<a id="__codelineno-20-29" name="__codelineno-20-29"></a>        <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span>
<a id="__codelineno-20-30" name="__codelineno-20-30"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.906661</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.545106</span><span class="p">,</span>  <span class="mf">0.136824</span><span class="p">],</span>
<a id="__codelineno-20-31" name="__codelineno-20-31"></a>        <span class="n">orientation</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.76040583</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.6494482</span> <span class="p">],</span>
<a id="__codelineno-20-32" name="__codelineno-20-32"></a>    <span class="p">)</span>
<a id="__codelineno-20-33" name="__codelineno-20-33"></a>
<a id="__codelineno-20-34" name="__codelineno-20-34"></a>    <span class="n">door_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-20-35" name="__codelineno-20-35"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-20-36" name="__codelineno-20-36"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;door&quot;</span><span class="p">,</span>
<a id="__codelineno-20-37" name="__codelineno-20-37"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;door&quot;</span><span class="p">,</span>
<a id="__codelineno-20-38" name="__codelineno-20-38"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;8930&quot;</span><span class="p">,</span>
<a id="__codelineno-20-39" name="__codelineno-20-39"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.70000001</span><span class="p">],</span>
<a id="__codelineno-20-40" name="__codelineno-20-40"></a>        <span class="n">orientation</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.38268343</span><span class="p">,</span>  <span class="mf">0.92387953</span><span class="p">],</span>
<a id="__codelineno-20-41" name="__codelineno-20-41"></a>    <span class="p">)</span>
<a id="__codelineno-20-42" name="__codelineno-20-42"></a>
<a id="__codelineno-20-43" name="__codelineno-20-43"></a>    <span class="c1"># Create the scene config to load -- empty scene with a few objects</span>
<a id="__codelineno-20-44" name="__codelineno-20-44"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-20-45" name="__codelineno-20-45"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-20-46" name="__codelineno-20-46"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-20-47" name="__codelineno-20-47"></a>        <span class="p">},</span>
<a id="__codelineno-20-48" name="__codelineno-20-48"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">banana_cfg</span><span class="p">,</span> <span class="n">door_cfg</span><span class="p">],</span>
<a id="__codelineno-20-49" name="__codelineno-20-49"></a>    <span class="p">}</span>
<a id="__codelineno-20-50" name="__codelineno-20-50"></a>
<a id="__codelineno-20-51" name="__codelineno-20-51"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-20-52" name="__codelineno-20-52"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-20-53" name="__codelineno-20-53"></a>
<a id="__codelineno-20-54" name="__codelineno-20-54"></a>    <span class="c1"># Set camera to appropriate viewing pose</span>
<a id="__codelineno-20-55" name="__codelineno-20-55"></a>    <span class="n">cam</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span>
<a id="__codelineno-20-56" name="__codelineno-20-56"></a>    <span class="n">cam</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-20-57" name="__codelineno-20-57"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">4.62785</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.418575</span><span class="p">,</span>  <span class="mf">0.933943</span><span class="p">]),</span>
<a id="__codelineno-20-58" name="__codelineno-20-58"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">0.52196595</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.4231939</span> <span class="p">,</span> <span class="o">-</span><span class="mf">0.46640436</span><span class="p">,</span>  <span class="mf">0.5752612</span> <span class="p">]),</span>
<a id="__codelineno-20-59" name="__codelineno-20-59"></a>    <span class="p">)</span>
<a id="__codelineno-20-60" name="__codelineno-20-60"></a>
<a id="__codelineno-20-61" name="__codelineno-20-61"></a>    <span class="c1"># Add bounding boxes to camera sensor</span>
<a id="__codelineno-20-62" name="__codelineno-20-62"></a>    <span class="n">bbox_modalities</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bbox_3d&quot;</span><span class="p">,</span> <span class="s2">&quot;bbox_2d_loose&quot;</span><span class="p">,</span> <span class="s2">&quot;bbox_2d_tight&quot;</span><span class="p">]</span>
<a id="__codelineno-20-63" name="__codelineno-20-63"></a>    <span class="k">for</span> <span class="n">bbox_modality</span> <span class="ow">in</span> <span class="n">bbox_modalities</span><span class="p">:</span>
<a id="__codelineno-20-64" name="__codelineno-20-64"></a>        <span class="n">cam</span><span class="o">.</span><span class="n">add_modality</span><span class="p">(</span><span class="n">bbox_modality</span><span class="p">)</span>
<a id="__codelineno-20-65" name="__codelineno-20-65"></a>
<a id="__codelineno-20-66" name="__codelineno-20-66"></a>    <span class="c1"># Take a few steps to let objects settle</span>
<a id="__codelineno-20-67" name="__codelineno-20-67"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-20-68" name="__codelineno-20-68"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-20-69" name="__codelineno-20-69"></a>
<a id="__codelineno-20-70" name="__codelineno-20-70"></a>    <span class="c1"># Grab observations from viewer camera and write them to disk</span>
<a id="__codelineno-20-71" name="__codelineno-20-71"></a>    <span class="n">obs</span> <span class="o">=</span> <span class="n">cam</span><span class="o">.</span><span class="n">get_obs</span><span class="p">()</span>
<a id="__codelineno-20-72" name="__codelineno-20-72"></a>
<a id="__codelineno-20-73" name="__codelineno-20-73"></a>    <span class="k">for</span> <span class="n">bbox_modality</span> <span class="ow">in</span> <span class="n">bbox_modalities</span><span class="p">:</span>
<a id="__codelineno-20-74" name="__codelineno-20-74"></a>        <span class="c1"># Print out each of the modalities</span>
<a id="__codelineno-20-75" name="__codelineno-20-75"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Observation modality </span><span class="si">{</span><span class="n">bbox_modality</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
<a id="__codelineno-20-76" name="__codelineno-20-76"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">obs</span><span class="p">[</span><span class="n">bbox_modality</span><span class="p">])</span>
<a id="__codelineno-20-77" name="__codelineno-20-77"></a>
<a id="__codelineno-20-78" name="__codelineno-20-78"></a>        <span class="c1"># Also write the 2d loose bounding box to disk</span>
<a id="__codelineno-20-79" name="__codelineno-20-79"></a>        <span class="k">if</span> <span class="s2">&quot;3d&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bbox_modality</span><span class="p">:</span>
<a id="__codelineno-20-80" name="__codelineno-20-80"></a>            <span class="n">colorized_img</span> <span class="o">=</span> <span class="n">colorize_bboxes</span><span class="p">(</span><span class="n">bboxes_2d_data</span><span class="o">=</span><span class="n">obs</span><span class="p">[</span><span class="n">bbox_modality</span><span class="p">],</span> <span class="n">bboxes_2d_rgb</span><span class="o">=</span><span class="n">obs</span><span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">],</span> <span class="n">num_channels</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-20-81" name="__codelineno-20-81"></a>            <span class="n">plt</span><span class="o">.</span><span class="n">imsave</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bbox_modality</span><span class="si">}</span><span class="s2">_img.png&quot;</span><span class="p">,</span> <span class="n">colorized_img</span><span class="p">)</span>
<a id="__codelineno-20-82" name="__codelineno-20-82"></a>
<a id="__codelineno-20-83" name="__codelineno-20-83"></a>    <span class="c1"># Always close environment down at end</span>
<a id="__codelineno-20-84" name="__codelineno-20-84"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-20-85" name="__codelineno-20-85"></a>
<a id="__codelineno-20-86" name="__codelineno-20-86"></a>
<a id="__codelineno-20-87" name="__codelineno-20-87"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-20-88" name="__codelineno-20-88"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h2 id="object-states">🌡️ <strong>Object States</strong></h2>
<p>These examples showcase <strong><code>OmniGibson</code></strong>'s powerful object states functionality, which captures both individual and relational kinematic and non-kinematic states.</p>
<h3 id="attachment-demo"><strong>Attachment Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to leverage the <code>Attached</code> state</li>
<li>Understanding how to enable objects to be <code>attachable</code></li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">attachment_demo</span>
</code></pre></div>
<p>This demo loads an apple and a fridge, and showcases how they may or may not be attached upon contact based on their assigned attachment types.</p>
<details class="code">
<summary>attachment_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">  1</a></span>
<span class="normal"><a href="#__codelineno-22-2">  2</a></span>
<span class="normal"><a href="#__codelineno-22-3">  3</a></span>
<span class="normal"><a href="#__codelineno-22-4">  4</a></span>
<span class="normal"><a href="#__codelineno-22-5">  5</a></span>
<span class="normal"><a href="#__codelineno-22-6">  6</a></span>
<span class="normal"><a href="#__codelineno-22-7">  7</a></span>
<span class="normal"><a href="#__codelineno-22-8">  8</a></span>
<span class="normal"><a href="#__codelineno-22-9">  9</a></span>
<span class="normal"><a href="#__codelineno-22-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-22-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-22-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-22-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-22-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-22-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-22-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-22-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-22-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-22-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-22-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-22-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-22-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-22-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-22-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-22-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-22-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-22-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-22-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-22-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-22-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-22-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-22-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-22-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-22-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-22-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-22-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-22-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-22-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-22-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-22-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-22-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-22-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-22-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-22-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-22-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-22-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-22-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-22-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-22-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-22-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-22-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-22-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-22-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-22-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-22-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-22-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-22-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-22-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-22-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-22-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-22-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-22-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-22-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-22-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-22-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-22-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-22-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-22-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-22-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-22-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-22-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-22-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-22-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-22-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-22-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-22-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-22-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-22-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-22-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-22-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-22-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-22-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-22-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-22-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-22-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-22-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-22-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-22-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-22-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-22-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-22-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-22-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-22-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-22-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-22-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-22-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-22-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-22-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-22-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-22-100">100</a></span>
<span class="normal"><a href="#__codelineno-22-101">101</a></span>
<span class="normal"><a href="#__codelineno-22-102">102</a></span>
<span class="normal"><a href="#__codelineno-22-103">103</a></span>
<span class="normal"><a href="#__codelineno-22-104">104</a></span>
<span class="normal"><a href="#__codelineno-22-105">105</a></span>
<span class="normal"><a href="#__codelineno-22-106">106</a></span>
<span class="normal"><a href="#__codelineno-22-107">107</a></span>
<span class="normal"><a href="#__codelineno-22-108">108</a></span>
<span class="normal"><a href="#__codelineno-22-109">109</a></span>
<span class="normal"><a href="#__codelineno-22-110">110</a></span>
<span class="normal"><a href="#__codelineno-22-111">111</a></span>
<span class="normal"><a href="#__codelineno-22-112">112</a></span>
<span class="normal"><a href="#__codelineno-22-113">113</a></span>
<span class="normal"><a href="#__codelineno-22-114">114</a></span>
<span class="normal"><a href="#__codelineno-22-115">115</a></span>
<span class="normal"><a href="#__codelineno-22-116">116</a></span>
<span class="normal"><a href="#__codelineno-22-117">117</a></span>
<span class="normal"><a href="#__codelineno-22-118">118</a></span>
<span class="normal"><a href="#__codelineno-22-119">119</a></span>
<span class="normal"><a href="#__codelineno-22-120">120</a></span>
<span class="normal"><a href="#__codelineno-22-121">121</a></span>
<span class="normal"><a href="#__codelineno-22-122">122</a></span>
<span class="normal"><a href="#__codelineno-22-123">123</a></span>
<span class="normal"><a href="#__codelineno-22-124">124</a></span>
<span class="normal"><a href="#__codelineno-22-125">125</a></span>
<span class="normal"><a href="#__codelineno-22-126">126</a></span>
<span class="normal"><a href="#__codelineno-22-127">127</a></span>
<span class="normal"><a href="#__codelineno-22-128">128</a></span>
<span class="normal"><a href="#__codelineno-22-129">129</a></span>
<span class="normal"><a href="#__codelineno-22-130">130</a></span>
<span class="normal"><a href="#__codelineno-22-131">131</a></span>
<span class="normal"><a href="#__codelineno-22-132">132</a></span>
<span class="normal"><a href="#__codelineno-22-133">133</a></span>
<span class="normal"><a href="#__codelineno-22-134">134</a></span>
<span class="normal"><a href="#__codelineno-22-135">135</a></span>
<span class="normal"><a href="#__codelineno-22-136">136</a></span>
<span class="normal"><a href="#__codelineno-22-137">137</a></span>
<span class="normal"><a href="#__codelineno-22-138">138</a></span>
<span class="normal"><a href="#__codelineno-22-139">139</a></span>
<span class="normal"><a href="#__codelineno-22-140">140</a></span>
<span class="normal"><a href="#__codelineno-22-141">141</a></span>
<span class="normal"><a href="#__codelineno-22-142">142</a></span>
<span class="normal"><a href="#__codelineno-22-143">143</a></span>
<span class="normal"><a href="#__codelineno-22-144">144</a></span>
<span class="normal"><a href="#__codelineno-22-145">145</a></span>
<span class="normal"><a href="#__codelineno-22-146">146</a></span>
<span class="normal"><a href="#__codelineno-22-147">147</a></span>
<span class="normal"><a href="#__codelineno-22-148">148</a></span>
<span class="normal"><a href="#__codelineno-22-149">149</a></span>
<span class="normal"><a href="#__codelineno-22-150">150</a></span>
<span class="normal"><a href="#__codelineno-22-151">151</a></span>
<span class="normal"><a href="#__codelineno-22-152">152</a></span>
<span class="normal"><a href="#__codelineno-22-153">153</a></span>
<span class="normal"><a href="#__codelineno-22-154">154</a></span>
<span class="normal"><a href="#__codelineno-22-155">155</a></span>
<span class="normal"><a href="#__codelineno-22-156">156</a></span>
<span class="normal"><a href="#__codelineno-22-157">157</a></span>
<span class="normal"><a href="#__codelineno-22-158">158</a></span>
<span class="normal"><a href="#__codelineno-22-159">159</a></span>
<span class="normal"><a href="#__codelineno-22-160">160</a></span>
<span class="normal"><a href="#__codelineno-22-161">161</a></span>
<span class="normal"><a href="#__codelineno-22-162">162</a></span>
<span class="normal"><a href="#__codelineno-22-163">163</a></span>
<span class="normal"><a href="#__codelineno-22-164">164</a></span>
<span class="normal"><a href="#__codelineno-22-165">165</a></span>
<span class="normal"><a href="#__codelineno-22-166">166</a></span>
<span class="normal"><a href="#__codelineno-22-167">167</a></span>
<span class="normal"><a href="#__codelineno-22-168">168</a></span>
<span class="normal"><a href="#__codelineno-22-169">169</a></span>
<span class="normal"><a href="#__codelineno-22-170">170</a></span>
<span class="normal"><a href="#__codelineno-22-171">171</a></span>
<span class="normal"><a href="#__codelineno-22-172">172</a></span>
<span class="normal"><a href="#__codelineno-22-173">173</a></span>
<span class="normal"><a href="#__codelineno-22-174">174</a></span>
<span class="normal"><a href="#__codelineno-22-175">175</a></span>
<span class="normal"><a href="#__codelineno-22-176">176</a></span>
<span class="normal"><a href="#__codelineno-22-177">177</a></span>
<span class="normal"><a href="#__codelineno-22-178">178</a></span>
<span class="normal"><a href="#__codelineno-22-179">179</a></span>
<span class="normal"><a href="#__codelineno-22-180">180</a></span>
<span class="normal"><a href="#__codelineno-22-181">181</a></span>
<span class="normal"><a href="#__codelineno-22-182">182</a></span>
<span class="normal"><a href="#__codelineno-22-183">183</a></span>
<span class="normal"><a href="#__codelineno-22-184">184</a></span>
<span class="normal"><a href="#__codelineno-22-185">185</a></span>
<span class="normal"><a href="#__codelineno-22-186">186</a></span>
<span class="normal"><a href="#__codelineno-22-187">187</a></span>
<span class="normal"><a href="#__codelineno-22-188">188</a></span>
<span class="normal"><a href="#__codelineno-22-189">189</a></span>
<span class="normal"><a href="#__codelineno-22-190">190</a></span>
<span class="normal"><a href="#__codelineno-22-191">191</a></span>
<span class="normal"><a href="#__codelineno-22-192">192</a></span>
<span class="normal"><a href="#__codelineno-22-193">193</a></span>
<span class="normal"><a href="#__codelineno-22-194">194</a></span>
<span class="normal"><a href="#__codelineno-22-195">195</a></span>
<span class="normal"><a href="#__codelineno-22-196">196</a></span>
<span class="normal"><a href="#__codelineno-22-197">197</a></span>
<span class="normal"><a href="#__codelineno-22-198">198</a></span>
<span class="normal"><a href="#__codelineno-22-199">199</a></span>
<span class="normal"><a href="#__codelineno-22-200">200</a></span>
<span class="normal"><a href="#__codelineno-22-201">201</a></span>
<span class="normal"><a href="#__codelineno-22-202">202</a></span>
<span class="normal"><a href="#__codelineno-22-203">203</a></span>
<span class="normal"><a href="#__codelineno-22-204">204</a></span>
<span class="normal"><a href="#__codelineno-22-205">205</a></span>
<span class="normal"><a href="#__codelineno-22-206">206</a></span>
<span class="normal"><a href="#__codelineno-22-207">207</a></span>
<span class="normal"><a href="#__codelineno-22-208">208</a></span>
<span class="normal"><a href="#__codelineno-22-209">209</a></span>
<span class="normal"><a href="#__codelineno-22-210">210</a></span>
<span class="normal"><a href="#__codelineno-22-211">211</a></span>
<span class="normal"><a href="#__codelineno-22-212">212</a></span>
<span class="normal"><a href="#__codelineno-22-213">213</a></span>
<span class="normal"><a href="#__codelineno-22-214">214</a></span>
<span class="normal"><a href="#__codelineno-22-215">215</a></span>
<span class="normal"><a href="#__codelineno-22-216">216</a></span>
<span class="normal"><a href="#__codelineno-22-217">217</a></span>
<span class="normal"><a href="#__codelineno-22-218">218</a></span>
<span class="normal"><a href="#__codelineno-22-219">219</a></span>
<span class="normal"><a href="#__codelineno-22-220">220</a></span>
<span class="normal"><a href="#__codelineno-22-221">221</a></span>
<span class="normal"><a href="#__codelineno-22-222">222</a></span>
<span class="normal"><a href="#__codelineno-22-223">223</a></span>
<span class="normal"><a href="#__codelineno-22-224">224</a></span>
<span class="normal"><a href="#__codelineno-22-225">225</a></span>
<span class="normal"><a href="#__codelineno-22-226">226</a></span>
<span class="normal"><a href="#__codelineno-22-227">227</a></span>
<span class="normal"><a href="#__codelineno-22-228">228</a></span>
<span class="normal"><a href="#__codelineno-22-229">229</a></span>
<span class="normal"><a href="#__codelineno-22-230">230</a></span>
<span class="normal"><a href="#__codelineno-22-231">231</a></span>
<span class="normal"><a href="#__codelineno-22-232">232</a></span>
<span class="normal"><a href="#__codelineno-22-233">233</a></span>
<span class="normal"><a href="#__codelineno-22-234">234</a></span>
<span class="normal"><a href="#__codelineno-22-235">235</a></span>
<span class="normal"><a href="#__codelineno-22-236">236</a></span>
<span class="normal"><a href="#__codelineno-22-237">237</a></span>
<span class="normal"><a href="#__codelineno-22-238">238</a></span>
<span class="normal"><a href="#__codelineno-22-239">239</a></span>
<span class="normal"><a href="#__codelineno-22-240">240</a></span>
<span class="normal"><a href="#__codelineno-22-241">241</a></span>
<span class="normal"><a href="#__codelineno-22-242">242</a></span>
<span class="normal"><a href="#__codelineno-22-243">243</a></span>
<span class="normal"><a href="#__codelineno-22-244">244</a></span>
<span class="normal"><a href="#__codelineno-22-245">245</a></span>
<span class="normal"><a href="#__codelineno-22-246">246</a></span>
<span class="normal"><a href="#__codelineno-22-247">247</a></span>
<span class="normal"><a href="#__codelineno-22-248">248</a></span>
<span class="normal"><a href="#__codelineno-22-249">249</a></span>
<span class="normal"><a href="#__codelineno-22-250">250</a></span>
<span class="normal"><a href="#__codelineno-22-251">251</a></span>
<span class="normal"><a href="#__codelineno-22-252">252</a></span>
<span class="normal"><a href="#__codelineno-22-253">253</a></span>
<span class="normal"><a href="#__codelineno-22-254">254</a></span>
<span class="normal"><a href="#__codelineno-22-255">255</a></span>
<span class="normal"><a href="#__codelineno-22-256">256</a></span>
<span class="normal"><a href="#__codelineno-22-257">257</a></span>
<span class="normal"><a href="#__codelineno-22-258">258</a></span>
<span class="normal"><a href="#__codelineno-22-259">259</a></span>
<span class="normal"><a href="#__codelineno-22-260">260</a></span>
<span class="normal"><a href="#__codelineno-22-261">261</a></span>
<span class="normal"><a href="#__codelineno-22-262">262</a></span>
<span class="normal"><a href="#__codelineno-22-263">263</a></span>
<span class="normal"><a href="#__codelineno-22-264">264</a></span>
<span class="normal"><a href="#__codelineno-22-265">265</a></span>
<span class="normal"><a href="#__codelineno-22-266">266</a></span>
<span class="normal"><a href="#__codelineno-22-267">267</a></span>
<span class="normal"><a href="#__codelineno-22-268">268</a></span>
<span class="normal"><a href="#__codelineno-22-269">269</a></span>
<span class="normal"><a href="#__codelineno-22-270">270</a></span>
<span class="normal"><a href="#__codelineno-22-271">271</a></span>
<span class="normal"><a href="#__codelineno-22-272">272</a></span>
<span class="normal"><a href="#__codelineno-22-273">273</a></span>
<span class="normal"><a href="#__codelineno-22-274">274</a></span>
<span class="normal"><a href="#__codelineno-22-275">275</a></span>
<span class="normal"><a href="#__codelineno-22-276">276</a></span>
<span class="normal"><a href="#__codelineno-22-277">277</a></span>
<span class="normal"><a href="#__codelineno-22-278">278</a></span>
<span class="normal"><a href="#__codelineno-22-279">279</a></span>
<span class="normal"><a href="#__codelineno-22-280">280</a></span>
<span class="normal"><a href="#__codelineno-22-281">281</a></span>
<span class="normal"><a href="#__codelineno-22-282">282</a></span>
<span class="normal"><a href="#__codelineno-22-283">283</a></span>
<span class="normal"><a href="#__codelineno-22-284">284</a></span>
<span class="normal"><a href="#__codelineno-22-285">285</a></span>
<span class="normal"><a href="#__codelineno-22-286">286</a></span>
<span class="normal"><a href="#__codelineno-22-287">287</a></span>
<span class="normal"><a href="#__codelineno-22-288">288</a></span>
<span class="normal"><a href="#__codelineno-22-289">289</a></span>
<span class="normal"><a href="#__codelineno-22-290">290</a></span>
<span class="normal"><a href="#__codelineno-22-291">291</a></span>
<span class="normal"><a href="#__codelineno-22-292">292</a></span>
<span class="normal"><a href="#__codelineno-22-293">293</a></span>
<span class="normal"><a href="#__codelineno-22-294">294</a></span>
<span class="normal"><a href="#__codelineno-22-295">295</a></span>
<span class="normal"><a href="#__codelineno-22-296">296</a></span>
<span class="normal"><a href="#__codelineno-22-297">297</a></span>
<span class="normal"><a href="#__codelineno-22-298">298</a></span>
<span class="normal"><a href="#__codelineno-22-299">299</a></span>
<span class="normal"><a href="#__codelineno-22-300">300</a></span>
<span class="normal"><a href="#__codelineno-22-301">301</a></span>
<span class="normal"><a href="#__codelineno-22-302">302</a></span>
<span class="normal"><a href="#__codelineno-22-303">303</a></span>
<span class="normal"><a href="#__codelineno-22-304">304</a></span>
<span class="normal"><a href="#__codelineno-22-305">305</a></span>
<span class="normal"><a href="#__codelineno-22-306">306</a></span>
<span class="normal"><a href="#__codelineno-22-307">307</a></span>
<span class="normal"><a href="#__codelineno-22-308">308</a></span>
<span class="normal"><a href="#__codelineno-22-309">309</a></span>
<span class="normal"><a href="#__codelineno-22-310">310</a></span>
<span class="normal"><a href="#__codelineno-22-311">311</a></span>
<span class="normal"><a href="#__codelineno-22-312">312</a></span>
<span class="normal"><a href="#__codelineno-22-313">313</a></span>
<span class="normal"><a href="#__codelineno-22-314">314</a></span>
<span class="normal"><a href="#__codelineno-22-315">315</a></span>
<span class="normal"><a href="#__codelineno-22-316">316</a></span>
<span class="normal"><a href="#__codelineno-22-317">317</a></span>
<span class="normal"><a href="#__codelineno-22-318">318</a></span>
<span class="normal"><a href="#__codelineno-22-319">319</a></span>
<span class="normal"><a href="#__codelineno-22-320">320</a></span>
<span class="normal"><a href="#__codelineno-22-321">321</a></span>
<span class="normal"><a href="#__codelineno-22-322">322</a></span>
<span class="normal"><a href="#__codelineno-22-323">323</a></span>
<span class="normal"><a href="#__codelineno-22-324">324</a></span>
<span class="normal"><a href="#__codelineno-22-325">325</a></span>
<span class="normal"><a href="#__codelineno-22-326">326</a></span>
<span class="normal"><a href="#__codelineno-22-327">327</a></span>
<span class="normal"><a href="#__codelineno-22-328">328</a></span>
<span class="normal"><a href="#__codelineno-22-329">329</a></span>
<span class="normal"><a href="#__codelineno-22-330">330</a></span>
<span class="normal"><a href="#__codelineno-22-331">331</a></span>
<span class="normal"><a href="#__codelineno-22-332">332</a></span>
<span class="normal"><a href="#__codelineno-22-333">333</a></span>
<span class="normal"><a href="#__codelineno-22-334">334</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="kn">import</span> <span class="nn">yaml</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="kn">from</span> <span class="nn">omnigibson.object_states.attachment</span> <span class="kn">import</span> <span class="n">AttachmentType</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="kn">from</span> <span class="nn">omnigibson.object_states</span> <span class="kn">import</span> <span class="n">Attached</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="c1"># Make sure object states are enabled and global contact reporting is enabled</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_GLOBAL_CONTACT_REPORTING</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><span class="k">def</span> <span class="nf">setup_scene_for_abilities</span><span class="p">(</span><span class="n">abilities1</span><span class="p">,</span> <span class="n">abilities2</span><span class="p">):</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a>    <span class="c1"># Make sure simulation is stopped</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a>
<a id="__codelineno-22-20" name="__codelineno-22-20"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">og</span><span class="o">.</span><span class="n">example_config_path</span><span class="si">}</span><span class="s2">/default_cfg.yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">),</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span>
<a id="__codelineno-22-21" name="__codelineno-22-21"></a>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a>    <span class="c1"># Add objects that we want to create</span>
<a id="__codelineno-22-23" name="__codelineno-22-23"></a>    <span class="n">light_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-22-24" name="__codelineno-22-24"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;LightObject&quot;</span><span class="p">,</span>
<a id="__codelineno-22-25" name="__codelineno-22-25"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;light&quot;</span><span class="p">,</span>
<a id="__codelineno-22-26" name="__codelineno-22-26"></a>        <span class="n">light_type</span><span class="o">=</span><span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-22-27" name="__codelineno-22-27"></a>        <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-22-28" name="__codelineno-22-28"></a>        <span class="n">intensity</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span>
<a id="__codelineno-22-29" name="__codelineno-22-29"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<a id="__codelineno-22-30" name="__codelineno-22-30"></a>    <span class="p">)</span>
<a id="__codelineno-22-31" name="__codelineno-22-31"></a>
<a id="__codelineno-22-32" name="__codelineno-22-32"></a>    <span class="n">apple_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-22-33" name="__codelineno-22-33"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-22-34" name="__codelineno-22-34"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span>
<a id="__codelineno-22-35" name="__codelineno-22-35"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span>
<a id="__codelineno-22-36" name="__codelineno-22-36"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;00_0&quot;</span><span class="p">,</span>
<a id="__codelineno-22-37" name="__codelineno-22-37"></a>        <span class="n">abilities</span><span class="o">=</span><span class="n">abilities1</span><span class="p">,</span>
<a id="__codelineno-22-38" name="__codelineno-22-38"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">],</span>
<a id="__codelineno-22-39" name="__codelineno-22-39"></a>    <span class="p">)</span>
<a id="__codelineno-22-40" name="__codelineno-22-40"></a>
<a id="__codelineno-22-41" name="__codelineno-22-41"></a>    <span class="n">fridge_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-22-42" name="__codelineno-22-42"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-22-43" name="__codelineno-22-43"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fridge&quot;</span><span class="p">,</span>
<a id="__codelineno-22-44" name="__codelineno-22-44"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;fridge&quot;</span><span class="p">,</span>
<a id="__codelineno-22-45" name="__codelineno-22-45"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;12252&quot;</span><span class="p">,</span>
<a id="__codelineno-22-46" name="__codelineno-22-46"></a>        <span class="n">abilities</span><span class="o">=</span><span class="n">abilities2</span><span class="p">,</span>
<a id="__codelineno-22-47" name="__codelineno-22-47"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
<a id="__codelineno-22-48" name="__codelineno-22-48"></a>    <span class="p">)</span>
<a id="__codelineno-22-49" name="__codelineno-22-49"></a>
<a id="__codelineno-22-50" name="__codelineno-22-50"></a>    <span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">light_cfg</span><span class="p">,</span> <span class="n">apple_cfg</span><span class="p">,</span> <span class="n">fridge_cfg</span><span class="p">]</span>
<a id="__codelineno-22-51" name="__codelineno-22-51"></a>
<a id="__codelineno-22-52" name="__codelineno-22-52"></a>    <span class="c1"># Recreate the environment (this will automatically override the old environment instance)</span>
<a id="__codelineno-22-53" name="__codelineno-22-53"></a>    <span class="c1"># We load the default config, which is simply an Scene with no objects loaded in by default</span>
<a id="__codelineno-22-54" name="__codelineno-22-54"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<a id="__codelineno-22-55" name="__codelineno-22-55"></a>
<a id="__codelineno-22-56" name="__codelineno-22-56"></a>    <span class="c1"># Grab apple and fridge</span>
<a id="__codelineno-22-57" name="__codelineno-22-57"></a>    <span class="n">apple</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;apple&quot;</span><span class="p">)</span>
<a id="__codelineno-22-58" name="__codelineno-22-58"></a>    <span class="n">fridge</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;fridge&quot;</span><span class="p">)</span>
<a id="__codelineno-22-59" name="__codelineno-22-59"></a>
<a id="__codelineno-22-60" name="__codelineno-22-60"></a>    <span class="c1"># Set viewer camera pose</span>
<a id="__codelineno-22-61" name="__codelineno-22-61"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-22-62" name="__codelineno-22-62"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.972333</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0899</span>  <span class="p">,</span>  <span class="mf">1.0654</span>  <span class="p">]),</span>
<a id="__codelineno-22-63" name="__codelineno-22-63"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">0.60682517</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.24656188</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.28443909</span><span class="p">,</span>  <span class="mf">0.70004632</span><span class="p">]),</span>
<a id="__codelineno-22-64" name="__codelineno-22-64"></a>    <span class="p">)</span>
<a id="__codelineno-22-65" name="__codelineno-22-65"></a>
<a id="__codelineno-22-66" name="__codelineno-22-66"></a>    <span class="c1"># Take a few steps</span>
<a id="__codelineno-22-67" name="__codelineno-22-67"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<a id="__codelineno-22-68" name="__codelineno-22-68"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-69" name="__codelineno-22-69"></a>
<a id="__codelineno-22-70" name="__codelineno-22-70"></a>    <span class="k">return</span> <span class="n">env</span><span class="p">,</span> <span class="n">apple</span><span class="p">,</span> <span class="n">fridge</span>
<a id="__codelineno-22-71" name="__codelineno-22-71"></a>
<a id="__codelineno-22-72" name="__codelineno-22-72"></a>
<a id="__codelineno-22-73" name="__codelineno-22-73"></a><span class="k">def</span> <span class="nf">demo_sticky_attachment</span><span class="p">():</span>
<a id="__codelineno-22-74" name="__codelineno-22-74"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-75" name="__codelineno-22-75"></a>    <span class="c1"># Sticky attachment</span>
<a id="__codelineno-22-76" name="__codelineno-22-76"></a>    <span class="c1">#   can attach if touching and at least one object has the sticky attachment type.</span>
<a id="__codelineno-22-77" name="__codelineno-22-77"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-78" name="__codelineno-22-78"></a>    <span class="n">env</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">setup_scene_for_abilities</span><span class="p">(</span>
<a id="__codelineno-22-79" name="__codelineno-22-79"></a>        <span class="n">abilities1</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">STICKY</span><span class="p">}},</span>
<a id="__codelineno-22-80" name="__codelineno-22-80"></a>        <span class="n">abilities2</span><span class="o">=</span><span class="p">{})</span>
<a id="__codelineno-22-81" name="__codelineno-22-81"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-82" name="__codelineno-22-82"></a>
<a id="__codelineno-22-83" name="__codelineno-22-83"></a>    <span class="c1"># Obj1 moves towards obj2 and they are attached together.</span>
<a id="__codelineno-22-84" name="__codelineno-22-84"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
<a id="__codelineno-22-85" name="__codelineno-22-85"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-86" name="__codelineno-22-86"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<a id="__codelineno-22-87" name="__codelineno-22-87"></a>
<a id="__codelineno-22-88" name="__codelineno-22-88"></a>    <span class="k">assert</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-89" name="__codelineno-22-89"></a>
<a id="__codelineno-22-90" name="__codelineno-22-90"></a>    <span class="c1"># Apply a large force to obj1 but the two objects cannot move much because obj2 is heavy.</span>
<a id="__codelineno-22-91" name="__codelineno-22-91"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">]))</span>
<a id="__codelineno-22-92" name="__codelineno-22-92"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-93" name="__codelineno-22-93"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-94" name="__codelineno-22-94"></a>
<a id="__codelineno-22-95" name="__codelineno-22-95"></a>    <span class="c1"># Unattach obj1 and obj2.</span>
<a id="__codelineno-22-96" name="__codelineno-22-96"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-22-97" name="__codelineno-22-97"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-98" name="__codelineno-22-98"></a>
<a id="__codelineno-22-99" name="__codelineno-22-99"></a>    <span class="c1"># Obj1 moves away from obj2.</span>
<a id="__codelineno-22-100" name="__codelineno-22-100"></a>    <span class="c1"># obj1.set_linear_velocity(velocity=np.array([-2.0, 0, 1.0]))</span>
<a id="__codelineno-22-101" name="__codelineno-22-101"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-102" name="__codelineno-22-102"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-103" name="__codelineno-22-103"></a>
<a id="__codelineno-22-104" name="__codelineno-22-104"></a>
<a id="__codelineno-22-105" name="__codelineno-22-105"></a><span class="k">def</span> <span class="nf">demo_symmetric_attachment</span><span class="p">():</span>
<a id="__codelineno-22-106" name="__codelineno-22-106"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-107" name="__codelineno-22-107"></a>    <span class="c1"># Symmetric attachment</span>
<a id="__codelineno-22-108" name="__codelineno-22-108"></a>    <span class="c1">#   can attach if touching and both objects have the symmetric attachment type and the same attachment category</span>
<a id="__codelineno-22-109" name="__codelineno-22-109"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-110" name="__codelineno-22-110"></a>    <span class="n">env</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">setup_scene_for_abilities</span><span class="p">(</span>
<a id="__codelineno-22-111" name="__codelineno-22-111"></a>        <span class="n">abilities1</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">SYMMETRIC</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;magnet&quot;</span><span class="p">}},</span>
<a id="__codelineno-22-112" name="__codelineno-22-112"></a>        <span class="n">abilities2</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">SYMMETRIC</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;magnet&quot;</span><span class="p">}})</span>
<a id="__codelineno-22-113" name="__codelineno-22-113"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-114" name="__codelineno-22-114"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-115" name="__codelineno-22-115"></a>
<a id="__codelineno-22-116" name="__codelineno-22-116"></a>    <span class="c1"># Obj1 moves towards obj2 and they are attached together.</span>
<a id="__codelineno-22-117" name="__codelineno-22-117"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
<a id="__codelineno-22-118" name="__codelineno-22-118"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-119" name="__codelineno-22-119"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-120" name="__codelineno-22-120"></a>    <span class="k">assert</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-121" name="__codelineno-22-121"></a>    <span class="k">assert</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>
<a id="__codelineno-22-122" name="__codelineno-22-122"></a>
<a id="__codelineno-22-123" name="__codelineno-22-123"></a>    <span class="c1"># Apply a large force to obj1 but the two objects cannot move much because obj2 is heavy.</span>
<a id="__codelineno-22-124" name="__codelineno-22-124"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">]))</span>
<a id="__codelineno-22-125" name="__codelineno-22-125"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-126" name="__codelineno-22-126"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-127" name="__codelineno-22-127"></a>
<a id="__codelineno-22-128" name="__codelineno-22-128"></a>    <span class="c1"># Unattach obj1 and obj2.</span>
<a id="__codelineno-22-129" name="__codelineno-22-129"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-22-130" name="__codelineno-22-130"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-131" name="__codelineno-22-131"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>
<a id="__codelineno-22-132" name="__codelineno-22-132"></a>
<a id="__codelineno-22-133" name="__codelineno-22-133"></a>    <span class="c1"># Obj1 moves away from obj2.</span>
<a id="__codelineno-22-134" name="__codelineno-22-134"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]))</span>
<a id="__codelineno-22-135" name="__codelineno-22-135"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-136" name="__codelineno-22-136"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-137" name="__codelineno-22-137"></a>
<a id="__codelineno-22-138" name="__codelineno-22-138"></a>
<a id="__codelineno-22-139" name="__codelineno-22-139"></a><span class="k">def</span> <span class="nf">demo_failed_symmetric_attachment_missing_symmetric</span><span class="p">():</span>
<a id="__codelineno-22-140" name="__codelineno-22-140"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-141" name="__codelineno-22-141"></a>    <span class="c1"># Symmetric attachment - FAIL because only 1 object has the symmetric attachment type</span>
<a id="__codelineno-22-142" name="__codelineno-22-142"></a>    <span class="c1">#   can attach if touching and both objects have the symmetric attachment type and the same attachment category</span>
<a id="__codelineno-22-143" name="__codelineno-22-143"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-144" name="__codelineno-22-144"></a>    <span class="n">env</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">setup_scene_for_abilities</span><span class="p">(</span>
<a id="__codelineno-22-145" name="__codelineno-22-145"></a>        <span class="n">abilities1</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">SYMMETRIC</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;magnet&quot;</span><span class="p">}},</span>
<a id="__codelineno-22-146" name="__codelineno-22-146"></a>        <span class="n">abilities2</span><span class="o">=</span><span class="p">{})</span>
<a id="__codelineno-22-147" name="__codelineno-22-147"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-148" name="__codelineno-22-148"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-149" name="__codelineno-22-149"></a>
<a id="__codelineno-22-150" name="__codelineno-22-150"></a>    <span class="c1"># Obj1 moves towards obj2 but they are NOT attached together.</span>
<a id="__codelineno-22-151" name="__codelineno-22-151"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
<a id="__codelineno-22-152" name="__codelineno-22-152"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-153" name="__codelineno-22-153"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-154" name="__codelineno-22-154"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-155" name="__codelineno-22-155"></a>
<a id="__codelineno-22-156" name="__codelineno-22-156"></a>    <span class="c1"># Obj1 moves away from obj2.</span>
<a id="__codelineno-22-157" name="__codelineno-22-157"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]))</span>
<a id="__codelineno-22-158" name="__codelineno-22-158"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-159" name="__codelineno-22-159"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-160" name="__codelineno-22-160"></a>
<a id="__codelineno-22-161" name="__codelineno-22-161"></a>
<a id="__codelineno-22-162" name="__codelineno-22-162"></a><span class="k">def</span> <span class="nf">demo_failed_symmetric_attachment_diff_categories</span><span class="p">():</span>
<a id="__codelineno-22-163" name="__codelineno-22-163"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-164" name="__codelineno-22-164"></a>    <span class="c1"># Symmetric attachment - FAIL because the two objects have different attachment category</span>
<a id="__codelineno-22-165" name="__codelineno-22-165"></a>    <span class="c1">#   can attach if touching and both objects have the symmetric attachment type and the same attachment category</span>
<a id="__codelineno-22-166" name="__codelineno-22-166"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-167" name="__codelineno-22-167"></a>    <span class="n">env</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">setup_scene_for_abilities</span><span class="p">(</span>
<a id="__codelineno-22-168" name="__codelineno-22-168"></a>        <span class="n">abilities1</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">SYMMETRIC</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;magnet&quot;</span><span class="p">}},</span>
<a id="__codelineno-22-169" name="__codelineno-22-169"></a>        <span class="n">abilities2</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">SYMMETRIC</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;velcro&quot;</span><span class="p">}})</span>
<a id="__codelineno-22-170" name="__codelineno-22-170"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-171" name="__codelineno-22-171"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-172" name="__codelineno-22-172"></a>
<a id="__codelineno-22-173" name="__codelineno-22-173"></a>    <span class="c1"># Obj1 moves towards obj2 but they are NOT attached together.</span>
<a id="__codelineno-22-174" name="__codelineno-22-174"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
<a id="__codelineno-22-175" name="__codelineno-22-175"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-176" name="__codelineno-22-176"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-177" name="__codelineno-22-177"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-178" name="__codelineno-22-178"></a>
<a id="__codelineno-22-179" name="__codelineno-22-179"></a>    <span class="c1"># Obj1 moves away from obj2.</span>
<a id="__codelineno-22-180" name="__codelineno-22-180"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]))</span>
<a id="__codelineno-22-181" name="__codelineno-22-181"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-182" name="__codelineno-22-182"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-183" name="__codelineno-22-183"></a>
<a id="__codelineno-22-184" name="__codelineno-22-184"></a>
<a id="__codelineno-22-185" name="__codelineno-22-185"></a><span class="k">def</span> <span class="nf">demo_male_female_attachment</span><span class="p">():</span>
<a id="__codelineno-22-186" name="__codelineno-22-186"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-187" name="__codelineno-22-187"></a>    <span class="c1"># Male / female attachment</span>
<a id="__codelineno-22-188" name="__codelineno-22-188"></a>    <span class="c1">#   can attach if touching, both have the opposite end (male / female) but the same attachment category</span>
<a id="__codelineno-22-189" name="__codelineno-22-189"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-190" name="__codelineno-22-190"></a>    <span class="n">env</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">setup_scene_for_abilities</span><span class="p">(</span>
<a id="__codelineno-22-191" name="__codelineno-22-191"></a>        <span class="n">abilities1</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">MALE</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;usb&quot;</span><span class="p">}},</span>
<a id="__codelineno-22-192" name="__codelineno-22-192"></a>        <span class="n">abilities2</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">FEMALE</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;usb&quot;</span><span class="p">}})</span>
<a id="__codelineno-22-193" name="__codelineno-22-193"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-194" name="__codelineno-22-194"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-195" name="__codelineno-22-195"></a>
<a id="__codelineno-22-196" name="__codelineno-22-196"></a>    <span class="c1"># Obj1 moves towards obj2 and they are attached together.</span>
<a id="__codelineno-22-197" name="__codelineno-22-197"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
<a id="__codelineno-22-198" name="__codelineno-22-198"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-199" name="__codelineno-22-199"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-200" name="__codelineno-22-200"></a>    <span class="k">assert</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-201" name="__codelineno-22-201"></a>    <span class="k">assert</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>
<a id="__codelineno-22-202" name="__codelineno-22-202"></a>
<a id="__codelineno-22-203" name="__codelineno-22-203"></a>    <span class="c1"># Apply a large force to obj1 but the two objects cannot move much because obj2 is heavy.</span>
<a id="__codelineno-22-204" name="__codelineno-22-204"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">]))</span>
<a id="__codelineno-22-205" name="__codelineno-22-205"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-206" name="__codelineno-22-206"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-207" name="__codelineno-22-207"></a>
<a id="__codelineno-22-208" name="__codelineno-22-208"></a>    <span class="c1"># Unattach obj1 and obj2.</span>
<a id="__codelineno-22-209" name="__codelineno-22-209"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-22-210" name="__codelineno-22-210"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-211" name="__codelineno-22-211"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>
<a id="__codelineno-22-212" name="__codelineno-22-212"></a>
<a id="__codelineno-22-213" name="__codelineno-22-213"></a>    <span class="c1"># Obj1 moves away from obj2.</span>
<a id="__codelineno-22-214" name="__codelineno-22-214"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]))</span>
<a id="__codelineno-22-215" name="__codelineno-22-215"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-216" name="__codelineno-22-216"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-217" name="__codelineno-22-217"></a>
<a id="__codelineno-22-218" name="__codelineno-22-218"></a>
<a id="__codelineno-22-219" name="__codelineno-22-219"></a><span class="k">def</span> <span class="nf">demo_failed_male_female_attachment_missing_opposite_end</span><span class="p">():</span>
<a id="__codelineno-22-220" name="__codelineno-22-220"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-221" name="__codelineno-22-221"></a>    <span class="c1"># Male / female attachment - FAIL because both objects are male.</span>
<a id="__codelineno-22-222" name="__codelineno-22-222"></a>    <span class="c1">#   can attach if touching, both have the opposite end (male / female) but the same attachment category</span>
<a id="__codelineno-22-223" name="__codelineno-22-223"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-224" name="__codelineno-22-224"></a>    <span class="n">env</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">setup_scene_for_abilities</span><span class="p">(</span>
<a id="__codelineno-22-225" name="__codelineno-22-225"></a>        <span class="n">abilities1</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">MALE</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;usb&quot;</span><span class="p">}},</span>
<a id="__codelineno-22-226" name="__codelineno-22-226"></a>        <span class="n">abilities2</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">MALE</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;usb&quot;</span><span class="p">}})</span>
<a id="__codelineno-22-227" name="__codelineno-22-227"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-228" name="__codelineno-22-228"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-229" name="__codelineno-22-229"></a>
<a id="__codelineno-22-230" name="__codelineno-22-230"></a>    <span class="c1"># Obj1 moves towards obj2 and but they are NOT attached together.</span>
<a id="__codelineno-22-231" name="__codelineno-22-231"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
<a id="__codelineno-22-232" name="__codelineno-22-232"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-233" name="__codelineno-22-233"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-234" name="__codelineno-22-234"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-235" name="__codelineno-22-235"></a>
<a id="__codelineno-22-236" name="__codelineno-22-236"></a>    <span class="c1"># Obj1 moves away from obj2.</span>
<a id="__codelineno-22-237" name="__codelineno-22-237"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]))</span>
<a id="__codelineno-22-238" name="__codelineno-22-238"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-239" name="__codelineno-22-239"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-240" name="__codelineno-22-240"></a>
<a id="__codelineno-22-241" name="__codelineno-22-241"></a>
<a id="__codelineno-22-242" name="__codelineno-22-242"></a><span class="k">def</span> <span class="nf">demo_failed_male_female_attachment_diff_categories</span><span class="p">():</span>
<a id="__codelineno-22-243" name="__codelineno-22-243"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-244" name="__codelineno-22-244"></a>    <span class="c1"># Male / female attachment - FAIL because the two objects have different attachment category</span>
<a id="__codelineno-22-245" name="__codelineno-22-245"></a>    <span class="c1">#   can attach if touching, both have the opposite end (male / female) but the same attachment category</span>
<a id="__codelineno-22-246" name="__codelineno-22-246"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-247" name="__codelineno-22-247"></a>    <span class="n">env</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">setup_scene_for_abilities</span><span class="p">(</span>
<a id="__codelineno-22-248" name="__codelineno-22-248"></a>        <span class="n">abilities1</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">MALE</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;usb&quot;</span><span class="p">}},</span>
<a id="__codelineno-22-249" name="__codelineno-22-249"></a>        <span class="n">abilities2</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">FEMALE</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;hdmi&quot;</span><span class="p">}})</span>
<a id="__codelineno-22-250" name="__codelineno-22-250"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-251" name="__codelineno-22-251"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-252" name="__codelineno-22-252"></a>
<a id="__codelineno-22-253" name="__codelineno-22-253"></a>    <span class="c1"># Obj1 moves towards obj2 and but they are NOT attached together.</span>
<a id="__codelineno-22-254" name="__codelineno-22-254"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
<a id="__codelineno-22-255" name="__codelineno-22-255"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-256" name="__codelineno-22-256"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-257" name="__codelineno-22-257"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-258" name="__codelineno-22-258"></a>
<a id="__codelineno-22-259" name="__codelineno-22-259"></a>    <span class="c1"># Obj1 moves away from obj2.</span>
<a id="__codelineno-22-260" name="__codelineno-22-260"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]))</span>
<a id="__codelineno-22-261" name="__codelineno-22-261"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-262" name="__codelineno-22-262"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-263" name="__codelineno-22-263"></a>
<a id="__codelineno-22-264" name="__codelineno-22-264"></a>
<a id="__codelineno-22-265" name="__codelineno-22-265"></a><span class="k">def</span> <span class="nf">demo_male_female_attachment_dump_load</span><span class="p">():</span>
<a id="__codelineno-22-266" name="__codelineno-22-266"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-267" name="__codelineno-22-267"></a>    <span class="c1"># Male / female attachment with dump_state and load_state</span>
<a id="__codelineno-22-268" name="__codelineno-22-268"></a>    <span class="c1">#   can attach if touching, both have the opposite end (male / female) but the same attachment category</span>
<a id="__codelineno-22-269" name="__codelineno-22-269"></a>    <span class="c1">######################################################################################</span>
<a id="__codelineno-22-270" name="__codelineno-22-270"></a>    <span class="n">env</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span> <span class="o">=</span> <span class="n">setup_scene_for_abilities</span><span class="p">(</span>
<a id="__codelineno-22-271" name="__codelineno-22-271"></a>        <span class="n">abilities1</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">MALE</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;usb&quot;</span><span class="p">}},</span>
<a id="__codelineno-22-272" name="__codelineno-22-272"></a>        <span class="n">abilities2</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;attachable&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;attachment_type&quot;</span><span class="p">:</span> <span class="n">AttachmentType</span><span class="o">.</span><span class="n">FEMALE</span><span class="p">,</span> <span class="s2">&quot;attachment_category&quot;</span><span class="p">:</span> <span class="s2">&quot;usb&quot;</span><span class="p">}})</span>
<a id="__codelineno-22-273" name="__codelineno-22-273"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-274" name="__codelineno-22-274"></a>    <span class="k">assert</span> <span class="n">Attached</span> <span class="ow">in</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-22-275" name="__codelineno-22-275"></a>
<a id="__codelineno-22-276" name="__codelineno-22-276"></a>    <span class="c1"># Obj1 moves towards obj2 and they are attached together.</span>
<a id="__codelineno-22-277" name="__codelineno-22-277"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">3.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]))</span>
<a id="__codelineno-22-278" name="__codelineno-22-278"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-279" name="__codelineno-22-279"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-280" name="__codelineno-22-280"></a>    <span class="k">assert</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-281" name="__codelineno-22-281"></a>    <span class="k">assert</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>
<a id="__codelineno-22-282" name="__codelineno-22-282"></a>
<a id="__codelineno-22-283" name="__codelineno-22-283"></a>    <span class="c1"># Save the state.</span>
<a id="__codelineno-22-284" name="__codelineno-22-284"></a>    <span class="n">state</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">dump_state</span><span class="p">()</span>
<a id="__codelineno-22-285" name="__codelineno-22-285"></a>
<a id="__codelineno-22-286" name="__codelineno-22-286"></a>    <span class="c1"># Apply a large force to obj1 but the two objects cannot move much because obj2 is heavy.</span>
<a id="__codelineno-22-287" name="__codelineno-22-287"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">]))</span>
<a id="__codelineno-22-288" name="__codelineno-22-288"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-289" name="__codelineno-22-289"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-290" name="__codelineno-22-290"></a>
<a id="__codelineno-22-291" name="__codelineno-22-291"></a>    <span class="c1"># Unattach obj1 and obj2.</span>
<a id="__codelineno-22-292" name="__codelineno-22-292"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-22-293" name="__codelineno-22-293"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-294" name="__codelineno-22-294"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>
<a id="__codelineno-22-295" name="__codelineno-22-295"></a>
<a id="__codelineno-22-296" name="__codelineno-22-296"></a>    <span class="c1"># Obj1 moves away from obj2.</span>
<a id="__codelineno-22-297" name="__codelineno-22-297"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]))</span>
<a id="__codelineno-22-298" name="__codelineno-22-298"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-299" name="__codelineno-22-299"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-300" name="__codelineno-22-300"></a>
<a id="__codelineno-22-301" name="__codelineno-22-301"></a>    <span class="c1"># Load the state where the two objects are attached.</span>
<a id="__codelineno-22-302" name="__codelineno-22-302"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">load_state</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
<a id="__codelineno-22-303" name="__codelineno-22-303"></a>
<a id="__codelineno-22-304" name="__codelineno-22-304"></a>    <span class="c1"># Attached state should be restored correctly</span>
<a id="__codelineno-22-305" name="__codelineno-22-305"></a>    <span class="k">assert</span> <span class="n">obj1</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj2</span><span class="p">)</span>
<a id="__codelineno-22-306" name="__codelineno-22-306"></a>    <span class="k">assert</span> <span class="n">obj2</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Attached</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">obj1</span><span class="p">)</span>
<a id="__codelineno-22-307" name="__codelineno-22-307"></a>
<a id="__codelineno-22-308" name="__codelineno-22-308"></a>    <span class="c1"># Apply a large force to obj1 but the two objects cannot move much because obj2 is heavy.</span>
<a id="__codelineno-22-309" name="__codelineno-22-309"></a>    <span class="n">obj1</span><span class="o">.</span><span class="n">set_linear_velocity</span><span class="p">(</span><span class="n">velocity</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">]))</span>
<a id="__codelineno-22-310" name="__codelineno-22-310"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-22-311" name="__codelineno-22-311"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># empty action array since action space is 0 (no robots in the env)</span>
<a id="__codelineno-22-312" name="__codelineno-22-312"></a>
<a id="__codelineno-22-313" name="__codelineno-22-313"></a><span class="n">demo_names_to_demos</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-22-314" name="__codelineno-22-314"></a>    <span class="s2">&quot;demo_sticky_attachment&quot;</span><span class="p">:</span> <span class="n">demo_sticky_attachment</span><span class="p">,</span>
<a id="__codelineno-22-315" name="__codelineno-22-315"></a>    <span class="s2">&quot;demo_symmetric_attachment&quot;</span><span class="p">:</span> <span class="n">demo_symmetric_attachment</span><span class="p">,</span>
<a id="__codelineno-22-316" name="__codelineno-22-316"></a>    <span class="s2">&quot;demo_failed_symmetric_attachment_missing_symmetric&quot;</span><span class="p">:</span> <span class="n">demo_failed_symmetric_attachment_missing_symmetric</span><span class="p">,</span>
<a id="__codelineno-22-317" name="__codelineno-22-317"></a>    <span class="s2">&quot;demo_failed_symmetric_attachment_diff_categories&quot;</span><span class="p">:</span> <span class="n">demo_failed_symmetric_attachment_diff_categories</span><span class="p">,</span>
<a id="__codelineno-22-318" name="__codelineno-22-318"></a>    <span class="s2">&quot;demo_male_female_attachment&quot;</span><span class="p">:</span> <span class="n">demo_male_female_attachment</span><span class="p">,</span>
<a id="__codelineno-22-319" name="__codelineno-22-319"></a>    <span class="s2">&quot;demo_failed_male_female_attachment_missing_opposite_end&quot;</span><span class="p">:</span> <span class="n">demo_failed_male_female_attachment_missing_opposite_end</span><span class="p">,</span>
<a id="__codelineno-22-320" name="__codelineno-22-320"></a>    <span class="s2">&quot;demo_failed_male_female_attachment_diff_categories&quot;</span><span class="p">:</span> <span class="n">demo_failed_male_female_attachment_diff_categories</span><span class="p">,</span>
<a id="__codelineno-22-321" name="__codelineno-22-321"></a>    <span class="s2">&quot;demo_male_female_attachment_dump_load&quot;</span><span class="p">:</span> <span class="n">demo_male_female_attachment_dump_load</span><span class="p">,</span>
<a id="__codelineno-22-322" name="__codelineno-22-322"></a><span class="p">}</span>
<a id="__codelineno-22-323" name="__codelineno-22-323"></a>
<a id="__codelineno-22-324" name="__codelineno-22-324"></a>
<a id="__codelineno-22-325" name="__codelineno-22-325"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-22-326" name="__codelineno-22-326"></a>    <span class="c1"># Loop indefinitely and choose different examples to run</span>
<a id="__codelineno-22-327" name="__codelineno-22-327"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">demo_names_to_demos</span><span class="p">)):</span>
<a id="__codelineno-22-328" name="__codelineno-22-328"></a>        <span class="n">demo_name</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">demo_names_to_demos</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;attachment demo&quot;</span><span class="p">)</span>
<a id="__codelineno-22-329" name="__codelineno-22-329"></a>        <span class="c1"># Run the demo</span>
<a id="__codelineno-22-330" name="__codelineno-22-330"></a>        <span class="n">demo_names_to_demos</span><span class="p">[</span><span class="n">demo_name</span><span class="p">]()</span>
<a id="__codelineno-22-331" name="__codelineno-22-331"></a>
<a id="__codelineno-22-332" name="__codelineno-22-332"></a>
<a id="__codelineno-22-333" name="__codelineno-22-333"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-22-334" name="__codelineno-22-334"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="cleaning-demo"><strong>Cleaning Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how <code>WaterSource</code>-enabled objects can be toggled on to generate water particles</li>
<li>Understanding how to programmatically generate <code>Stain</code> and <code>Dusty</code> particles on objects</li>
<li>Understanding how particles can be removed via a <code>ParticleRemover</code> object</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">cleaning_demo</span>
</code></pre></div>
<p class="annotate">This demo first loads a basic cube object with the ability to remove particles into fully populated scene, and then spawns dust and stain particles on various objects and turns on the sink. You can then move (1) the cube object around to first absorb water particles so that it's "soaked" with water, and then can drag it across objects with dust or stain particles to remove them.</p>
<ol>
<li>Manipulate the object by holding down <strong><code>Shift</code></strong> and then <strong><code>Left-click + Drag</code></strong>!</li>
</ol>
<details class="code">
<summary>cleaning_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">  1</a></span>
<span class="normal"><a href="#__codelineno-24-2">  2</a></span>
<span class="normal"><a href="#__codelineno-24-3">  3</a></span>
<span class="normal"><a href="#__codelineno-24-4">  4</a></span>
<span class="normal"><a href="#__codelineno-24-5">  5</a></span>
<span class="normal"><a href="#__codelineno-24-6">  6</a></span>
<span class="normal"><a href="#__codelineno-24-7">  7</a></span>
<span class="normal"><a href="#__codelineno-24-8">  8</a></span>
<span class="normal"><a href="#__codelineno-24-9">  9</a></span>
<span class="normal"><a href="#__codelineno-24-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-24-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-24-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-24-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-24-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-24-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-24-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-24-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-24-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-24-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-24-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-24-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-24-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-24-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-24-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-24-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-24-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-24-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-24-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-24-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-24-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-24-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-24-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-24-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-24-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-24-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-24-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-24-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-24-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-24-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-24-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-24-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-24-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-24-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-24-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-24-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-24-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-24-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-24-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-24-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-24-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-24-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-24-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-24-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-24-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-24-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-24-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-24-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-24-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-24-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-24-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-24-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-24-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-24-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-24-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-24-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-24-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-24-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-24-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-24-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-24-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-24-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-24-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-24-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-24-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-24-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-24-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-24-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-24-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-24-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-24-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-24-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-24-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-24-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-24-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-24-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-24-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-24-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-24-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-24-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-24-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-24-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-24-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-24-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-24-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-24-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-24-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-24-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-24-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-24-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-24-100">100</a></span>
<span class="normal"><a href="#__codelineno-24-101">101</a></span>
<span class="normal"><a href="#__codelineno-24-102">102</a></span>
<span class="normal"><a href="#__codelineno-24-103">103</a></span>
<span class="normal"><a href="#__codelineno-24-104">104</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="kn">from</span> <span class="nn">omnigibson</span> <span class="kn">import</span> <span class="n">object_states</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="kn">from</span> <span class="nn">omnigibson.systems</span> <span class="kn">import</span> <span class="n">DustSystem</span><span class="p">,</span> <span class="n">StainSystem</span><span class="p">,</span> <span class="n">WaterSystem</span>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.constants</span> <span class="kn">import</span> <span class="n">ParticleModifyMethod</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a>
<a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="c1"># Make sure object states are enabled</span>
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-24-12" name="__codelineno-24-12"></a>
<a id="__codelineno-24-13" name="__codelineno-24-13"></a>
<a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-24-15" name="__codelineno-24-15"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="sd">    Demo of a cleaning task</span>
<a id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="sd">    Loads an interactive scene and sets all object surface to be dirty</span>
<a id="__codelineno-24-18" name="__codelineno-24-18"></a><span class="sd">    Loads also a cleaning tool that can be soaked in water and used to clean objects if moved manually</span>
<a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-24-20" name="__codelineno-24-20"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-24-21" name="__codelineno-24-21"></a>
<a id="__codelineno-24-22" name="__codelineno-24-22"></a>    <span class="c1"># Create the scene config to load -- Rs_int with only a few object categories loaded, as</span>
<a id="__codelineno-24-23" name="__codelineno-24-23"></a>    <span class="c1"># well as a custom block object that will be used as a cleaning tool</span>
<a id="__codelineno-24-24" name="__codelineno-24-24"></a>    <span class="k">def</span> <span class="nf">check_water_saturation</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<a id="__codelineno-24-25" name="__codelineno-24-25"></a>        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Saturated</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">WaterSystem</span><span class="p">)</span>
<a id="__codelineno-24-26" name="__codelineno-24-26"></a>
<a id="__codelineno-24-27" name="__codelineno-24-27"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-24-28" name="__codelineno-24-28"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-24-29" name="__codelineno-24-29"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span><span class="p">,</span>
<a id="__codelineno-24-30" name="__codelineno-24-30"></a>            <span class="s2">&quot;scene_model&quot;</span><span class="p">:</span> <span class="s2">&quot;Rs_int&quot;</span><span class="p">,</span>
<a id="__codelineno-24-31" name="__codelineno-24-31"></a>            <span class="s2">&quot;load_object_categories&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;floors&quot;</span><span class="p">,</span> <span class="s2">&quot;walls&quot;</span><span class="p">,</span> <span class="s2">&quot;ceilings&quot;</span><span class="p">,</span> <span class="s2">&quot;breakfast_table&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_cabinet&quot;</span><span class="p">,</span> <span class="s2">&quot;sink&quot;</span><span class="p">,</span> <span class="s2">&quot;stove&quot;</span><span class="p">,</span> <span class="s2">&quot;fridge&quot;</span><span class="p">,</span> <span class="s2">&quot;window&quot;</span><span class="p">],</span>
<a id="__codelineno-24-32" name="__codelineno-24-32"></a>        <span class="p">},</span>
<a id="__codelineno-24-33" name="__codelineno-24-33"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-24-34" name="__codelineno-24-34"></a>            <span class="c1"># A cleaning tool (cuboid) with the ability to be saturated and remove stain, dust, and water particles</span>
<a id="__codelineno-24-35" name="__codelineno-24-35"></a>            <span class="p">{</span>
<a id="__codelineno-24-36" name="__codelineno-24-36"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;PrimitiveObject&quot;</span><span class="p">,</span>
<a id="__codelineno-24-37" name="__codelineno-24-37"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;block&quot;</span><span class="p">,</span>
<a id="__codelineno-24-38" name="__codelineno-24-38"></a>                <span class="s2">&quot;primitive_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Cube&quot;</span><span class="p">,</span>
<a id="__codelineno-24-39" name="__codelineno-24-39"></a>                <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">],</span>
<a id="__codelineno-24-40" name="__codelineno-24-40"></a>                <span class="s2">&quot;rgba&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<a id="__codelineno-24-41" name="__codelineno-24-41"></a>                <span class="s2">&quot;abilities&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-24-42" name="__codelineno-24-42"></a>                    <span class="s2">&quot;saturable&quot;</span><span class="p">:</span> <span class="p">{},</span>
<a id="__codelineno-24-43" name="__codelineno-24-43"></a>                    <span class="s2">&quot;particleRemover&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-24-44" name="__codelineno-24-44"></a>                        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">ParticleModifyMethod</span><span class="o">.</span><span class="n">ADJACENCY</span><span class="p">,</span>
<a id="__codelineno-24-45" name="__codelineno-24-45"></a>                        <span class="s2">&quot;conditions&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-24-46" name="__codelineno-24-46"></a>                            <span class="c1"># For a specific particle system, this specifies what conditions are required in order for the</span>
<a id="__codelineno-24-47" name="__codelineno-24-47"></a>                            <span class="c1"># particle applier / remover to apply / remover particles associated with that system</span>
<a id="__codelineno-24-48" name="__codelineno-24-48"></a>                            <span class="c1"># The list should contain functions with signature condition() --&gt; bool,</span>
<a id="__codelineno-24-49" name="__codelineno-24-49"></a>                            <span class="c1"># where True means the condition is satisfied</span>
<a id="__codelineno-24-50" name="__codelineno-24-50"></a>                            <span class="c1"># In this case, we only allow our cleaning tool to remove stains and dust particles if</span>
<a id="__codelineno-24-51" name="__codelineno-24-51"></a>                            <span class="c1"># the object is saturated with water, i.e.: it&#39;s &quot;soaked&quot; with water particles</span>
<a id="__codelineno-24-52" name="__codelineno-24-52"></a>                            <span class="n">StainSystem</span><span class="p">:</span> <span class="p">[</span><span class="n">check_water_saturation</span><span class="p">],</span>
<a id="__codelineno-24-53" name="__codelineno-24-53"></a>                            <span class="n">DustSystem</span><span class="p">:</span> <span class="p">[</span><span class="n">check_water_saturation</span><span class="p">],</span>
<a id="__codelineno-24-54" name="__codelineno-24-54"></a>                            <span class="n">WaterSystem</span><span class="p">:</span> <span class="p">[],</span>
<a id="__codelineno-24-55" name="__codelineno-24-55"></a>                        <span class="p">},</span>
<a id="__codelineno-24-56" name="__codelineno-24-56"></a>                    <span class="p">},</span>
<a id="__codelineno-24-57" name="__codelineno-24-57"></a>                <span class="p">},</span>
<a id="__codelineno-24-58" name="__codelineno-24-58"></a>                <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.4</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span>
<a id="__codelineno-24-59" name="__codelineno-24-59"></a>            <span class="p">},</span>
<a id="__codelineno-24-60" name="__codelineno-24-60"></a>        <span class="p">],</span>
<a id="__codelineno-24-61" name="__codelineno-24-61"></a>    <span class="p">}</span>
<a id="__codelineno-24-62" name="__codelineno-24-62"></a>
<a id="__codelineno-24-63" name="__codelineno-24-63"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-24-64" name="__codelineno-24-64"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-24-65" name="__codelineno-24-65"></a>
<a id="__codelineno-24-66" name="__codelineno-24-66"></a>    <span class="c1"># Set everything that can go dirty and activate the water sources</span>
<a id="__codelineno-24-67" name="__codelineno-24-67"></a>    <span class="n">dusty_objects</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="s2">&quot;breakfast_table&quot;</span><span class="p">)</span>
<a id="__codelineno-24-68" name="__codelineno-24-68"></a>    <span class="n">stained_objects</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_cabinet&quot;</span><span class="p">)</span>
<a id="__codelineno-24-69" name="__codelineno-24-69"></a>    <span class="n">water_source_objects</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">get_objects_with_state</span><span class="p">(</span><span class="n">object_states</span><span class="o">.</span><span class="n">WaterSource</span><span class="p">)</span>
<a id="__codelineno-24-70" name="__codelineno-24-70"></a>
<a id="__codelineno-24-71" name="__codelineno-24-71"></a>    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">dusty_objects</span><span class="p">:</span>
<a id="__codelineno-24-72" name="__codelineno-24-72"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting object </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> to be Dusty&quot;</span><span class="p">)</span>
<a id="__codelineno-24-73" name="__codelineno-24-73"></a>        <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Covered</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">DustSystem</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-24-74" name="__codelineno-24-74"></a>
<a id="__codelineno-24-75" name="__codelineno-24-75"></a>    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">stained_objects</span><span class="p">:</span>
<a id="__codelineno-24-76" name="__codelineno-24-76"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting object </span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> to be Stained&quot;</span><span class="p">)</span>
<a id="__codelineno-24-77" name="__codelineno-24-77"></a>        <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Covered</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">StainSystem</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-24-78" name="__codelineno-24-78"></a>
<a id="__codelineno-24-79" name="__codelineno-24-79"></a>    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">water_source_objects</span><span class="p">:</span>
<a id="__codelineno-24-80" name="__codelineno-24-80"></a>        <span class="k">if</span> <span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">:</span>
<a id="__codelineno-24-81" name="__codelineno-24-81"></a>            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting water source object </span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2"> to be ToggledOn&quot;</span><span class="p">)</span>
<a id="__codelineno-24-82" name="__codelineno-24-82"></a>            <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-24-83" name="__codelineno-24-83"></a>
<a id="__codelineno-24-84" name="__codelineno-24-84"></a>    <span class="c1"># Set the camera to be in a good position</span>
<a id="__codelineno-24-85" name="__codelineno-24-85"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-24-86" name="__codelineno-24-86"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.825556</span><span class="p">,</span>  <span class="mf">2.42499</span> <span class="p">,</span>  <span class="mf">1.04104</span> <span class="p">]),</span>
<a id="__codelineno-24-87" name="__codelineno-24-87"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.56919735</span><span class="p">,</span> <span class="mf">0.09896035</span><span class="p">,</span> <span class="mf">0.13981109</span><span class="p">,</span> <span class="mf">0.80416049</span><span class="p">]),</span>
<a id="__codelineno-24-88" name="__codelineno-24-88"></a>    <span class="p">)</span>
<a id="__codelineno-24-89" name="__codelineno-24-89"></a>
<a id="__codelineno-24-90" name="__codelineno-24-90"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">1000</span>
<a id="__codelineno-24-91" name="__codelineno-24-91"></a>    <span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-24-92" name="__codelineno-24-92"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-24-93" name="__codelineno-24-93"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">):</span>
<a id="__codelineno-24-94" name="__codelineno-24-94"></a>            <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-24-95" name="__codelineno-24-95"></a>        <span class="k">while</span> <span class="n">step</span> <span class="o">!=</span> <span class="n">max_steps</span><span class="p">:</span>
<a id="__codelineno-24-96" name="__codelineno-24-96"></a>            <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>      <span class="c1"># Empty action since no robots in the environment</span>
<a id="__codelineno-24-97" name="__codelineno-24-97"></a>            <span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-24-98" name="__codelineno-24-98"></a>    <span class="k">finally</span><span class="p">:</span>
<a id="__codelineno-24-99" name="__codelineno-24-99"></a>        <span class="c1"># Always close environment at the end</span>
<a id="__codelineno-24-100" name="__codelineno-24-100"></a>        <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-24-101" name="__codelineno-24-101"></a>
<a id="__codelineno-24-102" name="__codelineno-24-102"></a>
<a id="__codelineno-24-103" name="__codelineno-24-103"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-24-104" name="__codelineno-24-104"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="simple-cleaning-demo"><strong>Simple Cleaning Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how <code>WaterSource</code>-enabled objects can be toggled on to generate water particles</li>
<li>Understanding how to programmatically generate <code>Stain</code> and <code>Dusty</code> particles on objects</li>
<li>Understanding how particles can be removed via a <code>ParticleRemover</code> object</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">cleaning_demo_simple</span>
</code></pre></div>
<p class="annotate">This demo is similar in functionality to the <a href="#cleaning-demo">full cleaning demo</a>, but instead of loading a fully populated scene only a select few objects are loaded. In this case, the loaded <code>scrub_brush</code> object is the <code>ParticleRemover</code> object. As before, you can move (1) the brush around to first absorb water particles so that it's "soaked" with water, and then can drag it across objects with dust or stain particles to remove them.</p>
<ol>
<li>Manipulate the object by holding down <strong><code>Shift</code></strong> and then <strong><code>Left-click + Drag</code></strong>!</li>
</ol>
<details class="code">
<summary>cleaning_demo_simple.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">  1</a></span>
<span class="normal"><a href="#__codelineno-26-2">  2</a></span>
<span class="normal"><a href="#__codelineno-26-3">  3</a></span>
<span class="normal"><a href="#__codelineno-26-4">  4</a></span>
<span class="normal"><a href="#__codelineno-26-5">  5</a></span>
<span class="normal"><a href="#__codelineno-26-6">  6</a></span>
<span class="normal"><a href="#__codelineno-26-7">  7</a></span>
<span class="normal"><a href="#__codelineno-26-8">  8</a></span>
<span class="normal"><a href="#__codelineno-26-9">  9</a></span>
<span class="normal"><a href="#__codelineno-26-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-26-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-26-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-26-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-26-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-26-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-26-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-26-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-26-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-26-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-26-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-26-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-26-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-26-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-26-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-26-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-26-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-26-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-26-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-26-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-26-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-26-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-26-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-26-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-26-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-26-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-26-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-26-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-26-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-26-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-26-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-26-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-26-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-26-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-26-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-26-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-26-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-26-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-26-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-26-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-26-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-26-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-26-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-26-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-26-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-26-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-26-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-26-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-26-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-26-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-26-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-26-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-26-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-26-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-26-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-26-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-26-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-26-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-26-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-26-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-26-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-26-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-26-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-26-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-26-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-26-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-26-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-26-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-26-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-26-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-26-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-26-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-26-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-26-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-26-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-26-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-26-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-26-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-26-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-26-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-26-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-26-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-26-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-26-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-26-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-26-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-26-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-26-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-26-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-26-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-26-100">100</a></span>
<span class="normal"><a href="#__codelineno-26-101">101</a></span>
<span class="normal"><a href="#__codelineno-26-102">102</a></span>
<span class="normal"><a href="#__codelineno-26-103">103</a></span>
<span class="normal"><a href="#__codelineno-26-104">104</a></span>
<span class="normal"><a href="#__codelineno-26-105">105</a></span>
<span class="normal"><a href="#__codelineno-26-106">106</a></span>
<span class="normal"><a href="#__codelineno-26-107">107</a></span>
<span class="normal"><a href="#__codelineno-26-108">108</a></span>
<span class="normal"><a href="#__codelineno-26-109">109</a></span>
<span class="normal"><a href="#__codelineno-26-110">110</a></span>
<span class="normal"><a href="#__codelineno-26-111">111</a></span>
<span class="normal"><a href="#__codelineno-26-112">112</a></span>
<span class="normal"><a href="#__codelineno-26-113">113</a></span>
<span class="normal"><a href="#__codelineno-26-114">114</a></span>
<span class="normal"><a href="#__codelineno-26-115">115</a></span>
<span class="normal"><a href="#__codelineno-26-116">116</a></span>
<span class="normal"><a href="#__codelineno-26-117">117</a></span>
<span class="normal"><a href="#__codelineno-26-118">118</a></span>
<span class="normal"><a href="#__codelineno-26-119">119</a></span>
<span class="normal"><a href="#__codelineno-26-120">120</a></span>
<span class="normal"><a href="#__codelineno-26-121">121</a></span>
<span class="normal"><a href="#__codelineno-26-122">122</a></span>
<span class="normal"><a href="#__codelineno-26-123">123</a></span>
<span class="normal"><a href="#__codelineno-26-124">124</a></span>
<span class="normal"><a href="#__codelineno-26-125">125</a></span>
<span class="normal"><a href="#__codelineno-26-126">126</a></span>
<span class="normal"><a href="#__codelineno-26-127">127</a></span>
<span class="normal"><a href="#__codelineno-26-128">128</a></span>
<span class="normal"><a href="#__codelineno-26-129">129</a></span>
<span class="normal"><a href="#__codelineno-26-130">130</a></span>
<span class="normal"><a href="#__codelineno-26-131">131</a></span>
<span class="normal"><a href="#__codelineno-26-132">132</a></span>
<span class="normal"><a href="#__codelineno-26-133">133</a></span>
<span class="normal"><a href="#__codelineno-26-134">134</a></span>
<span class="normal"><a href="#__codelineno-26-135">135</a></span>
<span class="normal"><a href="#__codelineno-26-136">136</a></span>
<span class="normal"><a href="#__codelineno-26-137">137</a></span>
<span class="normal"><a href="#__codelineno-26-138">138</a></span>
<span class="normal"><a href="#__codelineno-26-139">139</a></span>
<span class="normal"><a href="#__codelineno-26-140">140</a></span>
<span class="normal"><a href="#__codelineno-26-141">141</a></span>
<span class="normal"><a href="#__codelineno-26-142">142</a></span>
<span class="normal"><a href="#__codelineno-26-143">143</a></span>
<span class="normal"><a href="#__codelineno-26-144">144</a></span>
<span class="normal"><a href="#__codelineno-26-145">145</a></span>
<span class="normal"><a href="#__codelineno-26-146">146</a></span>
<span class="normal"><a href="#__codelineno-26-147">147</a></span>
<span class="normal"><a href="#__codelineno-26-148">148</a></span>
<span class="normal"><a href="#__codelineno-26-149">149</a></span>
<span class="normal"><a href="#__codelineno-26-150">150</a></span>
<span class="normal"><a href="#__codelineno-26-151">151</a></span>
<span class="normal"><a href="#__codelineno-26-152">152</a></span>
<span class="normal"><a href="#__codelineno-26-153">153</a></span>
<span class="normal"><a href="#__codelineno-26-154">154</a></span>
<span class="normal"><a href="#__codelineno-26-155">155</a></span>
<span class="normal"><a href="#__codelineno-26-156">156</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="kn">from</span> <span class="nn">omnigibson</span> <span class="kn">import</span> <span class="n">object_states</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="kn">from</span> <span class="nn">omnigibson.systems</span> <span class="kn">import</span> <span class="n">DustSystem</span><span class="p">,</span> <span class="n">StainSystem</span><span class="p">,</span> <span class="n">WaterSystem</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.constants</span> <span class="kn">import</span> <span class="n">ParticleModifyMethod</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="c1"># Make sure object states are enabled</span>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-26-13" name="__codelineno-26-13"></a>
<a id="__codelineno-26-14" name="__codelineno-26-14"></a>
<a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-26-16" name="__codelineno-26-16"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-26-17" name="__codelineno-26-17"></a><span class="sd">    Demo of a cleaning task that resets after everything has been cleaned</span>
<a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="sd">    Loads an empty scene with a sink, a dusty table and a dirty and stained bowl, and a cleaning tool</span>
<a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="sd">    If everything is cleaned, or after N steps, the scene resets to the initial state</span>
<a id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-26-21" name="__codelineno-26-21"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-26-22" name="__codelineno-26-22"></a>
<a id="__codelineno-26-23" name="__codelineno-26-23"></a>    <span class="c1"># Create the scene config to load -- empty scene</span>
<a id="__codelineno-26-24" name="__codelineno-26-24"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-26-25" name="__codelineno-26-25"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-26-26" name="__codelineno-26-26"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-26-27" name="__codelineno-26-27"></a>        <span class="p">}</span>
<a id="__codelineno-26-28" name="__codelineno-26-28"></a>    <span class="p">}</span>
<a id="__codelineno-26-29" name="__codelineno-26-29"></a>
<a id="__codelineno-26-30" name="__codelineno-26-30"></a>    <span class="c1"># Define objects to load into the environment</span>
<a id="__codelineno-26-31" name="__codelineno-26-31"></a>    <span class="n">sink_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-26-32" name="__codelineno-26-32"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-26-33" name="__codelineno-26-33"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sink&quot;</span><span class="p">,</span>
<a id="__codelineno-26-34" name="__codelineno-26-34"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;sink&quot;</span><span class="p">,</span>
<a id="__codelineno-26-35" name="__codelineno-26-35"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;sink_1&quot;</span><span class="p">,</span>
<a id="__codelineno-26-36" name="__codelineno-26-36"></a>        <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
<a id="__codelineno-26-37" name="__codelineno-26-37"></a>        <span class="n">abilities</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;toggleable&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;waterSource&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;waterSink&quot;</span><span class="p">:</span> <span class="p">{}},</span>
<a id="__codelineno-26-38" name="__codelineno-26-38"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.53</span><span class="p">],</span>
<a id="__codelineno-26-39" name="__codelineno-26-39"></a>    <span class="p">)</span>
<a id="__codelineno-26-40" name="__codelineno-26-40"></a>
<a id="__codelineno-26-41" name="__codelineno-26-41"></a>    <span class="k">def</span> <span class="nf">check_water_saturation</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<a id="__codelineno-26-42" name="__codelineno-26-42"></a>        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Saturated</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">WaterSystem</span><span class="p">)</span>
<a id="__codelineno-26-43" name="__codelineno-26-43"></a>
<a id="__codelineno-26-44" name="__codelineno-26-44"></a>    <span class="n">brush_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-26-45" name="__codelineno-26-45"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-26-46" name="__codelineno-26-46"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;brush&quot;</span><span class="p">,</span>
<a id="__codelineno-26-47" name="__codelineno-26-47"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;scrub_brush&quot;</span><span class="p">,</span>
<a id="__codelineno-26-48" name="__codelineno-26-48"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;scrub_brush_000&quot;</span><span class="p">,</span>
<a id="__codelineno-26-49" name="__codelineno-26-49"></a>        <span class="n">avg_obj_dims</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span> <span class="s2">&quot;density&quot;</span><span class="p">:</span> <span class="mf">67.0</span><span class="p">},</span>
<a id="__codelineno-26-50" name="__codelineno-26-50"></a>        <span class="n">fit_avg_dim_volume</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-26-51" name="__codelineno-26-51"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span>
<a id="__codelineno-26-52" name="__codelineno-26-52"></a>        <span class="n">abilities</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-26-53" name="__codelineno-26-53"></a>            <span class="s2">&quot;saturable&quot;</span><span class="p">:</span> <span class="p">{},</span>
<a id="__codelineno-26-54" name="__codelineno-26-54"></a>            <span class="s2">&quot;particleRemover&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-26-55" name="__codelineno-26-55"></a>                <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">ParticleModifyMethod</span><span class="o">.</span><span class="n">ADJACENCY</span><span class="p">,</span>
<a id="__codelineno-26-56" name="__codelineno-26-56"></a>                <span class="s2">&quot;conditions&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-26-57" name="__codelineno-26-57"></a>                    <span class="c1"># For a specific particle system, this specifies what conditions are required in order for the</span>
<a id="__codelineno-26-58" name="__codelineno-26-58"></a>                    <span class="c1"># particle applier / remover to apply / remover particles associated with that system</span>
<a id="__codelineno-26-59" name="__codelineno-26-59"></a>                    <span class="c1"># The list should contain functions with signature condition() --&gt; bool,</span>
<a id="__codelineno-26-60" name="__codelineno-26-60"></a>                    <span class="c1"># where True means the condition is satisfied</span>
<a id="__codelineno-26-61" name="__codelineno-26-61"></a>                    <span class="c1"># In this case, we only allow our cleaning tool to remove stains and dust particles if</span>
<a id="__codelineno-26-62" name="__codelineno-26-62"></a>                    <span class="c1"># the object is saturated with water, i.e.: it&#39;s &quot;soaked&quot; with water particles</span>
<a id="__codelineno-26-63" name="__codelineno-26-63"></a>                    <span class="n">StainSystem</span><span class="p">:</span> <span class="p">[</span><span class="n">check_water_saturation</span><span class="p">],</span>
<a id="__codelineno-26-64" name="__codelineno-26-64"></a>                    <span class="n">DustSystem</span><span class="p">:</span> <span class="p">[</span><span class="n">check_water_saturation</span><span class="p">],</span>
<a id="__codelineno-26-65" name="__codelineno-26-65"></a>                    <span class="n">WaterSystem</span><span class="p">:</span> <span class="p">[],</span>
<a id="__codelineno-26-66" name="__codelineno-26-66"></a>                <span class="p">},</span>
<a id="__codelineno-26-67" name="__codelineno-26-67"></a>            <span class="p">},</span>
<a id="__codelineno-26-68" name="__codelineno-26-68"></a>        <span class="p">},</span>
<a id="__codelineno-26-69" name="__codelineno-26-69"></a>    <span class="p">)</span>
<a id="__codelineno-26-70" name="__codelineno-26-70"></a>
<a id="__codelineno-26-71" name="__codelineno-26-71"></a>    <span class="c1"># Desk that&#39;s dusty</span>
<a id="__codelineno-26-72" name="__codelineno-26-72"></a>    <span class="n">desk_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-26-73" name="__codelineno-26-73"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-26-74" name="__codelineno-26-74"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;desk&quot;</span><span class="p">,</span>
<a id="__codelineno-26-75" name="__codelineno-26-75"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;breakfast_table&quot;</span><span class="p">,</span>
<a id="__codelineno-26-76" name="__codelineno-26-76"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;19203&quot;</span><span class="p">,</span>
<a id="__codelineno-26-77" name="__codelineno-26-77"></a>        <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
<a id="__codelineno-26-78" name="__codelineno-26-78"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.48</span><span class="p">],</span>
<a id="__codelineno-26-79" name="__codelineno-26-79"></a>    <span class="p">)</span>
<a id="__codelineno-26-80" name="__codelineno-26-80"></a>
<a id="__codelineno-26-81" name="__codelineno-26-81"></a>    <span class="c1"># Bowl with stains</span>
<a id="__codelineno-26-82" name="__codelineno-26-82"></a>    <span class="n">bowl_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-26-83" name="__codelineno-26-83"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-26-84" name="__codelineno-26-84"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;bowl&quot;</span><span class="p">,</span>
<a id="__codelineno-26-85" name="__codelineno-26-85"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;bowl&quot;</span><span class="p">,</span>
<a id="__codelineno-26-86" name="__codelineno-26-86"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;68_0&quot;</span><span class="p">,</span>
<a id="__codelineno-26-87" name="__codelineno-26-87"></a>        <span class="n">scale</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">]),</span>
<a id="__codelineno-26-88" name="__codelineno-26-88"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.48</span><span class="p">],</span>
<a id="__codelineno-26-89" name="__codelineno-26-89"></a>    <span class="p">)</span>
<a id="__codelineno-26-90" name="__codelineno-26-90"></a>
<a id="__codelineno-26-91" name="__codelineno-26-91"></a>    <span class="n">cfg</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">sink_cfg</span><span class="p">,</span> <span class="n">brush_cfg</span><span class="p">,</span> <span class="n">desk_cfg</span><span class="p">,</span> <span class="n">bowl_cfg</span><span class="p">]</span>
<a id="__codelineno-26-92" name="__codelineno-26-92"></a>
<a id="__codelineno-26-93" name="__codelineno-26-93"></a>    <span class="c1"># Create the environment!</span>
<a id="__codelineno-26-94" name="__codelineno-26-94"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-26-95" name="__codelineno-26-95"></a>
<a id="__codelineno-26-96" name="__codelineno-26-96"></a>    <span class="c1"># Set camera to ideal angle for viewing objects</span>
<a id="__codelineno-26-97" name="__codelineno-26-97"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-26-98" name="__codelineno-26-98"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.782289</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.633009</span><span class="p">,</span>  <span class="mf">1.4475</span>  <span class="p">]),</span>
<a id="__codelineno-26-99" name="__codelineno-26-99"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">0.48871723</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.24618907</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.37654978</span><span class="p">,</span>  <span class="mf">0.74750028</span><span class="p">]),</span>
<a id="__codelineno-26-100" name="__codelineno-26-100"></a>    <span class="p">)</span>
<a id="__codelineno-26-101" name="__codelineno-26-101"></a>
<a id="__codelineno-26-102" name="__codelineno-26-102"></a>    <span class="c1"># Take a few steps to let the objects settle, and then sanity check the initial state</span>
<a id="__codelineno-26-103" name="__codelineno-26-103"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<a id="__codelineno-26-104" name="__codelineno-26-104"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>              <span class="c1"># Empty action since no robots are in the scene</span>
<a id="__codelineno-26-105" name="__codelineno-26-105"></a>
<a id="__codelineno-26-106" name="__codelineno-26-106"></a>    <span class="n">sink</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;sink&quot;</span><span class="p">)</span>
<a id="__codelineno-26-107" name="__codelineno-26-107"></a>    <span class="n">brush</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;brush&quot;</span><span class="p">)</span>
<a id="__codelineno-26-108" name="__codelineno-26-108"></a>    <span class="n">desk</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;desk&quot;</span><span class="p">)</span>
<a id="__codelineno-26-109" name="__codelineno-26-109"></a>    <span class="n">bowl</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;bowl&quot;</span><span class="p">)</span>
<a id="__codelineno-26-110" name="__codelineno-26-110"></a>
<a id="__codelineno-26-111" name="__codelineno-26-111"></a>    <span class="k">assert</span> <span class="n">sink</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-26-112" name="__codelineno-26-112"></a>    <span class="k">assert</span> <span class="n">desk</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Covered</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">DustSystem</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-26-113" name="__codelineno-26-113"></a>    <span class="k">assert</span> <span class="n">bowl</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">OnTop</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">desk</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-26-114" name="__codelineno-26-114"></a>    <span class="k">assert</span> <span class="n">brush</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">OnTop</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">desk</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-26-115" name="__codelineno-26-115"></a>    <span class="k">assert</span> <span class="n">bowl</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Covered</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">StainSystem</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-26-116" name="__codelineno-26-116"></a>
<a id="__codelineno-26-117" name="__codelineno-26-117"></a>    <span class="c1"># Take a step, and save the state</span>
<a id="__codelineno-26-118" name="__codelineno-26-118"></a>    <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-26-119" name="__codelineno-26-119"></a>    <span class="n">initial_state</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">dump_state</span><span class="p">()</span>
<a id="__codelineno-26-120" name="__codelineno-26-120"></a>
<a id="__codelineno-26-121" name="__codelineno-26-121"></a>    <span class="c1"># Main simulation loop.</span>
<a id="__codelineno-26-122" name="__codelineno-26-122"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="mi">1000</span>
<a id="__codelineno-26-123" name="__codelineno-26-123"></a>    <span class="n">max_iterations</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">1</span>
<a id="__codelineno-26-124" name="__codelineno-26-124"></a>    <span class="n">iteration</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-26-125" name="__codelineno-26-125"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-26-126" name="__codelineno-26-126"></a>        <span class="k">while</span> <span class="n">iteration</span> <span class="o">!=</span> <span class="n">max_iterations</span><span class="p">:</span>
<a id="__codelineno-26-127" name="__codelineno-26-127"></a>            <span class="c1"># Keep stepping until table or bowl are clean, or we reach 1000 steps</span>
<a id="__codelineno-26-128" name="__codelineno-26-128"></a>            <span class="n">steps</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-26-129" name="__codelineno-26-129"></a>            <span class="k">while</span> <span class="p">(</span>
<a id="__codelineno-26-130" name="__codelineno-26-130"></a>                <span class="n">desk</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Covered</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">DustSystem</span><span class="p">)</span>
<a id="__codelineno-26-131" name="__codelineno-26-131"></a>                <span class="ow">and</span> <span class="n">bowl</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Covered</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">StainSystem</span><span class="p">)</span>
<a id="__codelineno-26-132" name="__codelineno-26-132"></a>                <span class="ow">and</span> <span class="n">steps</span> <span class="o">!=</span> <span class="n">max_steps</span>
<a id="__codelineno-26-133" name="__codelineno-26-133"></a>            <span class="p">):</span>
<a id="__codelineno-26-134" name="__codelineno-26-134"></a>                <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-26-135" name="__codelineno-26-135"></a>                <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-26-136" name="__codelineno-26-136"></a>                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Step </span><span class="si">{</span><span class="n">steps</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-26-137" name="__codelineno-26-137"></a>
<a id="__codelineno-26-138" name="__codelineno-26-138"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">desk</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Covered</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">DustSystem</span><span class="p">):</span>
<a id="__codelineno-26-139" name="__codelineno-26-139"></a>                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Reset because Table cleaned&quot;</span><span class="p">)</span>
<a id="__codelineno-26-140" name="__codelineno-26-140"></a>            <span class="k">elif</span> <span class="ow">not</span> <span class="n">bowl</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Covered</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">StainSystem</span><span class="p">):</span>
<a id="__codelineno-26-141" name="__codelineno-26-141"></a>                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Reset because Bowl cleaned&quot;</span><span class="p">)</span>
<a id="__codelineno-26-142" name="__codelineno-26-142"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-26-143" name="__codelineno-26-143"></a>                <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Reset because max steps&quot;</span><span class="p">)</span>
<a id="__codelineno-26-144" name="__codelineno-26-144"></a>
<a id="__codelineno-26-145" name="__codelineno-26-145"></a>            <span class="c1"># Reset to the initial state</span>
<a id="__codelineno-26-146" name="__codelineno-26-146"></a>            <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">load_state</span><span class="p">(</span><span class="n">initial_state</span><span class="p">)</span>
<a id="__codelineno-26-147" name="__codelineno-26-147"></a>
<a id="__codelineno-26-148" name="__codelineno-26-148"></a>            <span class="n">iteration</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-26-149" name="__codelineno-26-149"></a>
<a id="__codelineno-26-150" name="__codelineno-26-150"></a>    <span class="k">finally</span><span class="p">:</span>
<a id="__codelineno-26-151" name="__codelineno-26-151"></a>        <span class="c1"># Always shut down environment at the end</span>
<a id="__codelineno-26-152" name="__codelineno-26-152"></a>        <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-26-153" name="__codelineno-26-153"></a>
<a id="__codelineno-26-154" name="__codelineno-26-154"></a>
<a id="__codelineno-26-155" name="__codelineno-26-155"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-26-156" name="__codelineno-26-156"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="folded-demo"><strong>Folded Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to load a softbody (cloth) version of a BEHAVIOR dataset object</li>
<li>Understanding how to enable cloth objects to be <code>foldable</code> </li>
<li>Understanding the current heuristics used for gauging a cloth's "foldness"</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">This is a beta feature</p>
<p>Our <code>Folded</code> state is still a WIP, and should not be used to accurately capture the full semantics of folding cloth-enabled objects.</p>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">folded_state_demo</span>
</code></pre></div>
<p class="annotate">This demo loads in three different cloth objects, and allows you to manipulate them (1) while printing out their <code>Folded</code> state status in real-time.</p>
<ol>
<li>Manipulate the object by holding down <strong><code>Shift</code></strong> and then <strong><code>Left-click + Drag</code></strong>!</li>
</ol>
<details class="code">
<summary>folded_state_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span>
<span class="normal"><a href="#__codelineno-28-18">18</a></span>
<span class="normal"><a href="#__codelineno-28-19">19</a></span>
<span class="normal"><a href="#__codelineno-28-20">20</a></span>
<span class="normal"><a href="#__codelineno-28-21">21</a></span>
<span class="normal"><a href="#__codelineno-28-22">22</a></span>
<span class="normal"><a href="#__codelineno-28-23">23</a></span>
<span class="normal"><a href="#__codelineno-28-24">24</a></span>
<span class="normal"><a href="#__codelineno-28-25">25</a></span>
<span class="normal"><a href="#__codelineno-28-26">26</a></span>
<span class="normal"><a href="#__codelineno-28-27">27</a></span>
<span class="normal"><a href="#__codelineno-28-28">28</a></span>
<span class="normal"><a href="#__codelineno-28-29">29</a></span>
<span class="normal"><a href="#__codelineno-28-30">30</a></span>
<span class="normal"><a href="#__codelineno-28-31">31</a></span>
<span class="normal"><a href="#__codelineno-28-32">32</a></span>
<span class="normal"><a href="#__codelineno-28-33">33</a></span>
<span class="normal"><a href="#__codelineno-28-34">34</a></span>
<span class="normal"><a href="#__codelineno-28-35">35</a></span>
<span class="normal"><a href="#__codelineno-28-36">36</a></span>
<span class="normal"><a href="#__codelineno-28-37">37</a></span>
<span class="normal"><a href="#__codelineno-28-38">38</a></span>
<span class="normal"><a href="#__codelineno-28-39">39</a></span>
<span class="normal"><a href="#__codelineno-28-40">40</a></span>
<span class="normal"><a href="#__codelineno-28-41">41</a></span>
<span class="normal"><a href="#__codelineno-28-42">42</a></span>
<span class="normal"><a href="#__codelineno-28-43">43</a></span>
<span class="normal"><a href="#__codelineno-28-44">44</a></span>
<span class="normal"><a href="#__codelineno-28-45">45</a></span>
<span class="normal"><a href="#__codelineno-28-46">46</a></span>
<span class="normal"><a href="#__codelineno-28-47">47</a></span>
<span class="normal"><a href="#__codelineno-28-48">48</a></span>
<span class="normal"><a href="#__codelineno-28-49">49</a></span>
<span class="normal"><a href="#__codelineno-28-50">50</a></span>
<span class="normal"><a href="#__codelineno-28-51">51</a></span>
<span class="normal"><a href="#__codelineno-28-52">52</a></span>
<span class="normal"><a href="#__codelineno-28-53">53</a></span>
<span class="normal"><a href="#__codelineno-28-54">54</a></span>
<span class="normal"><a href="#__codelineno-28-55">55</a></span>
<span class="normal"><a href="#__codelineno-28-56">56</a></span>
<span class="normal"><a href="#__codelineno-28-57">57</a></span>
<span class="normal"><a href="#__codelineno-28-58">58</a></span>
<span class="normal"><a href="#__codelineno-28-59">59</a></span>
<span class="normal"><a href="#__codelineno-28-60">60</a></span>
<span class="normal"><a href="#__codelineno-28-61">61</a></span>
<span class="normal"><a href="#__codelineno-28-62">62</a></span>
<span class="normal"><a href="#__codelineno-28-63">63</a></span>
<span class="normal"><a href="#__codelineno-28-64">64</a></span>
<span class="normal"><a href="#__codelineno-28-65">65</a></span>
<span class="normal"><a href="#__codelineno-28-66">66</a></span>
<span class="normal"><a href="#__codelineno-28-67">67</a></span>
<span class="normal"><a href="#__codelineno-28-68">68</a></span>
<span class="normal"><a href="#__codelineno-28-69">69</a></span>
<span class="normal"><a href="#__codelineno-28-70">70</a></span>
<span class="normal"><a href="#__codelineno-28-71">71</a></span>
<span class="normal"><a href="#__codelineno-28-72">72</a></span>
<span class="normal"><a href="#__codelineno-28-73">73</a></span>
<span class="normal"><a href="#__codelineno-28-74">74</a></span>
<span class="normal"><a href="#__codelineno-28-75">75</a></span>
<span class="normal"><a href="#__codelineno-28-76">76</a></span>
<span class="normal"><a href="#__codelineno-28-77">77</a></span>
<span class="normal"><a href="#__codelineno-28-78">78</a></span>
<span class="normal"><a href="#__codelineno-28-79">79</a></span>
<span class="normal"><a href="#__codelineno-28-80">80</a></span>
<span class="normal"><a href="#__codelineno-28-81">81</a></span>
<span class="normal"><a href="#__codelineno-28-82">82</a></span>
<span class="normal"><a href="#__codelineno-28-83">83</a></span>
<span class="normal"><a href="#__codelineno-28-84">84</a></span>
<span class="normal"><a href="#__codelineno-28-85">85</a></span>
<span class="normal"><a href="#__codelineno-28-86">86</a></span>
<span class="normal"><a href="#__codelineno-28-87">87</a></span>
<span class="normal"><a href="#__codelineno-28-88">88</a></span>
<span class="normal"><a href="#__codelineno-28-89">89</a></span>
<span class="normal"><a href="#__codelineno-28-90">90</a></span>
<span class="normal"><a href="#__codelineno-28-91">91</a></span>
<span class="normal"><a href="#__codelineno-28-92">92</a></span>
<span class="normal"><a href="#__codelineno-28-93">93</a></span>
<span class="normal"><a href="#__codelineno-28-94">94</a></span>
<span class="normal"><a href="#__codelineno-28-95">95</a></span>
<span class="normal"><a href="#__codelineno-28-96">96</a></span>
<span class="normal"><a href="#__codelineno-28-97">97</a></span>
<span class="normal"><a href="#__codelineno-28-98">98</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.constants</span> <span class="kn">import</span> <span class="n">PrimType</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="kn">from</span> <span class="nn">omnigibson.object_states</span> <span class="kn">import</span> <span class="n">Folded</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="c1"># Make sure object states and GPU dynamics are enabled (GPU dynamics needed for cloth)</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="n">gm</span><span class="o">.</span><span class="n">USE_GPU_DYNAMICS</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="sd">    Demo of cloth objects that can potentially be folded.</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-28-18" name="__codelineno-28-18"></a>
<a id="__codelineno-28-19" name="__codelineno-28-19"></a>    <span class="c1"># Create the scene config to load -- empty scene + custom cloth object</span>
<a id="__codelineno-28-20" name="__codelineno-28-20"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-28-21" name="__codelineno-28-21"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-28-22" name="__codelineno-28-22"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-28-23" name="__codelineno-28-23"></a>        <span class="p">},</span>
<a id="__codelineno-28-24" name="__codelineno-28-24"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-28-25" name="__codelineno-28-25"></a>            <span class="p">{</span>
<a id="__codelineno-28-26" name="__codelineno-28-26"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-28-27" name="__codelineno-28-27"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;carpet&quot;</span><span class="p">,</span>
<a id="__codelineno-28-28" name="__codelineno-28-28"></a>                <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;carpet&quot;</span><span class="p">,</span>
<a id="__codelineno-28-29" name="__codelineno-28-29"></a>                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;carpet_0&quot;</span><span class="p">,</span>
<a id="__codelineno-28-30" name="__codelineno-28-30"></a>                <span class="s2">&quot;prim_type&quot;</span><span class="p">:</span> <span class="n">PrimType</span><span class="o">.</span><span class="n">CLOTH</span><span class="p">,</span>
<a id="__codelineno-28-31" name="__codelineno-28-31"></a>                <span class="s2">&quot;abilities&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;foldable&quot;</span><span class="p">:</span> <span class="p">{}},</span>
<a id="__codelineno-28-32" name="__codelineno-28-32"></a>                <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
<a id="__codelineno-28-33" name="__codelineno-28-33"></a>            <span class="p">},</span>
<a id="__codelineno-28-34" name="__codelineno-28-34"></a>            <span class="p">{</span>
<a id="__codelineno-28-35" name="__codelineno-28-35"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-28-36" name="__codelineno-28-36"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dishtowel&quot;</span><span class="p">,</span>
<a id="__codelineno-28-37" name="__codelineno-28-37"></a>                <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;dishtowel&quot;</span><span class="p">,</span>
<a id="__codelineno-28-38" name="__codelineno-28-38"></a>                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;Tag_Dishtowel_Basket_Weave_Red&quot;</span><span class="p">,</span>
<a id="__codelineno-28-39" name="__codelineno-28-39"></a>                <span class="s2">&quot;prim_type&quot;</span><span class="p">:</span> <span class="n">PrimType</span><span class="o">.</span><span class="n">CLOTH</span><span class="p">,</span>
<a id="__codelineno-28-40" name="__codelineno-28-40"></a>                <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
<a id="__codelineno-28-41" name="__codelineno-28-41"></a>                <span class="s2">&quot;abilities&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;foldable&quot;</span><span class="p">:</span> <span class="p">{}},</span>
<a id="__codelineno-28-42" name="__codelineno-28-42"></a>                <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
<a id="__codelineno-28-43" name="__codelineno-28-43"></a>            <span class="p">},</span>
<a id="__codelineno-28-44" name="__codelineno-28-44"></a>            <span class="p">{</span>
<a id="__codelineno-28-45" name="__codelineno-28-45"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-28-46" name="__codelineno-28-46"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;shirt&quot;</span><span class="p">,</span>
<a id="__codelineno-28-47" name="__codelineno-28-47"></a>                <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;t-shirt&quot;</span><span class="p">,</span>
<a id="__codelineno-28-48" name="__codelineno-28-48"></a>                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;t-shirt_000&quot;</span><span class="p">,</span>
<a id="__codelineno-28-49" name="__codelineno-28-49"></a>                <span class="s2">&quot;prim_type&quot;</span><span class="p">:</span> <span class="n">PrimType</span><span class="o">.</span><span class="n">CLOTH</span><span class="p">,</span>
<a id="__codelineno-28-50" name="__codelineno-28-50"></a>                <span class="s2">&quot;scale&quot;</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>
<a id="__codelineno-28-51" name="__codelineno-28-51"></a>                <span class="s2">&quot;abilities&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;foldable&quot;</span><span class="p">:</span> <span class="p">{}},</span>
<a id="__codelineno-28-52" name="__codelineno-28-52"></a>                <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
<a id="__codelineno-28-53" name="__codelineno-28-53"></a>                <span class="s2">&quot;orientation&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.7071</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.7071</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span>
<a id="__codelineno-28-54" name="__codelineno-28-54"></a>            <span class="p">},</span>
<a id="__codelineno-28-55" name="__codelineno-28-55"></a>        <span class="p">],</span>
<a id="__codelineno-28-56" name="__codelineno-28-56"></a>    <span class="p">}</span>
<a id="__codelineno-28-57" name="__codelineno-28-57"></a>
<a id="__codelineno-28-58" name="__codelineno-28-58"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-28-59" name="__codelineno-28-59"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-28-60" name="__codelineno-28-60"></a>
<a id="__codelineno-28-61" name="__codelineno-28-61"></a>    <span class="c1"># Grab object references</span>
<a id="__codelineno-28-62" name="__codelineno-28-62"></a>    <span class="n">carpet</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;carpet&quot;</span><span class="p">)</span>
<a id="__codelineno-28-63" name="__codelineno-28-63"></a>    <span class="n">dishtowel</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;dishtowel&quot;</span><span class="p">)</span>
<a id="__codelineno-28-64" name="__codelineno-28-64"></a>    <span class="n">shirt</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;shirt&quot;</span><span class="p">)</span>
<a id="__codelineno-28-65" name="__codelineno-28-65"></a>
<a id="__codelineno-28-66" name="__codelineno-28-66"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="mi">100</span> <span class="k">if</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
<a id="__codelineno-28-67" name="__codelineno-28-67"></a>    <span class="n">steps</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-28-68" name="__codelineno-28-68"></a>
<a id="__codelineno-28-69" name="__codelineno-28-69"></a>    <span class="c1"># Criterion #1: the area of the convex hull of the projection of points onto the x-y plane should be reduced</span>
<a id="__codelineno-28-70" name="__codelineno-28-70"></a>    <span class="c1"># Criterion #2: the diagonal of the convex hull of the projection of points onto the x-y plane should be reduced</span>
<a id="__codelineno-28-71" name="__codelineno-28-71"></a>    <span class="c1"># Criterion #3: the face normals of the cloth should mostly point along the z-axis</span>
<a id="__codelineno-28-72" name="__codelineno-28-72"></a>    <span class="k">while</span> <span class="n">steps</span> <span class="o">!=</span> <span class="n">max_steps</span><span class="p">:</span>
<a id="__codelineno-28-73" name="__codelineno-28-73"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<a id="__codelineno-28-74" name="__codelineno-28-74"></a>
<a id="__codelineno-28-75" name="__codelineno-28-75"></a>        <span class="n">flag_area_reduction</span><span class="p">,</span> <span class="n">flag_diagonal_reduction</span> <span class="o">=</span> <span class="n">carpet</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Folded</span><span class="p">]</span><span class="o">.</span><span class="n">check_projection_area_and_diagonal</span><span class="p">()</span>
<a id="__codelineno-28-76" name="__codelineno-28-76"></a>        <span class="n">flag_smoothness</span> <span class="o">=</span> <span class="n">carpet</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Folded</span><span class="p">]</span><span class="o">.</span><span class="n">check_smoothness</span><span class="p">()</span>
<a id="__codelineno-28-77" name="__codelineno-28-77"></a>        <span class="n">folded</span> <span class="o">=</span> <span class="n">flag_area_reduction</span> <span class="ow">and</span> <span class="n">flag_diagonal_reduction</span> <span class="ow">and</span> <span class="n">flag_smoothness</span>
<a id="__codelineno-28-78" name="__codelineno-28-78"></a>        <span class="n">info</span> <span class="o">=</span> <span class="s1">&#39;carpet: [folded] </span><span class="si">%d</span><span class="s1"> [A] </span><span class="si">%d</span><span class="s1"> [D] </span><span class="si">%d</span><span class="s1"> [S] </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">folded</span><span class="p">,</span> <span class="n">flag_area_reduction</span><span class="p">,</span> <span class="n">flag_diagonal_reduction</span><span class="p">,</span> <span class="n">flag_smoothness</span><span class="p">)</span>
<a id="__codelineno-28-79" name="__codelineno-28-79"></a>
<a id="__codelineno-28-80" name="__codelineno-28-80"></a>        <span class="n">flag_area_reduction</span><span class="p">,</span> <span class="n">flag_diagonal_reduction</span> <span class="o">=</span> <span class="n">dishtowel</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Folded</span><span class="p">]</span><span class="o">.</span><span class="n">check_projection_area_and_diagonal</span><span class="p">()</span>
<a id="__codelineno-28-81" name="__codelineno-28-81"></a>        <span class="n">flag_smoothness</span> <span class="o">=</span> <span class="n">dishtowel</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Folded</span><span class="p">]</span><span class="o">.</span><span class="n">check_smoothness</span><span class="p">()</span>
<a id="__codelineno-28-82" name="__codelineno-28-82"></a>        <span class="n">folded</span> <span class="o">=</span> <span class="n">flag_area_reduction</span> <span class="ow">and</span> <span class="n">flag_diagonal_reduction</span> <span class="ow">and</span> <span class="n">flag_smoothness</span>
<a id="__codelineno-28-83" name="__codelineno-28-83"></a>        <span class="n">info</span> <span class="o">+=</span> <span class="s2">&quot; || dishtowel: [folded] </span><span class="si">%d</span><span class="s2"> [A] </span><span class="si">%d</span><span class="s2"> [D] </span><span class="si">%d</span><span class="s2"> [S] </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">folded</span><span class="p">,</span> <span class="n">flag_area_reduction</span><span class="p">,</span> <span class="n">flag_diagonal_reduction</span><span class="p">,</span> <span class="n">flag_smoothness</span><span class="p">)</span>
<a id="__codelineno-28-84" name="__codelineno-28-84"></a>
<a id="__codelineno-28-85" name="__codelineno-28-85"></a>        <span class="n">flag_area_reduction</span><span class="p">,</span> <span class="n">flag_diagonal_reduction</span> <span class="o">=</span> <span class="n">shirt</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Folded</span><span class="p">]</span><span class="o">.</span><span class="n">check_projection_area_and_diagonal</span><span class="p">()</span>
<a id="__codelineno-28-86" name="__codelineno-28-86"></a>        <span class="n">flag_smoothness</span> <span class="o">=</span> <span class="n">shirt</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Folded</span><span class="p">]</span><span class="o">.</span><span class="n">check_smoothness</span><span class="p">()</span>
<a id="__codelineno-28-87" name="__codelineno-28-87"></a>        <span class="n">folded</span> <span class="o">=</span> <span class="n">flag_area_reduction</span> <span class="ow">and</span> <span class="n">flag_diagonal_reduction</span> <span class="ow">and</span> <span class="n">flag_smoothness</span>
<a id="__codelineno-28-88" name="__codelineno-28-88"></a>        <span class="n">info</span> <span class="o">+=</span> <span class="s2">&quot; || tshirt: [folded] </span><span class="si">%d</span><span class="s2"> [A] </span><span class="si">%d</span><span class="s2"> [D] </span><span class="si">%d</span><span class="s2"> [S] </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">folded</span><span class="p">,</span> <span class="n">flag_area_reduction</span><span class="p">,</span> <span class="n">flag_diagonal_reduction</span><span class="p">,</span> <span class="n">flag_smoothness</span><span class="p">)</span>
<a id="__codelineno-28-89" name="__codelineno-28-89"></a>
<a id="__codelineno-28-90" name="__codelineno-28-90"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
<a id="__codelineno-28-91" name="__codelineno-28-91"></a>        <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-28-92" name="__codelineno-28-92"></a>
<a id="__codelineno-28-93" name="__codelineno-28-93"></a>    <span class="c1"># Shut down env at the end</span>
<a id="__codelineno-28-94" name="__codelineno-28-94"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-28-95" name="__codelineno-28-95"></a>
<a id="__codelineno-28-96" name="__codelineno-28-96"></a>
<a id="__codelineno-28-97" name="__codelineno-28-97"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-28-98" name="__codelineno-28-98"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="temperature-demo"><strong>Temperature Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to dynamically sample kinematic states for BEHAVIOR dataset objects</li>
<li>Understanding how temperature changes are propagated to individual objects from individual heat sources or sinks</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">temperature_demo</span>
</code></pre></div>
<p>This demo loads in various heat sources and sinks, and places an apple within close proximity to each of them. As the environment steps, each apple's temperature is printed in real-time, showcasing <strong><code>OmniGibson</code></strong>'s rudimentary temperature dynamics.</p>
<details class="code">
<summary>temperature_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">  1</a></span>
<span class="normal"><a href="#__codelineno-30-2">  2</a></span>
<span class="normal"><a href="#__codelineno-30-3">  3</a></span>
<span class="normal"><a href="#__codelineno-30-4">  4</a></span>
<span class="normal"><a href="#__codelineno-30-5">  5</a></span>
<span class="normal"><a href="#__codelineno-30-6">  6</a></span>
<span class="normal"><a href="#__codelineno-30-7">  7</a></span>
<span class="normal"><a href="#__codelineno-30-8">  8</a></span>
<span class="normal"><a href="#__codelineno-30-9">  9</a></span>
<span class="normal"><a href="#__codelineno-30-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-30-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-30-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-30-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-30-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-30-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-30-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-30-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-30-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-30-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-30-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-30-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-30-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-30-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-30-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-30-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-30-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-30-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-30-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-30-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-30-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-30-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-30-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-30-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-30-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-30-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-30-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-30-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-30-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-30-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-30-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-30-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-30-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-30-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-30-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-30-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-30-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-30-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-30-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-30-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-30-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-30-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-30-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-30-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-30-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-30-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-30-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-30-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-30-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-30-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-30-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-30-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-30-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-30-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-30-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-30-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-30-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-30-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-30-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-30-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-30-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-30-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-30-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-30-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-30-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-30-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-30-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-30-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-30-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-30-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-30-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-30-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-30-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-30-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-30-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-30-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-30-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-30-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-30-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-30-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-30-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-30-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-30-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-30-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-30-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-30-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-30-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-30-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-30-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-30-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-30-100">100</a></span>
<span class="normal"><a href="#__codelineno-30-101">101</a></span>
<span class="normal"><a href="#__codelineno-30-102">102</a></span>
<span class="normal"><a href="#__codelineno-30-103">103</a></span>
<span class="normal"><a href="#__codelineno-30-104">104</a></span>
<span class="normal"><a href="#__codelineno-30-105">105</a></span>
<span class="normal"><a href="#__codelineno-30-106">106</a></span>
<span class="normal"><a href="#__codelineno-30-107">107</a></span>
<span class="normal"><a href="#__codelineno-30-108">108</a></span>
<span class="normal"><a href="#__codelineno-30-109">109</a></span>
<span class="normal"><a href="#__codelineno-30-110">110</a></span>
<span class="normal"><a href="#__codelineno-30-111">111</a></span>
<span class="normal"><a href="#__codelineno-30-112">112</a></span>
<span class="normal"><a href="#__codelineno-30-113">113</a></span>
<span class="normal"><a href="#__codelineno-30-114">114</a></span>
<span class="normal"><a href="#__codelineno-30-115">115</a></span>
<span class="normal"><a href="#__codelineno-30-116">116</a></span>
<span class="normal"><a href="#__codelineno-30-117">117</a></span>
<span class="normal"><a href="#__codelineno-30-118">118</a></span>
<span class="normal"><a href="#__codelineno-30-119">119</a></span>
<span class="normal"><a href="#__codelineno-30-120">120</a></span>
<span class="normal"><a href="#__codelineno-30-121">121</a></span>
<span class="normal"><a href="#__codelineno-30-122">122</a></span>
<span class="normal"><a href="#__codelineno-30-123">123</a></span>
<span class="normal"><a href="#__codelineno-30-124">124</a></span>
<span class="normal"><a href="#__codelineno-30-125">125</a></span>
<span class="normal"><a href="#__codelineno-30-126">126</a></span>
<span class="normal"><a href="#__codelineno-30-127">127</a></span>
<span class="normal"><a href="#__codelineno-30-128">128</a></span>
<span class="normal"><a href="#__codelineno-30-129">129</a></span>
<span class="normal"><a href="#__codelineno-30-130">130</a></span>
<span class="normal"><a href="#__codelineno-30-131">131</a></span>
<span class="normal"><a href="#__codelineno-30-132">132</a></span>
<span class="normal"><a href="#__codelineno-30-133">133</a></span>
<span class="normal"><a href="#__codelineno-30-134">134</a></span>
<span class="normal"><a href="#__codelineno-30-135">135</a></span>
<span class="normal"><a href="#__codelineno-30-136">136</a></span>
<span class="normal"><a href="#__codelineno-30-137">137</a></span>
<span class="normal"><a href="#__codelineno-30-138">138</a></span>
<span class="normal"><a href="#__codelineno-30-139">139</a></span>
<span class="normal"><a href="#__codelineno-30-140">140</a></span>
<span class="normal"><a href="#__codelineno-30-141">141</a></span>
<span class="normal"><a href="#__codelineno-30-142">142</a></span>
<span class="normal"><a href="#__codelineno-30-143">143</a></span>
<span class="normal"><a href="#__codelineno-30-144">144</a></span>
<span class="normal"><a href="#__codelineno-30-145">145</a></span>
<span class="normal"><a href="#__codelineno-30-146">146</a></span>
<span class="normal"><a href="#__codelineno-30-147">147</a></span>
<span class="normal"><a href="#__codelineno-30-148">148</a></span>
<span class="normal"><a href="#__codelineno-30-149">149</a></span>
<span class="normal"><a href="#__codelineno-30-150">150</a></span>
<span class="normal"><a href="#__codelineno-30-151">151</a></span>
<span class="normal"><a href="#__codelineno-30-152">152</a></span>
<span class="normal"><a href="#__codelineno-30-153">153</a></span>
<span class="normal"><a href="#__codelineno-30-154">154</a></span>
<span class="normal"><a href="#__codelineno-30-155">155</a></span>
<span class="normal"><a href="#__codelineno-30-156">156</a></span>
<span class="normal"><a href="#__codelineno-30-157">157</a></span>
<span class="normal"><a href="#__codelineno-30-158">158</a></span>
<span class="normal"><a href="#__codelineno-30-159">159</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="kn">from</span> <span class="nn">omnigibson</span> <span class="kn">import</span> <span class="n">object_states</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="c1"># Make sure object states are enabled</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-30-15" name="__codelineno-30-15"></a><span class="sd">    Demo of temperature change</span>
<a id="__codelineno-30-16" name="__codelineno-30-16"></a><span class="sd">    Loads a stove, a microwave and an oven, all toggled on, and five frozen apples</span>
<a id="__codelineno-30-17" name="__codelineno-30-17"></a><span class="sd">    The user can move the apples to see them change from frozen, to normal temperature, to cooked and burnt</span>
<a id="__codelineno-30-18" name="__codelineno-30-18"></a><span class="sd">    This demo also shows how to load objects ToggledOn and how to set the initial temperature of an object</span>
<a id="__codelineno-30-19" name="__codelineno-30-19"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-30-20" name="__codelineno-30-20"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-30-21" name="__codelineno-30-21"></a>
<a id="__codelineno-30-22" name="__codelineno-30-22"></a>    <span class="c1"># Define specific objects we want to load in with the scene directly</span>
<a id="__codelineno-30-23" name="__codelineno-30-23"></a>    <span class="n">obj_configs</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-30-24" name="__codelineno-30-24"></a>
<a id="__codelineno-30-25" name="__codelineno-30-25"></a>    <span class="c1"># Light</span>
<a id="__codelineno-30-26" name="__codelineno-30-26"></a>    <span class="n">obj_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-30-27" name="__codelineno-30-27"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;LightObject&quot;</span><span class="p">,</span>
<a id="__codelineno-30-28" name="__codelineno-30-28"></a>        <span class="n">light_type</span><span class="o">=</span><span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-30-29" name="__codelineno-30-29"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;light&quot;</span><span class="p">,</span>
<a id="__codelineno-30-30" name="__codelineno-30-30"></a>        <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-30-31" name="__codelineno-30-31"></a>        <span class="n">intensity</span><span class="o">=</span><span class="mf">1e5</span><span class="p">,</span>
<a id="__codelineno-30-32" name="__codelineno-30-32"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<a id="__codelineno-30-33" name="__codelineno-30-33"></a>    <span class="p">))</span>
<a id="__codelineno-30-34" name="__codelineno-30-34"></a>
<a id="__codelineno-30-35" name="__codelineno-30-35"></a>    <span class="c1"># Stove</span>
<a id="__codelineno-30-36" name="__codelineno-30-36"></a>    <span class="n">obj_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-30-37" name="__codelineno-30-37"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-30-38" name="__codelineno-30-38"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;stove&quot;</span><span class="p">,</span>
<a id="__codelineno-30-39" name="__codelineno-30-39"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;stove&quot;</span><span class="p">,</span>
<a id="__codelineno-30-40" name="__codelineno-30-40"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;101943&quot;</span><span class="p">,</span>
<a id="__codelineno-30-41" name="__codelineno-30-41"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">],</span>
<a id="__codelineno-30-42" name="__codelineno-30-42"></a>    <span class="p">))</span>
<a id="__codelineno-30-43" name="__codelineno-30-43"></a>
<a id="__codelineno-30-44" name="__codelineno-30-44"></a>    <span class="c1"># Microwave</span>
<a id="__codelineno-30-45" name="__codelineno-30-45"></a>    <span class="n">obj_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-30-46" name="__codelineno-30-46"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-30-47" name="__codelineno-30-47"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;microwave&quot;</span><span class="p">,</span>
<a id="__codelineno-30-48" name="__codelineno-30-48"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;microwave&quot;</span><span class="p">,</span>
<a id="__codelineno-30-49" name="__codelineno-30-49"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;7128&quot;</span><span class="p">,</span>
<a id="__codelineno-30-50" name="__codelineno-30-50"></a>        <span class="n">scale</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
<a id="__codelineno-30-51" name="__codelineno-30-51"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.094</span><span class="p">],</span>
<a id="__codelineno-30-52" name="__codelineno-30-52"></a>    <span class="p">))</span>
<a id="__codelineno-30-53" name="__codelineno-30-53"></a>
<a id="__codelineno-30-54" name="__codelineno-30-54"></a>    <span class="c1"># Oven</span>
<a id="__codelineno-30-55" name="__codelineno-30-55"></a>    <span class="n">obj_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-30-56" name="__codelineno-30-56"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-30-57" name="__codelineno-30-57"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;oven&quot;</span><span class="p">,</span>
<a id="__codelineno-30-58" name="__codelineno-30-58"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;oven&quot;</span><span class="p">,</span>
<a id="__codelineno-30-59" name="__codelineno-30-59"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;7120&quot;</span><span class="p">,</span>
<a id="__codelineno-30-60" name="__codelineno-30-60"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">1.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.80</span><span class="p">],</span>
<a id="__codelineno-30-61" name="__codelineno-30-61"></a>    <span class="p">))</span>
<a id="__codelineno-30-62" name="__codelineno-30-62"></a>
<a id="__codelineno-30-63" name="__codelineno-30-63"></a>    <span class="c1"># Tray</span>
<a id="__codelineno-30-64" name="__codelineno-30-64"></a>    <span class="n">obj_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-30-65" name="__codelineno-30-65"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-30-66" name="__codelineno-30-66"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;tray&quot;</span><span class="p">,</span>
<a id="__codelineno-30-67" name="__codelineno-30-67"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;tray&quot;</span><span class="p">,</span>
<a id="__codelineno-30-68" name="__codelineno-30-68"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;tray_000&quot;</span><span class="p">,</span>
<a id="__codelineno-30-69" name="__codelineno-30-69"></a>        <span class="n">scale</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span>
<a id="__codelineno-30-70" name="__codelineno-30-70"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.24</span><span class="p">],</span>
<a id="__codelineno-30-71" name="__codelineno-30-71"></a>    <span class="p">))</span>
<a id="__codelineno-30-72" name="__codelineno-30-72"></a>
<a id="__codelineno-30-73" name="__codelineno-30-73"></a>    <span class="c1"># Fridge</span>
<a id="__codelineno-30-74" name="__codelineno-30-74"></a>    <span class="n">obj_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-30-75" name="__codelineno-30-75"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-30-76" name="__codelineno-30-76"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fridge&quot;</span><span class="p">,</span>
<a id="__codelineno-30-77" name="__codelineno-30-77"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;fridge&quot;</span><span class="p">,</span>
<a id="__codelineno-30-78" name="__codelineno-30-78"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;12252&quot;</span><span class="p">,</span>
<a id="__codelineno-30-79" name="__codelineno-30-79"></a>        <span class="n">abilities</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-30-80" name="__codelineno-30-80"></a>            <span class="s2">&quot;coldSource&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-30-81" name="__codelineno-30-81"></a>                <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">100.0</span><span class="p">,</span>
<a id="__codelineno-30-82" name="__codelineno-30-82"></a>                <span class="s2">&quot;requires_inside&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-30-83" name="__codelineno-30-83"></a>            <span class="p">}</span>
<a id="__codelineno-30-84" name="__codelineno-30-84"></a>        <span class="p">},</span>
<a id="__codelineno-30-85" name="__codelineno-30-85"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">1.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.90</span><span class="p">],</span>
<a id="__codelineno-30-86" name="__codelineno-30-86"></a>    <span class="p">))</span>
<a id="__codelineno-30-87" name="__codelineno-30-87"></a>
<a id="__codelineno-30-88" name="__codelineno-30-88"></a>    <span class="c1"># 5 Apples</span>
<a id="__codelineno-30-89" name="__codelineno-30-89"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<a id="__codelineno-30-90" name="__codelineno-30-90"></a>        <span class="n">obj_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-30-91" name="__codelineno-30-91"></a>            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-30-92" name="__codelineno-30-92"></a>            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;apple</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-30-93" name="__codelineno-30-93"></a>            <span class="n">category</span><span class="o">=</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span>
<a id="__codelineno-30-94" name="__codelineno-30-94"></a>            <span class="n">model</span><span class="o">=</span><span class="s2">&quot;00_0&quot;</span><span class="p">,</span>
<a id="__codelineno-30-95" name="__codelineno-30-95"></a>            <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">1.65</span><span class="p">],</span>
<a id="__codelineno-30-96" name="__codelineno-30-96"></a>        <span class="p">))</span>
<a id="__codelineno-30-97" name="__codelineno-30-97"></a>
<a id="__codelineno-30-98" name="__codelineno-30-98"></a>    <span class="c1"># Create the scene config to load -- empty scene with desired objects</span>
<a id="__codelineno-30-99" name="__codelineno-30-99"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-30-100" name="__codelineno-30-100"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-30-101" name="__codelineno-30-101"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-30-102" name="__codelineno-30-102"></a>        <span class="p">},</span>
<a id="__codelineno-30-103" name="__codelineno-30-103"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="n">obj_configs</span><span class="p">,</span>
<a id="__codelineno-30-104" name="__codelineno-30-104"></a>    <span class="p">}</span>
<a id="__codelineno-30-105" name="__codelineno-30-105"></a>
<a id="__codelineno-30-106" name="__codelineno-30-106"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-30-107" name="__codelineno-30-107"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span> <span class="o">/</span> <span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-30-108" name="__codelineno-30-108"></a>
<a id="__codelineno-30-109" name="__codelineno-30-109"></a>    <span class="c1"># Get reference to relevant objects</span>
<a id="__codelineno-30-110" name="__codelineno-30-110"></a>    <span class="n">stove</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;stove&quot;</span><span class="p">)</span>
<a id="__codelineno-30-111" name="__codelineno-30-111"></a>    <span class="n">microwave</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;microwave&quot;</span><span class="p">)</span>
<a id="__codelineno-30-112" name="__codelineno-30-112"></a>    <span class="n">oven</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;oven&quot;</span><span class="p">)</span>
<a id="__codelineno-30-113" name="__codelineno-30-113"></a>    <span class="n">tray</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;tray&quot;</span><span class="p">)</span>
<a id="__codelineno-30-114" name="__codelineno-30-114"></a>    <span class="n">fridge</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;fridge&quot;</span><span class="p">)</span>
<a id="__codelineno-30-115" name="__codelineno-30-115"></a>    <span class="n">apples</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="s2">&quot;apple&quot;</span><span class="p">))</span>
<a id="__codelineno-30-116" name="__codelineno-30-116"></a>
<a id="__codelineno-30-117" name="__codelineno-30-117"></a>    <span class="c1"># Set camera to appropriate viewing pose</span>
<a id="__codelineno-30-118" name="__codelineno-30-118"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-30-119" name="__codelineno-30-119"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">0.46938863</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.97887141</span><span class="p">,</span>  <span class="mf">1.64106008</span><span class="p">]),</span>
<a id="__codelineno-30-120" name="__codelineno-30-120"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.63311689</span><span class="p">,</span> <span class="mf">0.00127259</span><span class="p">,</span> <span class="mf">0.00155577</span><span class="p">,</span> <span class="mf">0.77405359</span><span class="p">]),</span>
<a id="__codelineno-30-121" name="__codelineno-30-121"></a>    <span class="p">)</span>
<a id="__codelineno-30-122" name="__codelineno-30-122"></a>
<a id="__codelineno-30-123" name="__codelineno-30-123"></a>    <span class="c1"># Let objects settle</span>
<a id="__codelineno-30-124" name="__codelineno-30-124"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>
<a id="__codelineno-30-125" name="__codelineno-30-125"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-30-126" name="__codelineno-30-126"></a>
<a id="__codelineno-30-127" name="__codelineno-30-127"></a>    <span class="c1"># Turn on all scene objects</span>
<a id="__codelineno-30-128" name="__codelineno-30-128"></a>    <span class="n">stove</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-30-129" name="__codelineno-30-129"></a>    <span class="n">microwave</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-30-130" name="__codelineno-30-130"></a>    <span class="n">oven</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-30-131" name="__codelineno-30-131"></a>
<a id="__codelineno-30-132" name="__codelineno-30-132"></a>    <span class="c1"># Set initial temperature of the apples to -50 degrees Celsius, and move the apples to different objects</span>
<a id="__codelineno-30-133" name="__codelineno-30-133"></a>    <span class="k">for</span> <span class="n">apple</span> <span class="ow">in</span> <span class="n">apples</span><span class="p">:</span>
<a id="__codelineno-30-134" name="__codelineno-30-134"></a>        <span class="n">apple</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="o">-</span><span class="mi">50</span><span class="p">)</span>
<a id="__codelineno-30-135" name="__codelineno-30-135"></a>    <span class="n">apples</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Inside</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">oven</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-30-136" name="__codelineno-30-136"></a>    <span class="n">apples</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">stove</span><span class="o">.</span><span class="n">links</span><span class="p">[</span><span class="s2">&quot;heat_source_link&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]))</span>
<a id="__codelineno-30-137" name="__codelineno-30-137"></a>    <span class="n">apples</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">OnTop</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">tray</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-30-138" name="__codelineno-30-138"></a>    <span class="n">apples</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Inside</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">fridge</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-30-139" name="__codelineno-30-139"></a>    <span class="n">apples</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Inside</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">microwave</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-30-140" name="__codelineno-30-140"></a>
<a id="__codelineno-30-141" name="__codelineno-30-141"></a>    <span class="n">steps</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-30-142" name="__codelineno-30-142"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">1000</span>
<a id="__codelineno-30-143" name="__codelineno-30-143"></a>
<a id="__codelineno-30-144" name="__codelineno-30-144"></a>    <span class="c1"># Main recording loop</span>
<a id="__codelineno-30-145" name="__codelineno-30-145"></a>    <span class="n">locations</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">loc</span><span class="si">:</span><span class="s1">&gt;20</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Inside oven&quot;</span><span class="p">,</span> <span class="s2">&quot;On stove&quot;</span><span class="p">,</span> <span class="s2">&quot;On tray&quot;</span><span class="p">,</span> <span class="s2">&quot;Inside fridge&quot;</span><span class="p">,</span> <span class="s2">&quot;Inside microwave&quot;</span><span class="p">]]</span>
<a id="__codelineno-30-146" name="__codelineno-30-146"></a>    <span class="nb">print</span><span class="p">()</span>
<a id="__codelineno-30-147" name="__codelineno-30-147"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;Apple location:&#39;</span><span class="si">:</span><span class="s2">&lt;20</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">locations</span><span class="p">)</span>
<a id="__codelineno-30-148" name="__codelineno-30-148"></a>    <span class="k">while</span> <span class="n">steps</span> <span class="o">!=</span> <span class="n">max_steps</span><span class="p">:</span>
<a id="__codelineno-30-149" name="__codelineno-30-149"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-30-150" name="__codelineno-30-150"></a>        <span class="n">temps</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">apple</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span><span class="si">:</span><span class="s2">&gt;20.2f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">apple</span> <span class="ow">in</span> <span class="n">apples</span><span class="p">]</span>
<a id="__codelineno-30-151" name="__codelineno-30-151"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39;Apple temperature:&#39;</span><span class="si">:</span><span class="s2">&lt;20</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">temps</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-30-152" name="__codelineno-30-152"></a>        <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-30-153" name="__codelineno-30-153"></a>
<a id="__codelineno-30-154" name="__codelineno-30-154"></a>    <span class="c1"># Always close env at the end</span>
<a id="__codelineno-30-155" name="__codelineno-30-155"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-30-156" name="__codelineno-30-156"></a>
<a id="__codelineno-30-157" name="__codelineno-30-157"></a>
<a id="__codelineno-30-158" name="__codelineno-30-158"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-30-159" name="__codelineno-30-159"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="heat-source-or-sink-demo"><strong>Heat Source or Sink Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how a heat source (or sink) is visualized in <strong><code>OmniGibson</code></strong></li>
<li>Understanding how dynamic fire visuals are generated in real-time</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">heat_source_or_sink_demo</span>
</code></pre></div>
<p>This demo loads in a stove and toggles its <code>HeatSource</code> on and off, showcasing the dynamic fire visuals available in <strong><code>OmniGibson</code></strong>.</p>
<details class="code">
<summary>heat_source_or_sink_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span>
<span class="normal"><a href="#__codelineno-32-14">14</a></span>
<span class="normal"><a href="#__codelineno-32-15">15</a></span>
<span class="normal"><a href="#__codelineno-32-16">16</a></span>
<span class="normal"><a href="#__codelineno-32-17">17</a></span>
<span class="normal"><a href="#__codelineno-32-18">18</a></span>
<span class="normal"><a href="#__codelineno-32-19">19</a></span>
<span class="normal"><a href="#__codelineno-32-20">20</a></span>
<span class="normal"><a href="#__codelineno-32-21">21</a></span>
<span class="normal"><a href="#__codelineno-32-22">22</a></span>
<span class="normal"><a href="#__codelineno-32-23">23</a></span>
<span class="normal"><a href="#__codelineno-32-24">24</a></span>
<span class="normal"><a href="#__codelineno-32-25">25</a></span>
<span class="normal"><a href="#__codelineno-32-26">26</a></span>
<span class="normal"><a href="#__codelineno-32-27">27</a></span>
<span class="normal"><a href="#__codelineno-32-28">28</a></span>
<span class="normal"><a href="#__codelineno-32-29">29</a></span>
<span class="normal"><a href="#__codelineno-32-30">30</a></span>
<span class="normal"><a href="#__codelineno-32-31">31</a></span>
<span class="normal"><a href="#__codelineno-32-32">32</a></span>
<span class="normal"><a href="#__codelineno-32-33">33</a></span>
<span class="normal"><a href="#__codelineno-32-34">34</a></span>
<span class="normal"><a href="#__codelineno-32-35">35</a></span>
<span class="normal"><a href="#__codelineno-32-36">36</a></span>
<span class="normal"><a href="#__codelineno-32-37">37</a></span>
<span class="normal"><a href="#__codelineno-32-38">38</a></span>
<span class="normal"><a href="#__codelineno-32-39">39</a></span>
<span class="normal"><a href="#__codelineno-32-40">40</a></span>
<span class="normal"><a href="#__codelineno-32-41">41</a></span>
<span class="normal"><a href="#__codelineno-32-42">42</a></span>
<span class="normal"><a href="#__codelineno-32-43">43</a></span>
<span class="normal"><a href="#__codelineno-32-44">44</a></span>
<span class="normal"><a href="#__codelineno-32-45">45</a></span>
<span class="normal"><a href="#__codelineno-32-46">46</a></span>
<span class="normal"><a href="#__codelineno-32-47">47</a></span>
<span class="normal"><a href="#__codelineno-32-48">48</a></span>
<span class="normal"><a href="#__codelineno-32-49">49</a></span>
<span class="normal"><a href="#__codelineno-32-50">50</a></span>
<span class="normal"><a href="#__codelineno-32-51">51</a></span>
<span class="normal"><a href="#__codelineno-32-52">52</a></span>
<span class="normal"><a href="#__codelineno-32-53">53</a></span>
<span class="normal"><a href="#__codelineno-32-54">54</a></span>
<span class="normal"><a href="#__codelineno-32-55">55</a></span>
<span class="normal"><a href="#__codelineno-32-56">56</a></span>
<span class="normal"><a href="#__codelineno-32-57">57</a></span>
<span class="normal"><a href="#__codelineno-32-58">58</a></span>
<span class="normal"><a href="#__codelineno-32-59">59</a></span>
<span class="normal"><a href="#__codelineno-32-60">60</a></span>
<span class="normal"><a href="#__codelineno-32-61">61</a></span>
<span class="normal"><a href="#__codelineno-32-62">62</a></span>
<span class="normal"><a href="#__codelineno-32-63">63</a></span>
<span class="normal"><a href="#__codelineno-32-64">64</a></span>
<span class="normal"><a href="#__codelineno-32-65">65</a></span>
<span class="normal"><a href="#__codelineno-32-66">66</a></span>
<span class="normal"><a href="#__codelineno-32-67">67</a></span>
<span class="normal"><a href="#__codelineno-32-68">68</a></span>
<span class="normal"><a href="#__codelineno-32-69">69</a></span>
<span class="normal"><a href="#__codelineno-32-70">70</a></span>
<span class="normal"><a href="#__codelineno-32-71">71</a></span>
<span class="normal"><a href="#__codelineno-32-72">72</a></span>
<span class="normal"><a href="#__codelineno-32-73">73</a></span>
<span class="normal"><a href="#__codelineno-32-74">74</a></span>
<span class="normal"><a href="#__codelineno-32-75">75</a></span>
<span class="normal"><a href="#__codelineno-32-76">76</a></span>
<span class="normal"><a href="#__codelineno-32-77">77</a></span>
<span class="normal"><a href="#__codelineno-32-78">78</a></span>
<span class="normal"><a href="#__codelineno-32-79">79</a></span>
<span class="normal"><a href="#__codelineno-32-80">80</a></span>
<span class="normal"><a href="#__codelineno-32-81">81</a></span>
<span class="normal"><a href="#__codelineno-32-82">82</a></span>
<span class="normal"><a href="#__codelineno-32-83">83</a></span>
<span class="normal"><a href="#__codelineno-32-84">84</a></span>
<span class="normal"><a href="#__codelineno-32-85">85</a></span>
<span class="normal"><a href="#__codelineno-32-86">86</a></span>
<span class="normal"><a href="#__codelineno-32-87">87</a></span>
<span class="normal"><a href="#__codelineno-32-88">88</a></span>
<span class="normal"><a href="#__codelineno-32-89">89</a></span>
<span class="normal"><a href="#__codelineno-32-90">90</a></span>
<span class="normal"><a href="#__codelineno-32-91">91</a></span>
<span class="normal"><a href="#__codelineno-32-92">92</a></span>
<span class="normal"><a href="#__codelineno-32-93">93</a></span>
<span class="normal"><a href="#__codelineno-32-94">94</a></span>
<span class="normal"><a href="#__codelineno-32-95">95</a></span>
<span class="normal"><a href="#__codelineno-32-96">96</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="kn">from</span> <span class="nn">omnigibson</span> <span class="kn">import</span> <span class="n">object_states</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="c1"># Make sure object states are enabled</span>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a>    <span class="c1"># Create the scene config to load -- empty scene with a stove object added</span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-32-14" name="__codelineno-32-14"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-32-15" name="__codelineno-32-15"></a>        <span class="p">},</span>
<a id="__codelineno-32-16" name="__codelineno-32-16"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-32-17" name="__codelineno-32-17"></a>            <span class="p">{</span>
<a id="__codelineno-32-18" name="__codelineno-32-18"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-32-19" name="__codelineno-32-19"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;stove&quot;</span><span class="p">,</span>
<a id="__codelineno-32-20" name="__codelineno-32-20"></a>                <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;stove&quot;</span><span class="p">,</span>
<a id="__codelineno-32-21" name="__codelineno-32-21"></a>                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;101908&quot;</span><span class="p">,</span>
<a id="__codelineno-32-22" name="__codelineno-32-22"></a>                <span class="s2">&quot;abilities&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-32-23" name="__codelineno-32-23"></a>                    <span class="s2">&quot;heatSource&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;requires_toggled_on&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<a id="__codelineno-32-24" name="__codelineno-32-24"></a>                    <span class="s2">&quot;toggleable&quot;</span><span class="p">:</span> <span class="p">{},</span>
<a id="__codelineno-32-25" name="__codelineno-32-25"></a>                <span class="p">},</span>
<a id="__codelineno-32-26" name="__codelineno-32-26"></a>                <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">],</span>
<a id="__codelineno-32-27" name="__codelineno-32-27"></a>            <span class="p">}</span>
<a id="__codelineno-32-28" name="__codelineno-32-28"></a>        <span class="p">],</span>
<a id="__codelineno-32-29" name="__codelineno-32-29"></a>    <span class="p">}</span>
<a id="__codelineno-32-30" name="__codelineno-32-30"></a>
<a id="__codelineno-32-31" name="__codelineno-32-31"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-32-32" name="__codelineno-32-32"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-32-33" name="__codelineno-32-33"></a>
<a id="__codelineno-32-34" name="__codelineno-32-34"></a>    <span class="c1"># Get reference to stove object</span>
<a id="__codelineno-32-35" name="__codelineno-32-35"></a>    <span class="n">stove</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;stove&quot;</span><span class="p">)</span>
<a id="__codelineno-32-36" name="__codelineno-32-36"></a>
<a id="__codelineno-32-37" name="__codelineno-32-37"></a>    <span class="c1"># Set camera to appropriate viewing pose</span>
<a id="__codelineno-32-38" name="__codelineno-32-38"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-32-39" name="__codelineno-32-39"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.0792399</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.30104</span><span class="p">,</span> <span class="mf">1.51981</span><span class="p">]),</span>
<a id="__codelineno-32-40" name="__codelineno-32-40"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.54897692</span><span class="p">,</span> <span class="mf">0.00110359</span><span class="p">,</span> <span class="mf">0.00168013</span><span class="p">,</span> <span class="mf">0.83583509</span><span class="p">]),</span>
<a id="__codelineno-32-41" name="__codelineno-32-41"></a>    <span class="p">)</span>
<a id="__codelineno-32-42" name="__codelineno-32-42"></a>
<a id="__codelineno-32-43" name="__codelineno-32-43"></a>    <span class="c1"># Make sure necessary object states are included with the stove</span>
<a id="__codelineno-32-44" name="__codelineno-32-44"></a>    <span class="k">assert</span> <span class="n">object_states</span><span class="o">.</span><span class="n">HeatSourceOrSink</span> <span class="ow">in</span> <span class="n">stove</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-32-45" name="__codelineno-32-45"></a>    <span class="k">assert</span> <span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span> <span class="ow">in</span> <span class="n">stove</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-32-46" name="__codelineno-32-46"></a>
<a id="__codelineno-32-47" name="__codelineno-32-47"></a>    <span class="c1"># Take a few steps so that visibility propagates</span>
<a id="__codelineno-32-48" name="__codelineno-32-48"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<a id="__codelineno-32-49" name="__codelineno-32-49"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-32-50" name="__codelineno-32-50"></a>
<a id="__codelineno-32-51" name="__codelineno-32-51"></a>    <span class="c1"># Heat source is off.</span>
<a id="__codelineno-32-52" name="__codelineno-32-52"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Heat source is OFF.&quot;</span><span class="p">)</span>
<a id="__codelineno-32-53" name="__codelineno-32-53"></a>    <span class="n">heat_source_state</span><span class="p">,</span> <span class="n">heat_source_position</span> <span class="o">=</span> <span class="n">stove</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">HeatSourceOrSink</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
<a id="__codelineno-32-54" name="__codelineno-32-54"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">heat_source_state</span>
<a id="__codelineno-32-55" name="__codelineno-32-55"></a>
<a id="__codelineno-32-56" name="__codelineno-32-56"></a>    <span class="c1"># Toggle on stove, notify user</span>
<a id="__codelineno-32-57" name="__codelineno-32-57"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Heat source will now turn ON: Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-32-58" name="__codelineno-32-58"></a>    <span class="n">stove</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-32-59" name="__codelineno-32-59"></a>
<a id="__codelineno-32-60" name="__codelineno-32-60"></a>    <span class="k">assert</span> <span class="n">stove</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
<a id="__codelineno-32-61" name="__codelineno-32-61"></a>
<a id="__codelineno-32-62" name="__codelineno-32-62"></a>    <span class="c1"># Need to take a step to update the state.</span>
<a id="__codelineno-32-63" name="__codelineno-32-63"></a>    <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-32-64" name="__codelineno-32-64"></a>
<a id="__codelineno-32-65" name="__codelineno-32-65"></a>    <span class="c1"># Heat source is on</span>
<a id="__codelineno-32-66" name="__codelineno-32-66"></a>    <span class="n">heat_source_state</span><span class="p">,</span> <span class="n">heat_source_position</span> <span class="o">=</span> <span class="n">stove</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">HeatSourceOrSink</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
<a id="__codelineno-32-67" name="__codelineno-32-67"></a>    <span class="k">assert</span> <span class="n">heat_source_state</span>
<a id="__codelineno-32-68" name="__codelineno-32-68"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">500</span><span class="p">):</span>
<a id="__codelineno-32-69" name="__codelineno-32-69"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-32-70" name="__codelineno-32-70"></a>
<a id="__codelineno-32-71" name="__codelineno-32-71"></a>    <span class="c1"># Toggle off stove, notify user</span>
<a id="__codelineno-32-72" name="__codelineno-32-72"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Heat source will now turn OFF: Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-32-73" name="__codelineno-32-73"></a>    <span class="n">stove</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-32-74" name="__codelineno-32-74"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">stove</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
<a id="__codelineno-32-75" name="__codelineno-32-75"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">):</span>
<a id="__codelineno-32-76" name="__codelineno-32-76"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-32-77" name="__codelineno-32-77"></a>
<a id="__codelineno-32-78" name="__codelineno-32-78"></a>    <span class="c1"># Move stove, notify user</span>
<a id="__codelineno-32-79" name="__codelineno-32-79"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Heat source is now moving: Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-32-80" name="__codelineno-32-80"></a>    <span class="n">stove</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">]))</span>
<a id="__codelineno-32-81" name="__codelineno-32-81"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-32-82" name="__codelineno-32-82"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-32-83" name="__codelineno-32-83"></a>
<a id="__codelineno-32-84" name="__codelineno-32-84"></a>    <span class="c1"># Toggle on stove again, notify user</span>
<a id="__codelineno-32-85" name="__codelineno-32-85"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Heat source will now turn ON: Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-32-86" name="__codelineno-32-86"></a>    <span class="n">stove</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-32-87" name="__codelineno-32-87"></a>    <span class="k">assert</span> <span class="n">stove</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>
<a id="__codelineno-32-88" name="__codelineno-32-88"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">500</span><span class="p">):</span>
<a id="__codelineno-32-89" name="__codelineno-32-89"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-32-90" name="__codelineno-32-90"></a>
<a id="__codelineno-32-91" name="__codelineno-32-91"></a>    <span class="c1"># Shutdown environment at end</span>
<a id="__codelineno-32-92" name="__codelineno-32-92"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-32-93" name="__codelineno-32-93"></a>
<a id="__codelineno-32-94" name="__codelineno-32-94"></a>
<a id="__codelineno-32-95" name="__codelineno-32-95"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-32-96" name="__codelineno-32-96"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="heated-demo"><strong>Heated Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how temperature modifications can cause objects' visual changes</li>
<li>Understanding how dynamic steam visuals are generated in real-time</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">heated_state_demo</span>
</code></pre></div>
<p>This demo loads in three bowls, and immediately sets their temperatures past their <code>Heated</code> threshold. Steam is generated in real-time from these objects, and then disappears once the temperature of the objects drops below their <code>Heated</code> threshold.</p>
<details class="code">
<summary>heated_state_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-34-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-34-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-34-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-34-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-34-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-34-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-34-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-34-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-34-10">10</a></span>
<span class="normal"><a href="#__codelineno-34-11">11</a></span>
<span class="normal"><a href="#__codelineno-34-12">12</a></span>
<span class="normal"><a href="#__codelineno-34-13">13</a></span>
<span class="normal"><a href="#__codelineno-34-14">14</a></span>
<span class="normal"><a href="#__codelineno-34-15">15</a></span>
<span class="normal"><a href="#__codelineno-34-16">16</a></span>
<span class="normal"><a href="#__codelineno-34-17">17</a></span>
<span class="normal"><a href="#__codelineno-34-18">18</a></span>
<span class="normal"><a href="#__codelineno-34-19">19</a></span>
<span class="normal"><a href="#__codelineno-34-20">20</a></span>
<span class="normal"><a href="#__codelineno-34-21">21</a></span>
<span class="normal"><a href="#__codelineno-34-22">22</a></span>
<span class="normal"><a href="#__codelineno-34-23">23</a></span>
<span class="normal"><a href="#__codelineno-34-24">24</a></span>
<span class="normal"><a href="#__codelineno-34-25">25</a></span>
<span class="normal"><a href="#__codelineno-34-26">26</a></span>
<span class="normal"><a href="#__codelineno-34-27">27</a></span>
<span class="normal"><a href="#__codelineno-34-28">28</a></span>
<span class="normal"><a href="#__codelineno-34-29">29</a></span>
<span class="normal"><a href="#__codelineno-34-30">30</a></span>
<span class="normal"><a href="#__codelineno-34-31">31</a></span>
<span class="normal"><a href="#__codelineno-34-32">32</a></span>
<span class="normal"><a href="#__codelineno-34-33">33</a></span>
<span class="normal"><a href="#__codelineno-34-34">34</a></span>
<span class="normal"><a href="#__codelineno-34-35">35</a></span>
<span class="normal"><a href="#__codelineno-34-36">36</a></span>
<span class="normal"><a href="#__codelineno-34-37">37</a></span>
<span class="normal"><a href="#__codelineno-34-38">38</a></span>
<span class="normal"><a href="#__codelineno-34-39">39</a></span>
<span class="normal"><a href="#__codelineno-34-40">40</a></span>
<span class="normal"><a href="#__codelineno-34-41">41</a></span>
<span class="normal"><a href="#__codelineno-34-42">42</a></span>
<span class="normal"><a href="#__codelineno-34-43">43</a></span>
<span class="normal"><a href="#__codelineno-34-44">44</a></span>
<span class="normal"><a href="#__codelineno-34-45">45</a></span>
<span class="normal"><a href="#__codelineno-34-46">46</a></span>
<span class="normal"><a href="#__codelineno-34-47">47</a></span>
<span class="normal"><a href="#__codelineno-34-48">48</a></span>
<span class="normal"><a href="#__codelineno-34-49">49</a></span>
<span class="normal"><a href="#__codelineno-34-50">50</a></span>
<span class="normal"><a href="#__codelineno-34-51">51</a></span>
<span class="normal"><a href="#__codelineno-34-52">52</a></span>
<span class="normal"><a href="#__codelineno-34-53">53</a></span>
<span class="normal"><a href="#__codelineno-34-54">54</a></span>
<span class="normal"><a href="#__codelineno-34-55">55</a></span>
<span class="normal"><a href="#__codelineno-34-56">56</a></span>
<span class="normal"><a href="#__codelineno-34-57">57</a></span>
<span class="normal"><a href="#__codelineno-34-58">58</a></span>
<span class="normal"><a href="#__codelineno-34-59">59</a></span>
<span class="normal"><a href="#__codelineno-34-60">60</a></span>
<span class="normal"><a href="#__codelineno-34-61">61</a></span>
<span class="normal"><a href="#__codelineno-34-62">62</a></span>
<span class="normal"><a href="#__codelineno-34-63">63</a></span>
<span class="normal"><a href="#__codelineno-34-64">64</a></span>
<span class="normal"><a href="#__codelineno-34-65">65</a></span>
<span class="normal"><a href="#__codelineno-34-66">66</a></span>
<span class="normal"><a href="#__codelineno-34-67">67</a></span>
<span class="normal"><a href="#__codelineno-34-68">68</a></span>
<span class="normal"><a href="#__codelineno-34-69">69</a></span>
<span class="normal"><a href="#__codelineno-34-70">70</a></span>
<span class="normal"><a href="#__codelineno-34-71">71</a></span>
<span class="normal"><a href="#__codelineno-34-72">72</a></span>
<span class="normal"><a href="#__codelineno-34-73">73</a></span>
<span class="normal"><a href="#__codelineno-34-74">74</a></span>
<span class="normal"><a href="#__codelineno-34-75">75</a></span>
<span class="normal"><a href="#__codelineno-34-76">76</a></span>
<span class="normal"><a href="#__codelineno-34-77">77</a></span>
<span class="normal"><a href="#__codelineno-34-78">78</a></span>
<span class="normal"><a href="#__codelineno-34-79">79</a></span>
<span class="normal"><a href="#__codelineno-34-80">80</a></span>
<span class="normal"><a href="#__codelineno-34-81">81</a></span>
<span class="normal"><a href="#__codelineno-34-82">82</a></span>
<span class="normal"><a href="#__codelineno-34-83">83</a></span>
<span class="normal"><a href="#__codelineno-34-84">84</a></span>
<span class="normal"><a href="#__codelineno-34-85">85</a></span>
<span class="normal"><a href="#__codelineno-34-86">86</a></span>
<span class="normal"><a href="#__codelineno-34-87">87</a></span>
<span class="normal"><a href="#__codelineno-34-88">88</a></span>
<span class="normal"><a href="#__codelineno-34-89">89</a></span>
<span class="normal"><a href="#__codelineno-34-90">90</a></span>
<span class="normal"><a href="#__codelineno-34-91">91</a></span>
<span class="normal"><a href="#__codelineno-34-92">92</a></span>
<span class="normal"><a href="#__codelineno-34-93">93</a></span>
<span class="normal"><a href="#__codelineno-34-94">94</a></span>
<span class="normal"><a href="#__codelineno-34-95">95</a></span>
<span class="normal"><a href="#__codelineno-34-96">96</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="kn">from</span> <span class="nn">omnigibson</span> <span class="kn">import</span> <span class="n">object_states</span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a><span class="c1"># Make sure object states are enabled</span>
<a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-34-9" name="__codelineno-34-9"></a>
<a id="__codelineno-34-10" name="__codelineno-34-10"></a>
<a id="__codelineno-34-11" name="__codelineno-34-11"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-34-12" name="__codelineno-34-12"></a>    <span class="c1"># Define object configurations for objects to load -- we want to load a light and three bowls</span>
<a id="__codelineno-34-13" name="__codelineno-34-13"></a>    <span class="n">obj_configs</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-34-14" name="__codelineno-34-14"></a>
<a id="__codelineno-34-15" name="__codelineno-34-15"></a>    <span class="n">obj_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-34-16" name="__codelineno-34-16"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;LightObject&quot;</span><span class="p">,</span>
<a id="__codelineno-34-17" name="__codelineno-34-17"></a>        <span class="n">light_type</span><span class="o">=</span><span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-34-18" name="__codelineno-34-18"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;light&quot;</span><span class="p">,</span>
<a id="__codelineno-34-19" name="__codelineno-34-19"></a>        <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-34-20" name="__codelineno-34-20"></a>        <span class="n">intensity</span><span class="o">=</span><span class="mf">1e5</span><span class="p">,</span>
<a id="__codelineno-34-21" name="__codelineno-34-21"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<a id="__codelineno-34-22" name="__codelineno-34-22"></a>    <span class="p">))</span>
<a id="__codelineno-34-23" name="__codelineno-34-23"></a>
<a id="__codelineno-34-24" name="__codelineno-34-24"></a>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])):</span>
<a id="__codelineno-34-25" name="__codelineno-34-25"></a>        <span class="n">obj_configs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-34-26" name="__codelineno-34-26"></a>            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-34-27" name="__codelineno-34-27"></a>            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;bowl</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-34-28" name="__codelineno-34-28"></a>            <span class="n">category</span><span class="o">=</span><span class="s2">&quot;bowl&quot;</span><span class="p">,</span>
<a id="__codelineno-34-29" name="__codelineno-34-29"></a>            <span class="n">model</span><span class="o">=</span><span class="s2">&quot;68_0&quot;</span><span class="p">,</span>
<a id="__codelineno-34-30" name="__codelineno-34-30"></a>            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
<a id="__codelineno-34-31" name="__codelineno-34-31"></a>            <span class="n">abilities</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;heatable&quot;</span><span class="p">:</span> <span class="p">{}},</span>
<a id="__codelineno-34-32" name="__codelineno-34-32"></a>            <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span>
<a id="__codelineno-34-33" name="__codelineno-34-33"></a>        <span class="p">))</span>
<a id="__codelineno-34-34" name="__codelineno-34-34"></a>
<a id="__codelineno-34-35" name="__codelineno-34-35"></a>    <span class="c1"># Create the scene config to load -- empty scene with light object and bowls</span>
<a id="__codelineno-34-36" name="__codelineno-34-36"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-34-37" name="__codelineno-34-37"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-34-38" name="__codelineno-34-38"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-34-39" name="__codelineno-34-39"></a>        <span class="p">},</span>
<a id="__codelineno-34-40" name="__codelineno-34-40"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="n">obj_configs</span><span class="p">,</span>
<a id="__codelineno-34-41" name="__codelineno-34-41"></a>    <span class="p">}</span>
<a id="__codelineno-34-42" name="__codelineno-34-42"></a>
<a id="__codelineno-34-43" name="__codelineno-34-43"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-34-44" name="__codelineno-34-44"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-34-45" name="__codelineno-34-45"></a>
<a id="__codelineno-34-46" name="__codelineno-34-46"></a>    <span class="c1"># Set camera to appropriate viewing pose</span>
<a id="__codelineno-34-47" name="__codelineno-34-47"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-34-48" name="__codelineno-34-48"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">0.182103</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.07295</span> <span class="p">,</span>  <span class="mf">0.14017</span> <span class="p">]),</span>
<a id="__codelineno-34-49" name="__codelineno-34-49"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.77787037</span><span class="p">,</span> <span class="mf">0.00267566</span><span class="p">,</span> <span class="mf">0.00216149</span><span class="p">,</span> <span class="mf">0.62841535</span><span class="p">]),</span>
<a id="__codelineno-34-50" name="__codelineno-34-50"></a>    <span class="p">)</span>
<a id="__codelineno-34-51" name="__codelineno-34-51"></a>
<a id="__codelineno-34-52" name="__codelineno-34-52"></a>    <span class="c1"># Grab reference to objects of relevance</span>
<a id="__codelineno-34-53" name="__codelineno-34-53"></a>    <span class="n">objs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;category&quot;</span><span class="p">,</span> <span class="s2">&quot;bowl&quot;</span><span class="p">))</span>
<a id="__codelineno-34-54" name="__codelineno-34-54"></a>
<a id="__codelineno-34-55" name="__codelineno-34-55"></a>    <span class="k">def</span> <span class="nf">report_states</span><span class="p">(</span><span class="n">objs</span><span class="p">):</span>
<a id="__codelineno-34-56" name="__codelineno-34-56"></a>        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">:</span>
<a id="__codelineno-34-57" name="__codelineno-34-57"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<a id="__codelineno-34-58" name="__codelineno-34-58"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;object:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-34-59" name="__codelineno-34-59"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;temperature:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
<a id="__codelineno-34-60" name="__codelineno-34-60"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;obj is heated:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Heated</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
<a id="__codelineno-34-61" name="__codelineno-34-61"></a>
<a id="__codelineno-34-62" name="__codelineno-34-62"></a>    <span class="c1"># Report default states</span>
<a id="__codelineno-34-63" name="__codelineno-34-63"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==== Initial state ====&quot;</span><span class="p">)</span>
<a id="__codelineno-34-64" name="__codelineno-34-64"></a>    <span class="n">report_states</span><span class="p">(</span><span class="n">objs</span><span class="p">)</span>
<a id="__codelineno-34-65" name="__codelineno-34-65"></a>
<a id="__codelineno-34-66" name="__codelineno-34-66"></a>    <span class="c1"># Notify user that we&#39;re about to heat the object</span>
<a id="__codelineno-34-67" name="__codelineno-34-67"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Objects will be heated, and steam will slowly rise. Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-34-68" name="__codelineno-34-68"></a>
<a id="__codelineno-34-69" name="__codelineno-34-69"></a>    <span class="c1"># Heated.</span>
<a id="__codelineno-34-70" name="__codelineno-34-70"></a>    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">:</span>
<a id="__codelineno-34-71" name="__codelineno-34-71"></a>        <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<a id="__codelineno-34-72" name="__codelineno-34-72"></a>    <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-34-73" name="__codelineno-34-73"></a>    <span class="n">report_states</span><span class="p">(</span><span class="n">objs</span><span class="p">)</span>
<a id="__codelineno-34-74" name="__codelineno-34-74"></a>
<a id="__codelineno-34-75" name="__codelineno-34-75"></a>    <span class="c1"># Take a look at the steam effect.</span>
<a id="__codelineno-34-76" name="__codelineno-34-76"></a>    <span class="c1"># After a while, objects will be below the Steam temperature threshold.</span>
<a id="__codelineno-34-77" name="__codelineno-34-77"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==== Objects are now heated... ====&quot;</span><span class="p">)</span>
<a id="__codelineno-34-78" name="__codelineno-34-78"></a>    <span class="nb">print</span><span class="p">()</span>
<a id="__codelineno-34-79" name="__codelineno-34-79"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">):</span>
<a id="__codelineno-34-80" name="__codelineno-34-80"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-34-81" name="__codelineno-34-81"></a>        <span class="c1"># Also print temperatures</span>
<a id="__codelineno-34-82" name="__codelineno-34-82"></a>        <span class="n">temps</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span><span class="si">:</span><span class="s2">&gt;7.2f</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objs</span><span class="p">]</span>
<a id="__codelineno-34-83" name="__codelineno-34-83"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;obj temps:&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">temps</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-34-84" name="__codelineno-34-84"></a>    <span class="nb">print</span><span class="p">()</span>
<a id="__codelineno-34-85" name="__codelineno-34-85"></a>
<a id="__codelineno-34-86" name="__codelineno-34-86"></a>    <span class="c1"># Objects are not heated anymore.</span>
<a id="__codelineno-34-87" name="__codelineno-34-87"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==== Objects are no longer heated... ====&quot;</span><span class="p">)</span>
<a id="__codelineno-34-88" name="__codelineno-34-88"></a>    <span class="n">report_states</span><span class="p">(</span><span class="n">objs</span><span class="p">)</span>
<a id="__codelineno-34-89" name="__codelineno-34-89"></a>
<a id="__codelineno-34-90" name="__codelineno-34-90"></a>    <span class="c1"># Close environment at the end</span>
<a id="__codelineno-34-91" name="__codelineno-34-91"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Demo completed. Press ENTER to shutdown environment.&quot;</span><span class="p">)</span>
<a id="__codelineno-34-92" name="__codelineno-34-92"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-34-93" name="__codelineno-34-93"></a>
<a id="__codelineno-34-94" name="__codelineno-34-94"></a>
<a id="__codelineno-34-95" name="__codelineno-34-95"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-34-96" name="__codelineno-34-96"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="object-texture-demo"><strong>Object Texture Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how different object states can result in texture changes</li>
<li>Understanding how to enable objects with texture-changing states</li>
<li>Understanding how to dynamically modify object states</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">object_state_texture_demo</span>
</code></pre></div>
<p>This demo loads in a single object, and then dynamically modifies its state so that its texture changes with each modification.</p>
<details class="code">
<summary>object_state_texture_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">  1</a></span>
<span class="normal"><a href="#__codelineno-36-2">  2</a></span>
<span class="normal"><a href="#__codelineno-36-3">  3</a></span>
<span class="normal"><a href="#__codelineno-36-4">  4</a></span>
<span class="normal"><a href="#__codelineno-36-5">  5</a></span>
<span class="normal"><a href="#__codelineno-36-6">  6</a></span>
<span class="normal"><a href="#__codelineno-36-7">  7</a></span>
<span class="normal"><a href="#__codelineno-36-8">  8</a></span>
<span class="normal"><a href="#__codelineno-36-9">  9</a></span>
<span class="normal"><a href="#__codelineno-36-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-36-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-36-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-36-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-36-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-36-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-36-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-36-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-36-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-36-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-36-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-36-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-36-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-36-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-36-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-36-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-36-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-36-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-36-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-36-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-36-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-36-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-36-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-36-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-36-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-36-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-36-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-36-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-36-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-36-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-36-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-36-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-36-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-36-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-36-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-36-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-36-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-36-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-36-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-36-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-36-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-36-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-36-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-36-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-36-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-36-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-36-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-36-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-36-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-36-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-36-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-36-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-36-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-36-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-36-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-36-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-36-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-36-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-36-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-36-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-36-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-36-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-36-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-36-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-36-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-36-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-36-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-36-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-36-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-36-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-36-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-36-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-36-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-36-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-36-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-36-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-36-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-36-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-36-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-36-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-36-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-36-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-36-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-36-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-36-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-36-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-36-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-36-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-36-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-36-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-36-100">100</a></span>
<span class="normal"><a href="#__codelineno-36-101">101</a></span>
<span class="normal"><a href="#__codelineno-36-102">102</a></span>
<span class="normal"><a href="#__codelineno-36-103">103</a></span>
<span class="normal"><a href="#__codelineno-36-104">104</a></span>
<span class="normal"><a href="#__codelineno-36-105">105</a></span>
<span class="normal"><a href="#__codelineno-36-106">106</a></span>
<span class="normal"><a href="#__codelineno-36-107">107</a></span>
<span class="normal"><a href="#__codelineno-36-108">108</a></span>
<span class="normal"><a href="#__codelineno-36-109">109</a></span>
<span class="normal"><a href="#__codelineno-36-110">110</a></span>
<span class="normal"><a href="#__codelineno-36-111">111</a></span>
<span class="normal"><a href="#__codelineno-36-112">112</a></span>
<span class="normal"><a href="#__codelineno-36-113">113</a></span>
<span class="normal"><a href="#__codelineno-36-114">114</a></span>
<span class="normal"><a href="#__codelineno-36-115">115</a></span>
<span class="normal"><a href="#__codelineno-36-116">116</a></span>
<span class="normal"><a href="#__codelineno-36-117">117</a></span>
<span class="normal"><a href="#__codelineno-36-118">118</a></span>
<span class="normal"><a href="#__codelineno-36-119">119</a></span>
<span class="normal"><a href="#__codelineno-36-120">120</a></span>
<span class="normal"><a href="#__codelineno-36-121">121</a></span>
<span class="normal"><a href="#__codelineno-36-122">122</a></span>
<span class="normal"><a href="#__codelineno-36-123">123</a></span>
<span class="normal"><a href="#__codelineno-36-124">124</a></span>
<span class="normal"><a href="#__codelineno-36-125">125</a></span>
<span class="normal"><a href="#__codelineno-36-126">126</a></span>
<span class="normal"><a href="#__codelineno-36-127">127</a></span>
<span class="normal"><a href="#__codelineno-36-128">128</a></span>
<span class="normal"><a href="#__codelineno-36-129">129</a></span>
<span class="normal"><a href="#__codelineno-36-130">130</a></span>
<span class="normal"><a href="#__codelineno-36-131">131</a></span>
<span class="normal"><a href="#__codelineno-36-132">132</a></span>
<span class="normal"><a href="#__codelineno-36-133">133</a></span>
<span class="normal"><a href="#__codelineno-36-134">134</a></span>
<span class="normal"><a href="#__codelineno-36-135">135</a></span>
<span class="normal"><a href="#__codelineno-36-136">136</a></span>
<span class="normal"><a href="#__codelineno-36-137">137</a></span>
<span class="normal"><a href="#__codelineno-36-138">138</a></span>
<span class="normal"><a href="#__codelineno-36-139">139</a></span>
<span class="normal"><a href="#__codelineno-36-140">140</a></span>
<span class="normal"><a href="#__codelineno-36-141">141</a></span>
<span class="normal"><a href="#__codelineno-36-142">142</a></span>
<span class="normal"><a href="#__codelineno-36-143">143</a></span>
<span class="normal"><a href="#__codelineno-36-144">144</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="kn">from</span> <span class="nn">omnigibson</span> <span class="kn">import</span> <span class="n">object_states</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span><span class="p">,</span> <span class="n">macros</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="kn">from</span> <span class="nn">omnigibson.systems</span> <span class="kn">import</span> <span class="n">WaterSystem</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.constants</span> <span class="kn">import</span> <span class="n">ParticleModifyMethod</span>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="c1"># Make sure object states are enabled</span>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-36-13" name="__codelineno-36-13"></a>    <span class="c1"># Create the scene config to load -- empty scene plus a light and a cabinet</span>
<a id="__codelineno-36-14" name="__codelineno-36-14"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-36-15" name="__codelineno-36-15"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-36-16" name="__codelineno-36-16"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-36-17" name="__codelineno-36-17"></a>            <span class="s2">&quot;floor_plane_visible&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-36-18" name="__codelineno-36-18"></a>        <span class="p">},</span>
<a id="__codelineno-36-19" name="__codelineno-36-19"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-36-20" name="__codelineno-36-20"></a>            <span class="p">{</span>
<a id="__codelineno-36-21" name="__codelineno-36-21"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;LightObject&quot;</span><span class="p">,</span>
<a id="__codelineno-36-22" name="__codelineno-36-22"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;light&quot;</span><span class="p">,</span>
<a id="__codelineno-36-23" name="__codelineno-36-23"></a>                <span class="s2">&quot;light_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-36-24" name="__codelineno-36-24"></a>                <span class="s2">&quot;radius&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-36-25" name="__codelineno-36-25"></a>                <span class="s2">&quot;intensity&quot;</span><span class="p">:</span> <span class="mf">1e5</span><span class="p">,</span>
<a id="__codelineno-36-26" name="__codelineno-36-26"></a>                <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<a id="__codelineno-36-27" name="__codelineno-36-27"></a>            <span class="p">},</span>
<a id="__codelineno-36-28" name="__codelineno-36-28"></a>            <span class="p">{</span>
<a id="__codelineno-36-29" name="__codelineno-36-29"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-36-30" name="__codelineno-36-30"></a>                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;cabinet&quot;</span><span class="p">,</span>
<a id="__codelineno-36-31" name="__codelineno-36-31"></a>                <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;bottom_cabinet&quot;</span><span class="p">,</span>
<a id="__codelineno-36-32" name="__codelineno-36-32"></a>                <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;45087&quot;</span><span class="p">,</span>
<a id="__codelineno-36-33" name="__codelineno-36-33"></a>                <span class="s2">&quot;abilities&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-36-34" name="__codelineno-36-34"></a>                    <span class="s2">&quot;freezable&quot;</span><span class="p">:</span> <span class="p">{},</span>
<a id="__codelineno-36-35" name="__codelineno-36-35"></a>                    <span class="s2">&quot;cookable&quot;</span><span class="p">:</span> <span class="p">{},</span>
<a id="__codelineno-36-36" name="__codelineno-36-36"></a>                    <span class="s2">&quot;burnable&quot;</span><span class="p">:</span> <span class="p">{},</span>
<a id="__codelineno-36-37" name="__codelineno-36-37"></a>                    <span class="s2">&quot;saturable&quot;</span><span class="p">:</span> <span class="p">{},</span>
<a id="__codelineno-36-38" name="__codelineno-36-38"></a>                    <span class="s2">&quot;toggleable&quot;</span><span class="p">:</span> <span class="p">{},</span>
<a id="__codelineno-36-39" name="__codelineno-36-39"></a>                    <span class="s2">&quot;particleRemover&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-36-40" name="__codelineno-36-40"></a>                        <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">ParticleModifyMethod</span><span class="o">.</span><span class="n">ADJACENCY</span><span class="p">,</span>
<a id="__codelineno-36-41" name="__codelineno-36-41"></a>                        <span class="s2">&quot;conditions&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-36-42" name="__codelineno-36-42"></a>                            <span class="c1"># For a specific particle system, this specifies what conditions are required in order for the</span>
<a id="__codelineno-36-43" name="__codelineno-36-43"></a>                            <span class="c1"># particle applier / remover to apply / remover particles associated with that system</span>
<a id="__codelineno-36-44" name="__codelineno-36-44"></a>                            <span class="c1"># The list should contain functions with signature condition() --&gt; bool,</span>
<a id="__codelineno-36-45" name="__codelineno-36-45"></a>                            <span class="c1"># where True means the condition is satisfied</span>
<a id="__codelineno-36-46" name="__codelineno-36-46"></a>                            <span class="c1"># In this case, we only allow our cabinet to absorb water, with no conditions needed.</span>
<a id="__codelineno-36-47" name="__codelineno-36-47"></a>                            <span class="c1"># This is needed for the Saturated (&quot;saturable&quot;) state so that we can modify the texture</span>
<a id="__codelineno-36-48" name="__codelineno-36-48"></a>                            <span class="c1"># according to the water.</span>
<a id="__codelineno-36-49" name="__codelineno-36-49"></a>                            <span class="c1"># NOTE: This will only change color if gm.ENABLE_HQ_RENDERING and gm.USE_GPU_DYNAMICS is</span>
<a id="__codelineno-36-50" name="__codelineno-36-50"></a>                            <span class="c1"># enabled!</span>
<a id="__codelineno-36-51" name="__codelineno-36-51"></a>                            <span class="n">WaterSystem</span><span class="p">:</span> <span class="p">[],</span>
<a id="__codelineno-36-52" name="__codelineno-36-52"></a>                        <span class="p">},</span>
<a id="__codelineno-36-53" name="__codelineno-36-53"></a>            <span class="p">},</span>
<a id="__codelineno-36-54" name="__codelineno-36-54"></a>                <span class="p">},</span>
<a id="__codelineno-36-55" name="__codelineno-36-55"></a>                <span class="s2">&quot;position&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.55</span><span class="p">],</span>
<a id="__codelineno-36-56" name="__codelineno-36-56"></a>            <span class="p">},</span>
<a id="__codelineno-36-57" name="__codelineno-36-57"></a>        <span class="p">],</span>
<a id="__codelineno-36-58" name="__codelineno-36-58"></a>    <span class="p">}</span>
<a id="__codelineno-36-59" name="__codelineno-36-59"></a>
<a id="__codelineno-36-60" name="__codelineno-36-60"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-36-61" name="__codelineno-36-61"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-36-62" name="__codelineno-36-62"></a>
<a id="__codelineno-36-63" name="__codelineno-36-63"></a>    <span class="c1"># Set camera to appropriate viewing pose</span>
<a id="__codelineno-36-64" name="__codelineno-36-64"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-36-65" name="__codelineno-36-65"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">1.7789</span> <span class="p">,</span> <span class="o">-</span><span class="mf">1.68822</span><span class="p">,</span>  <span class="mf">1.13551</span><span class="p">]),</span>
<a id="__codelineno-36-66" name="__codelineno-36-66"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.57065614</span><span class="p">,</span> <span class="mf">0.20331904</span><span class="p">,</span> <span class="mf">0.267029</span>  <span class="p">,</span> <span class="mf">0.74947212</span><span class="p">]),</span>
<a id="__codelineno-36-67" name="__codelineno-36-67"></a>    <span class="p">)</span>
<a id="__codelineno-36-68" name="__codelineno-36-68"></a>
<a id="__codelineno-36-69" name="__codelineno-36-69"></a>    <span class="c1"># Grab reference to object of interest</span>
<a id="__codelineno-36-70" name="__codelineno-36-70"></a>    <span class="n">obj</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;cabinet&quot;</span><span class="p">)</span>
<a id="__codelineno-36-71" name="__codelineno-36-71"></a>
<a id="__codelineno-36-72" name="__codelineno-36-72"></a>    <span class="c1"># Make sure all the appropriate states are in the object</span>
<a id="__codelineno-36-73" name="__codelineno-36-73"></a>    <span class="k">assert</span> <span class="n">object_states</span><span class="o">.</span><span class="n">Frozen</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-36-74" name="__codelineno-36-74"></a>    <span class="k">assert</span> <span class="n">object_states</span><span class="o">.</span><span class="n">Cooked</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-36-75" name="__codelineno-36-75"></a>    <span class="k">assert</span> <span class="n">object_states</span><span class="o">.</span><span class="n">Burnt</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-36-76" name="__codelineno-36-76"></a>    <span class="k">assert</span> <span class="n">object_states</span><span class="o">.</span><span class="n">Saturated</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-36-77" name="__codelineno-36-77"></a>    <span class="k">assert</span> <span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span>
<a id="__codelineno-36-78" name="__codelineno-36-78"></a>
<a id="__codelineno-36-79" name="__codelineno-36-79"></a>    <span class="k">def</span> <span class="nf">report_states</span><span class="p">():</span>
<a id="__codelineno-36-80" name="__codelineno-36-80"></a>        <span class="c1"># Make sure states are propagated before printing</span>
<a id="__codelineno-36-81" name="__codelineno-36-81"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<a id="__codelineno-36-82" name="__codelineno-36-82"></a>            <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-36-83" name="__codelineno-36-83"></a>
<a id="__codelineno-36-84" name="__codelineno-36-84"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>
<a id="__codelineno-36-85" name="__codelineno-36-85"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;temperature:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
<a id="__codelineno-36-86" name="__codelineno-36-86"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;obj is frozen:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Frozen</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
<a id="__codelineno-36-87" name="__codelineno-36-87"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;obj is cooked:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Cooked</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
<a id="__codelineno-36-88" name="__codelineno-36-88"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;obj is burnt:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Burnt</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
<a id="__codelineno-36-89" name="__codelineno-36-89"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;obj is soaked:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Saturated</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">WaterSystem</span><span class="p">))</span>
<a id="__codelineno-36-90" name="__codelineno-36-90"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;obj is toggledon:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span>
<a id="__codelineno-36-91" name="__codelineno-36-91"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;obj textures:&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_textures</span><span class="p">())</span>
<a id="__codelineno-36-92" name="__codelineno-36-92"></a>
<a id="__codelineno-36-93" name="__codelineno-36-93"></a>    <span class="c1"># Report default states</span>
<a id="__codelineno-36-94" name="__codelineno-36-94"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;==== Initial state ====&quot;</span><span class="p">)</span>
<a id="__codelineno-36-95" name="__codelineno-36-95"></a>    <span class="n">report_states</span><span class="p">()</span>
<a id="__codelineno-36-96" name="__codelineno-36-96"></a>
<a id="__codelineno-36-97" name="__codelineno-36-97"></a>    <span class="c1"># Notify user that we&#39;re about to freeze the object, and then freeze the object</span>
<a id="__codelineno-36-98" name="__codelineno-36-98"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Object will be frozen. Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-36-99" name="__codelineno-36-99"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="o">-</span><span class="mi">50</span><span class="p">)</span>
<a id="__codelineno-36-100" name="__codelineno-36-100"></a>    <span class="n">report_states</span><span class="p">()</span>
<a id="__codelineno-36-101" name="__codelineno-36-101"></a>
<a id="__codelineno-36-102" name="__codelineno-36-102"></a>    <span class="c1"># Notify user that we&#39;re about to cook the object, and then cook the object</span>
<a id="__codelineno-36-103" name="__codelineno-36-103"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Object will be cooked. Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-36-104" name="__codelineno-36-104"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<a id="__codelineno-36-105" name="__codelineno-36-105"></a>    <span class="n">report_states</span><span class="p">()</span>
<a id="__codelineno-36-106" name="__codelineno-36-106"></a>
<a id="__codelineno-36-107" name="__codelineno-36-107"></a>    <span class="c1"># Notify user that we&#39;re about to burn the object, and then burn the object</span>
<a id="__codelineno-36-108" name="__codelineno-36-108"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Object will be burned. Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-36-109" name="__codelineno-36-109"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="mi">250</span><span class="p">)</span>
<a id="__codelineno-36-110" name="__codelineno-36-110"></a>    <span class="n">report_states</span><span class="p">()</span>
<a id="__codelineno-36-111" name="__codelineno-36-111"></a>
<a id="__codelineno-36-112" name="__codelineno-36-112"></a>    <span class="c1"># Notify user that we&#39;re about to reset the object to its default state, and then reset state</span>
<a id="__codelineno-36-113" name="__codelineno-36-113"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Object will be reset to default state. Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-36-114" name="__codelineno-36-114"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Temperature</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">macros</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">DEFAULT_TEMPERATURE</span><span class="p">)</span>
<a id="__codelineno-36-115" name="__codelineno-36-115"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">MaxTemperature</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">macros</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">DEFAULT_TEMPERATURE</span><span class="p">)</span>
<a id="__codelineno-36-116" name="__codelineno-36-116"></a>    <span class="n">report_states</span><span class="p">()</span>
<a id="__codelineno-36-117" name="__codelineno-36-117"></a>
<a id="__codelineno-36-118" name="__codelineno-36-118"></a>    <span class="c1"># Notify user that we&#39;re about to soak the object, and then soak the object</span>
<a id="__codelineno-36-119" name="__codelineno-36-119"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Object will be saturated with water. Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-36-120" name="__codelineno-36-120"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Saturated</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">WaterSystem</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-36-121" name="__codelineno-36-121"></a>    <span class="n">report_states</span><span class="p">()</span>
<a id="__codelineno-36-122" name="__codelineno-36-122"></a>
<a id="__codelineno-36-123" name="__codelineno-36-123"></a>    <span class="c1"># Notify user that we&#39;re about to unsoak the object, and then unsoak the object</span>
<a id="__codelineno-36-124" name="__codelineno-36-124"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Object will be unsaturated with water. Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-36-125" name="__codelineno-36-125"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Saturated</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">WaterSystem</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-36-126" name="__codelineno-36-126"></a>    <span class="n">report_states</span><span class="p">()</span>
<a id="__codelineno-36-127" name="__codelineno-36-127"></a>
<a id="__codelineno-36-128" name="__codelineno-36-128"></a>    <span class="c1"># Notify user that we&#39;re about to toggle on the object, and then toggle on the object</span>
<a id="__codelineno-36-129" name="__codelineno-36-129"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Object will be toggled on. Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-36-130" name="__codelineno-36-130"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-36-131" name="__codelineno-36-131"></a>    <span class="n">report_states</span><span class="p">()</span>
<a id="__codelineno-36-132" name="__codelineno-36-132"></a>
<a id="__codelineno-36-133" name="__codelineno-36-133"></a>    <span class="c1"># Notify user that we&#39;re about to toggle off the object, and then toggle off the object</span>
<a id="__codelineno-36-134" name="__codelineno-36-134"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Object will be toggled off. Press ENTER to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-36-135" name="__codelineno-36-135"></a>    <span class="n">obj</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">ToggledOn</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-36-136" name="__codelineno-36-136"></a>    <span class="n">report_states</span><span class="p">()</span>
<a id="__codelineno-36-137" name="__codelineno-36-137"></a>
<a id="__codelineno-36-138" name="__codelineno-36-138"></a>    <span class="c1"># Close environment at the end</span>
<a id="__codelineno-36-139" name="__codelineno-36-139"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Demo completed. Press ENTER to shutdown environment.&quot;</span><span class="p">)</span>
<a id="__codelineno-36-140" name="__codelineno-36-140"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-36-141" name="__codelineno-36-141"></a>
<a id="__codelineno-36-142" name="__codelineno-36-142"></a>
<a id="__codelineno-36-143" name="__codelineno-36-143"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-36-144" name="__codelineno-36-144"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="particle-applier-and-remover-demo"><strong>Particle Applier and Remover Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how a <code>ParticleRemover</code> or <code>ParticleApplier</code> object can be generated</li>
<li>Understanding how particles can be dynamically generated on objects</li>
<li>Understanding different methods for applying and removing particles via the <code>ParticleRemover</code> or <code>ParticleApplier</code> object</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">particle_applier_remover_demo</span>
</code></pre></div>
<p>This demo loads in a washtowel and table and lets you choose the ability configuration to enable the washtowel with. The washtowel will then proceed to either remove and generate particles dynamically on the table while moving.</p>
<details class="code">
<summary>particle_applier_remover_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">  1</a></span>
<span class="normal"><a href="#__codelineno-38-2">  2</a></span>
<span class="normal"><a href="#__codelineno-38-3">  3</a></span>
<span class="normal"><a href="#__codelineno-38-4">  4</a></span>
<span class="normal"><a href="#__codelineno-38-5">  5</a></span>
<span class="normal"><a href="#__codelineno-38-6">  6</a></span>
<span class="normal"><a href="#__codelineno-38-7">  7</a></span>
<span class="normal"><a href="#__codelineno-38-8">  8</a></span>
<span class="normal"><a href="#__codelineno-38-9">  9</a></span>
<span class="normal"><a href="#__codelineno-38-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-38-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-38-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-38-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-38-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-38-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-38-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-38-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-38-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-38-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-38-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-38-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-38-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-38-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-38-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-38-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-38-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-38-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-38-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-38-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-38-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-38-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-38-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-38-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-38-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-38-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-38-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-38-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-38-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-38-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-38-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-38-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-38-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-38-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-38-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-38-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-38-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-38-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-38-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-38-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-38-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-38-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-38-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-38-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-38-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-38-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-38-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-38-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-38-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-38-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-38-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-38-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-38-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-38-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-38-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-38-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-38-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-38-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-38-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-38-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-38-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-38-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-38-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-38-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-38-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-38-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-38-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-38-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-38-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-38-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-38-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-38-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-38-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-38-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-38-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-38-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-38-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-38-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-38-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-38-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-38-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-38-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-38-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-38-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-38-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-38-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-38-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-38-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-38-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-38-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-38-100">100</a></span>
<span class="normal"><a href="#__codelineno-38-101">101</a></span>
<span class="normal"><a href="#__codelineno-38-102">102</a></span>
<span class="normal"><a href="#__codelineno-38-103">103</a></span>
<span class="normal"><a href="#__codelineno-38-104">104</a></span>
<span class="normal"><a href="#__codelineno-38-105">105</a></span>
<span class="normal"><a href="#__codelineno-38-106">106</a></span>
<span class="normal"><a href="#__codelineno-38-107">107</a></span>
<span class="normal"><a href="#__codelineno-38-108">108</a></span>
<span class="normal"><a href="#__codelineno-38-109">109</a></span>
<span class="normal"><a href="#__codelineno-38-110">110</a></span>
<span class="normal"><a href="#__codelineno-38-111">111</a></span>
<span class="normal"><a href="#__codelineno-38-112">112</a></span>
<span class="normal"><a href="#__codelineno-38-113">113</a></span>
<span class="normal"><a href="#__codelineno-38-114">114</a></span>
<span class="normal"><a href="#__codelineno-38-115">115</a></span>
<span class="normal"><a href="#__codelineno-38-116">116</a></span>
<span class="normal"><a href="#__codelineno-38-117">117</a></span>
<span class="normal"><a href="#__codelineno-38-118">118</a></span>
<span class="normal"><a href="#__codelineno-38-119">119</a></span>
<span class="normal"><a href="#__codelineno-38-120">120</a></span>
<span class="normal"><a href="#__codelineno-38-121">121</a></span>
<span class="normal"><a href="#__codelineno-38-122">122</a></span>
<span class="normal"><a href="#__codelineno-38-123">123</a></span>
<span class="normal"><a href="#__codelineno-38-124">124</a></span>
<span class="normal"><a href="#__codelineno-38-125">125</a></span>
<span class="normal"><a href="#__codelineno-38-126">126</a></span>
<span class="normal"><a href="#__codelineno-38-127">127</a></span>
<span class="normal"><a href="#__codelineno-38-128">128</a></span>
<span class="normal"><a href="#__codelineno-38-129">129</a></span>
<span class="normal"><a href="#__codelineno-38-130">130</a></span>
<span class="normal"><a href="#__codelineno-38-131">131</a></span>
<span class="normal"><a href="#__codelineno-38-132">132</a></span>
<span class="normal"><a href="#__codelineno-38-133">133</a></span>
<span class="normal"><a href="#__codelineno-38-134">134</a></span>
<span class="normal"><a href="#__codelineno-38-135">135</a></span>
<span class="normal"><a href="#__codelineno-38-136">136</a></span>
<span class="normal"><a href="#__codelineno-38-137">137</a></span>
<span class="normal"><a href="#__codelineno-38-138">138</a></span>
<span class="normal"><a href="#__codelineno-38-139">139</a></span>
<span class="normal"><a href="#__codelineno-38-140">140</a></span>
<span class="normal"><a href="#__codelineno-38-141">141</a></span>
<span class="normal"><a href="#__codelineno-38-142">142</a></span>
<span class="normal"><a href="#__codelineno-38-143">143</a></span>
<span class="normal"><a href="#__codelineno-38-144">144</a></span>
<span class="normal"><a href="#__codelineno-38-145">145</a></span>
<span class="normal"><a href="#__codelineno-38-146">146</a></span>
<span class="normal"><a href="#__codelineno-38-147">147</a></span>
<span class="normal"><a href="#__codelineno-38-148">148</a></span>
<span class="normal"><a href="#__codelineno-38-149">149</a></span>
<span class="normal"><a href="#__codelineno-38-150">150</a></span>
<span class="normal"><a href="#__codelineno-38-151">151</a></span>
<span class="normal"><a href="#__codelineno-38-152">152</a></span>
<span class="normal"><a href="#__codelineno-38-153">153</a></span>
<span class="normal"><a href="#__codelineno-38-154">154</a></span>
<span class="normal"><a href="#__codelineno-38-155">155</a></span>
<span class="normal"><a href="#__codelineno-38-156">156</a></span>
<span class="normal"><a href="#__codelineno-38-157">157</a></span>
<span class="normal"><a href="#__codelineno-38-158">158</a></span>
<span class="normal"><a href="#__codelineno-38-159">159</a></span>
<span class="normal"><a href="#__codelineno-38-160">160</a></span>
<span class="normal"><a href="#__codelineno-38-161">161</a></span>
<span class="normal"><a href="#__codelineno-38-162">162</a></span>
<span class="normal"><a href="#__codelineno-38-163">163</a></span>
<span class="normal"><a href="#__codelineno-38-164">164</a></span>
<span class="normal"><a href="#__codelineno-38-165">165</a></span>
<span class="normal"><a href="#__codelineno-38-166">166</a></span>
<span class="normal"><a href="#__codelineno-38-167">167</a></span>
<span class="normal"><a href="#__codelineno-38-168">168</a></span>
<span class="normal"><a href="#__codelineno-38-169">169</a></span>
<span class="normal"><a href="#__codelineno-38-170">170</a></span>
<span class="normal"><a href="#__codelineno-38-171">171</a></span>
<span class="normal"><a href="#__codelineno-38-172">172</a></span>
<span class="normal"><a href="#__codelineno-38-173">173</a></span>
<span class="normal"><a href="#__codelineno-38-174">174</a></span>
<span class="normal"><a href="#__codelineno-38-175">175</a></span>
<span class="normal"><a href="#__codelineno-38-176">176</a></span>
<span class="normal"><a href="#__codelineno-38-177">177</a></span>
<span class="normal"><a href="#__codelineno-38-178">178</a></span>
<span class="normal"><a href="#__codelineno-38-179">179</a></span>
<span class="normal"><a href="#__codelineno-38-180">180</a></span>
<span class="normal"><a href="#__codelineno-38-181">181</a></span>
<span class="normal"><a href="#__codelineno-38-182">182</a></span>
<span class="normal"><a href="#__codelineno-38-183">183</a></span>
<span class="normal"><a href="#__codelineno-38-184">184</a></span>
<span class="normal"><a href="#__codelineno-38-185">185</a></span>
<span class="normal"><a href="#__codelineno-38-186">186</a></span>
<span class="normal"><a href="#__codelineno-38-187">187</a></span>
<span class="normal"><a href="#__codelineno-38-188">188</a></span>
<span class="normal"><a href="#__codelineno-38-189">189</a></span>
<span class="normal"><a href="#__codelineno-38-190">190</a></span>
<span class="normal"><a href="#__codelineno-38-191">191</a></span>
<span class="normal"><a href="#__codelineno-38-192">192</a></span>
<span class="normal"><a href="#__codelineno-38-193">193</a></span>
<span class="normal"><a href="#__codelineno-38-194">194</a></span>
<span class="normal"><a href="#__codelineno-38-195">195</a></span>
<span class="normal"><a href="#__codelineno-38-196">196</a></span>
<span class="normal"><a href="#__codelineno-38-197">197</a></span>
<span class="normal"><a href="#__codelineno-38-198">198</a></span>
<span class="normal"><a href="#__codelineno-38-199">199</a></span>
<span class="normal"><a href="#__codelineno-38-200">200</a></span>
<span class="normal"><a href="#__codelineno-38-201">201</a></span>
<span class="normal"><a href="#__codelineno-38-202">202</a></span>
<span class="normal"><a href="#__codelineno-38-203">203</a></span>
<span class="normal"><a href="#__codelineno-38-204">204</a></span>
<span class="normal"><a href="#__codelineno-38-205">205</a></span>
<span class="normal"><a href="#__codelineno-38-206">206</a></span>
<span class="normal"><a href="#__codelineno-38-207">207</a></span>
<span class="normal"><a href="#__codelineno-38-208">208</a></span>
<span class="normal"><a href="#__codelineno-38-209">209</a></span>
<span class="normal"><a href="#__codelineno-38-210">210</a></span>
<span class="normal"><a href="#__codelineno-38-211">211</a></span>
<span class="normal"><a href="#__codelineno-38-212">212</a></span>
<span class="normal"><a href="#__codelineno-38-213">213</a></span>
<span class="normal"><a href="#__codelineno-38-214">214</a></span>
<span class="normal"><a href="#__codelineno-38-215">215</a></span>
<span class="normal"><a href="#__codelineno-38-216">216</a></span>
<span class="normal"><a href="#__codelineno-38-217">217</a></span>
<span class="normal"><a href="#__codelineno-38-218">218</a></span>
<span class="normal"><a href="#__codelineno-38-219">219</a></span>
<span class="normal"><a href="#__codelineno-38-220">220</a></span>
<span class="normal"><a href="#__codelineno-38-221">221</a></span>
<span class="normal"><a href="#__codelineno-38-222">222</a></span>
<span class="normal"><a href="#__codelineno-38-223">223</a></span>
<span class="normal"><a href="#__codelineno-38-224">224</a></span>
<span class="normal"><a href="#__codelineno-38-225">225</a></span>
<span class="normal"><a href="#__codelineno-38-226">226</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="kn">from</span> <span class="nn">omnigibson.object_states</span> <span class="kn">import</span> <span class="n">Covered</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="kn">from</span> <span class="nn">omnigibson.objects</span> <span class="kn">import</span> <span class="n">DatasetObject</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span><span class="p">,</span> <span class="n">macros</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="kn">from</span> <span class="nn">omnigibson.systems</span> <span class="kn">import</span> <span class="o">*</span>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.usd_utils</span> <span class="kn">import</span> <span class="n">create_joint</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span>
<a id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.constants</span> <span class="kn">import</span> <span class="n">ParticleModifyMethod</span>
<a id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="kn">from</span> <span class="nn">omni.isaac.core.utils.stage</span> <span class="kn">import</span> <span class="n">add_reference_to_stage</span>
<a id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="kn">from</span> <span class="nn">pxr</span> <span class="kn">import</span> <span class="n">Gf</span>
<a id="__codelineno-38-13" name="__codelineno-38-13"></a>
<a id="__codelineno-38-14" name="__codelineno-38-14"></a><span class="c1"># Set macros for this example</span>
<a id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="n">macros</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">particle_modifier</span><span class="o">.</span><span class="n">VISUAL_PARTICLES_REMOVAL_LIMIT</span> <span class="o">=</span> <span class="mi">1000</span>
<a id="__codelineno-38-16" name="__codelineno-38-16"></a><span class="n">macros</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">particle_modifier</span><span class="o">.</span><span class="n">FLUID_PARTICLES_REMOVAL_LIMIT</span> <span class="o">=</span> <span class="mi">8000</span>
<a id="__codelineno-38-17" name="__codelineno-38-17"></a><span class="n">macros</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">particle_modifier</span><span class="o">.</span><span class="n">MAX_VISUAL_PARTICLES_APPLIED_PER_STEP</span> <span class="o">=</span> <span class="mi">10</span>
<a id="__codelineno-38-18" name="__codelineno-38-18"></a><span class="n">macros</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">particle_modifier</span><span class="o">.</span><span class="n">MAX_FLUID_PARTICLES_APPLIED_PER_STEP</span> <span class="o">=</span> <span class="mi">40</span>
<a id="__codelineno-38-19" name="__codelineno-38-19"></a><span class="n">StainSystem</span><span class="o">.</span><span class="n">_N_PARTICLES_PER_GROUP</span> <span class="o">=</span> <span class="mi">300</span>
<a id="__codelineno-38-20" name="__codelineno-38-20"></a>
<a id="__codelineno-38-21" name="__codelineno-38-21"></a><span class="c1"># Make sure object states and GPU dynamics are enabled (GPU dynamics needed for fluids)</span>
<a id="__codelineno-38-22" name="__codelineno-38-22"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-38-23" name="__codelineno-38-23"></a><span class="n">gm</span><span class="o">.</span><span class="n">USE_GPU_DYNAMICS</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-38-24" name="__codelineno-38-24"></a>
<a id="__codelineno-38-25" name="__codelineno-38-25"></a>
<a id="__codelineno-38-26" name="__codelineno-38-26"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-38-27" name="__codelineno-38-27"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-38-28" name="__codelineno-38-28"></a><span class="sd">    Demo of ParticleApplier and ParticleRemover object states, which enable objects to either apply arbitrary</span>
<a id="__codelineno-38-29" name="__codelineno-38-29"></a><span class="sd">    particles and remove arbitrary particles from the simulator, respectively.</span>
<a id="__codelineno-38-30" name="__codelineno-38-30"></a>
<a id="__codelineno-38-31" name="__codelineno-38-31"></a><span class="sd">    Loads an empty scene with a table, and starts clean to allow particles to be applied or pre-covers the table</span>
<a id="__codelineno-38-32" name="__codelineno-38-32"></a><span class="sd">    with particles to be removed. The ParticleApplier / ParticleRemover state is applied to an imported cloth object</span>
<a id="__codelineno-38-33" name="__codelineno-38-33"></a><span class="sd">    and allowed to interact with the table, applying / removing particles from the table.</span>
<a id="__codelineno-38-34" name="__codelineno-38-34"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-38-35" name="__codelineno-38-35"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-38-36" name="__codelineno-38-36"></a>
<a id="__codelineno-38-37" name="__codelineno-38-37"></a>    <span class="c1"># Choose what configuration to load</span>
<a id="__codelineno-38-38" name="__codelineno-38-38"></a>    <span class="n">modifier_type</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span>
<a id="__codelineno-38-39" name="__codelineno-38-39"></a>        <span class="n">options</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-38-40" name="__codelineno-38-40"></a>            <span class="s2">&quot;particleApplier&quot;</span><span class="p">:</span> <span class="s2">&quot;Demo object&#39;s ability to apply particles in the simulator&quot;</span><span class="p">,</span>
<a id="__codelineno-38-41" name="__codelineno-38-41"></a>            <span class="s2">&quot;particleRemover&quot;</span><span class="p">:</span> <span class="s2">&quot;Demo object&#39;s ability to remove particles from the simulator&quot;</span><span class="p">,</span>
<a id="__codelineno-38-42" name="__codelineno-38-42"></a>        <span class="p">},</span>
<a id="__codelineno-38-43" name="__codelineno-38-43"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;particle modifier type&quot;</span><span class="p">,</span>
<a id="__codelineno-38-44" name="__codelineno-38-44"></a>        <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">,</span>
<a id="__codelineno-38-45" name="__codelineno-38-45"></a>    <span class="p">)</span>
<a id="__codelineno-38-46" name="__codelineno-38-46"></a>
<a id="__codelineno-38-47" name="__codelineno-38-47"></a>    <span class="n">modification_metalink</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-38-48" name="__codelineno-38-48"></a>        <span class="s2">&quot;particleApplier&quot;</span><span class="p">:</span> <span class="s2">&quot;particleapplication_link&quot;</span><span class="p">,</span>
<a id="__codelineno-38-49" name="__codelineno-38-49"></a>        <span class="s2">&quot;particleRemover&quot;</span><span class="p">:</span> <span class="s2">&quot;particleremover_link&quot;</span><span class="p">,</span>
<a id="__codelineno-38-50" name="__codelineno-38-50"></a>    <span class="p">}</span>
<a id="__codelineno-38-51" name="__codelineno-38-51"></a>
<a id="__codelineno-38-52" name="__codelineno-38-52"></a>    <span class="n">particle_mapping</span> <span class="o">=</span> <span class="p">{</span><span class="n">system</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">system</span> <span class="k">for</span> <span class="n">system</span> <span class="ow">in</span> <span class="p">[</span><span class="n">StainSystem</span><span class="p">,</span> <span class="n">WaterSystem</span><span class="p">]}</span>
<a id="__codelineno-38-53" name="__codelineno-38-53"></a>    <span class="n">particle_type</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span>
<a id="__codelineno-38-54" name="__codelineno-38-54"></a>        <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> particles will be applied or removed from the simulator&quot;</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">particle_mapping</span><span class="p">},</span>
<a id="__codelineno-38-55" name="__codelineno-38-55"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;particle type&quot;</span><span class="p">,</span>
<a id="__codelineno-38-56" name="__codelineno-38-56"></a>        <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">,</span>
<a id="__codelineno-38-57" name="__codelineno-38-57"></a>    <span class="p">)</span>
<a id="__codelineno-38-58" name="__codelineno-38-58"></a>    <span class="n">particle_system</span> <span class="o">=</span> <span class="n">particle_mapping</span><span class="p">[</span><span class="n">particle_type</span><span class="p">]</span>
<a id="__codelineno-38-59" name="__codelineno-38-59"></a>
<a id="__codelineno-38-60" name="__codelineno-38-60"></a>    <span class="n">modification_method</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-38-61" name="__codelineno-38-61"></a>        <span class="s2">&quot;Adjacency&quot;</span><span class="p">:</span> <span class="n">ParticleModifyMethod</span><span class="o">.</span><span class="n">ADJACENCY</span><span class="p">,</span>
<a id="__codelineno-38-62" name="__codelineno-38-62"></a>        <span class="s2">&quot;Projection&quot;</span><span class="p">:</span> <span class="n">ParticleModifyMethod</span><span class="o">.</span><span class="n">PROJECTION</span><span class="p">,</span>
<a id="__codelineno-38-63" name="__codelineno-38-63"></a>    <span class="p">}</span>
<a id="__codelineno-38-64" name="__codelineno-38-64"></a>
<a id="__codelineno-38-65" name="__codelineno-38-65"></a>    <span class="n">projection_mesh_params</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-38-66" name="__codelineno-38-66"></a>        <span class="s2">&quot;Adjacency&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-38-67" name="__codelineno-38-67"></a>        <span class="s2">&quot;Projection&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-38-68" name="__codelineno-38-68"></a>            <span class="c1"># Either Cone or Cylinder; shape of the projection where particles can be applied / removed</span>
<a id="__codelineno-38-69" name="__codelineno-38-69"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Cone&quot;</span><span class="p">,</span>
<a id="__codelineno-38-70" name="__codelineno-38-70"></a>            <span class="c1"># Size of the cone</span>
<a id="__codelineno-38-71" name="__codelineno-38-71"></a>            <span class="s2">&quot;extents&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.375</span><span class="p">,</span> <span class="mf">0.375</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">]),</span>
<a id="__codelineno-38-72" name="__codelineno-38-72"></a>        <span class="p">},</span>
<a id="__codelineno-38-73" name="__codelineno-38-73"></a>    <span class="p">}</span>
<a id="__codelineno-38-74" name="__codelineno-38-74"></a>
<a id="__codelineno-38-75" name="__codelineno-38-75"></a>    <span class="n">method_type</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span>
<a id="__codelineno-38-76" name="__codelineno-38-76"></a>        <span class="n">options</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-38-77" name="__codelineno-38-77"></a>            <span class="s2">&quot;Adjacency&quot;</span><span class="p">:</span> <span class="s2">&quot;Close proximity to the object will be used to determine whether particles can be applied / removed&quot;</span><span class="p">,</span>
<a id="__codelineno-38-78" name="__codelineno-38-78"></a>            <span class="s2">&quot;Projection&quot;</span><span class="p">:</span> <span class="s2">&quot;A Cone or Cylinder shape protruding from the object will be used to determine whether particles can be applied / removed&quot;</span><span class="p">,</span>
<a id="__codelineno-38-79" name="__codelineno-38-79"></a>        <span class="p">},</span>
<a id="__codelineno-38-80" name="__codelineno-38-80"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;modifier method type&quot;</span><span class="p">,</span>
<a id="__codelineno-38-81" name="__codelineno-38-81"></a>        <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">,</span>
<a id="__codelineno-38-82" name="__codelineno-38-82"></a>    <span class="p">)</span>
<a id="__codelineno-38-83" name="__codelineno-38-83"></a>
<a id="__codelineno-38-84" name="__codelineno-38-84"></a>    <span class="c1"># Create the ability kwargs to pass to the object state</span>
<a id="__codelineno-38-85" name="__codelineno-38-85"></a>    <span class="n">abilities</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-38-86" name="__codelineno-38-86"></a>        <span class="n">modifier_type</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-38-87" name="__codelineno-38-87"></a>            <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="n">modification_method</span><span class="p">[</span><span class="n">method_type</span><span class="p">],</span>
<a id="__codelineno-38-88" name="__codelineno-38-88"></a>            <span class="s2">&quot;conditions&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-38-89" name="__codelineno-38-89"></a>                <span class="c1"># For a specific particle system, this specifies what conditions are required in order for the</span>
<a id="__codelineno-38-90" name="__codelineno-38-90"></a>                <span class="c1"># particle applier / remover to apply / remover particles associated with that system</span>
<a id="__codelineno-38-91" name="__codelineno-38-91"></a>                <span class="c1"># The list should contain functions with signature condition() --&gt; bool,</span>
<a id="__codelineno-38-92" name="__codelineno-38-92"></a>                <span class="c1"># where True means the condition is satisified</span>
<a id="__codelineno-38-93" name="__codelineno-38-93"></a>                <span class="n">particle_system</span><span class="p">:</span> <span class="p">[],</span>
<a id="__codelineno-38-94" name="__codelineno-38-94"></a>            <span class="p">},</span>
<a id="__codelineno-38-95" name="__codelineno-38-95"></a>            <span class="s2">&quot;projection_mesh_params&quot;</span><span class="p">:</span> <span class="n">projection_mesh_params</span><span class="p">[</span><span class="n">method_type</span><span class="p">],</span>
<a id="__codelineno-38-96" name="__codelineno-38-96"></a>        <span class="p">}</span>
<a id="__codelineno-38-97" name="__codelineno-38-97"></a>    <span class="p">}</span>
<a id="__codelineno-38-98" name="__codelineno-38-98"></a>
<a id="__codelineno-38-99" name="__codelineno-38-99"></a>    <span class="c1"># Define objects to load: a light, table, and cloth</span>
<a id="__codelineno-38-100" name="__codelineno-38-100"></a>    <span class="n">light_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-38-101" name="__codelineno-38-101"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;LightObject&quot;</span><span class="p">,</span>
<a id="__codelineno-38-102" name="__codelineno-38-102"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;light&quot;</span><span class="p">,</span>
<a id="__codelineno-38-103" name="__codelineno-38-103"></a>        <span class="n">light_type</span><span class="o">=</span><span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-38-104" name="__codelineno-38-104"></a>        <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-38-105" name="__codelineno-38-105"></a>        <span class="n">intensity</span><span class="o">=</span><span class="mf">1e5</span><span class="p">,</span>
<a id="__codelineno-38-106" name="__codelineno-38-106"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span>
<a id="__codelineno-38-107" name="__codelineno-38-107"></a>    <span class="p">)</span>
<a id="__codelineno-38-108" name="__codelineno-38-108"></a>
<a id="__codelineno-38-109" name="__codelineno-38-109"></a>    <span class="n">table_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-38-110" name="__codelineno-38-110"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-38-111" name="__codelineno-38-111"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">,</span>
<a id="__codelineno-38-112" name="__codelineno-38-112"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;breakfast_table&quot;</span><span class="p">,</span>
<a id="__codelineno-38-113" name="__codelineno-38-113"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;265851637a59eb2f882f822c83877cbc&quot;</span><span class="p">,</span>
<a id="__codelineno-38-114" name="__codelineno-38-114"></a>        <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span>
<a id="__codelineno-38-115" name="__codelineno-38-115"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span>
<a id="__codelineno-38-116" name="__codelineno-38-116"></a>    <span class="p">)</span>
<a id="__codelineno-38-117" name="__codelineno-38-117"></a>
<a id="__codelineno-38-118" name="__codelineno-38-118"></a>    <span class="c1"># Create the scene config to load -- empty scene with a light and table</span>
<a id="__codelineno-38-119" name="__codelineno-38-119"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-38-120" name="__codelineno-38-120"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-38-121" name="__codelineno-38-121"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-38-122" name="__codelineno-38-122"></a>        <span class="p">},</span>
<a id="__codelineno-38-123" name="__codelineno-38-123"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">light_cfg</span><span class="p">,</span> <span class="n">table_cfg</span><span class="p">],</span>
<a id="__codelineno-38-124" name="__codelineno-38-124"></a>    <span class="p">}</span>
<a id="__codelineno-38-125" name="__codelineno-38-125"></a>
<a id="__codelineno-38-126" name="__codelineno-38-126"></a>    <span class="c1"># Sanity check inputs: Remover + Adjacency + Fluid will not work because we are using a visual_only</span>
<a id="__codelineno-38-127" name="__codelineno-38-127"></a>    <span class="c1"># object, so contacts will not be triggered with this object</span>
<a id="__codelineno-38-128" name="__codelineno-38-128"></a>
<a id="__codelineno-38-129" name="__codelineno-38-129"></a>    <span class="c1"># Load the environment</span>
<a id="__codelineno-38-130" name="__codelineno-38-130"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-38-131" name="__codelineno-38-131"></a>
<a id="__codelineno-38-132" name="__codelineno-38-132"></a>    <span class="c1"># Grab references to table</span>
<a id="__codelineno-38-133" name="__codelineno-38-133"></a>    <span class="n">table</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span>
<a id="__codelineno-38-134" name="__codelineno-38-134"></a>
<a id="__codelineno-38-135" name="__codelineno-38-135"></a>    <span class="c1"># Set the viewer camera appropriately</span>
<a id="__codelineno-38-136" name="__codelineno-38-136"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-38-137" name="__codelineno-38-137"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">1.11136405</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.12709412</span><span class="p">,</span>  <span class="mf">1.99587299</span><span class="p">]),</span>
<a id="__codelineno-38-138" name="__codelineno-38-138"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">0.44662832</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.17829795</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.32506992</span><span class="p">,</span>  <span class="mf">0.81428652</span><span class="p">]),</span>
<a id="__codelineno-38-139" name="__codelineno-38-139"></a>    <span class="p">)</span>
<a id="__codelineno-38-140" name="__codelineno-38-140"></a>
<a id="__codelineno-38-141" name="__codelineno-38-141"></a>    <span class="c1"># Let objects settle first</span>
<a id="__codelineno-38-142" name="__codelineno-38-142"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<a id="__codelineno-38-143" name="__codelineno-38-143"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-38-144" name="__codelineno-38-144"></a>
<a id="__codelineno-38-145" name="__codelineno-38-145"></a>    <span class="c1"># If we&#39;re using a projection volume, we manually add in the required metalink required in order to use the volume</span>
<a id="__codelineno-38-146" name="__codelineno-38-146"></a>    <span class="n">modifier_path</span> <span class="o">=</span> <span class="s2">&quot;/World/modifier&quot;</span>
<a id="__codelineno-38-147" name="__codelineno-38-147"></a>    <span class="n">modifier_root_link_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">modifier_path</span><span class="si">}</span><span class="s2">/base_link&quot;</span>
<a id="__codelineno-38-148" name="__codelineno-38-148"></a>    <span class="n">add_reference_to_stage</span><span class="p">(</span>
<a id="__codelineno-38-149" name="__codelineno-38-149"></a>        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">og</span><span class="o">.</span><span class="n">og_dataset_path</span><span class="si">}</span><span class="s2">/objects/dishtowel/Tag_Dishtowel_Basket_Weave_Red/usd/Tag_Dishtowel_Basket_Weave_Red.usd&quot;</span><span class="p">,</span>
<a id="__codelineno-38-150" name="__codelineno-38-150"></a>        <span class="n">modifier_path</span><span class="p">,</span>
<a id="__codelineno-38-151" name="__codelineno-38-151"></a>    <span class="p">)</span>
<a id="__codelineno-38-152" name="__codelineno-38-152"></a>    <span class="k">if</span> <span class="n">method_type</span> <span class="o">==</span> <span class="s2">&quot;Projection&quot;</span><span class="p">:</span>
<a id="__codelineno-38-153" name="__codelineno-38-153"></a>        <span class="n">metalink_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">modifier_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">modification_metalink</span><span class="p">[</span><span class="n">modifier_type</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-38-154" name="__codelineno-38-154"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">stage</span><span class="o">.</span><span class="n">DefinePrim</span><span class="p">(</span><span class="n">metalink_path</span><span class="p">,</span> <span class="s2">&quot;Xform&quot;</span><span class="p">)</span>
<a id="__codelineno-38-155" name="__codelineno-38-155"></a>        <span class="n">joint_prim</span> <span class="o">=</span> <span class="n">create_joint</span><span class="p">(</span>
<a id="__codelineno-38-156" name="__codelineno-38-156"></a>            <span class="n">prim_path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">modifier_root_link_path</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">modification_metalink</span><span class="p">[</span><span class="n">modifier_type</span><span class="p">]</span><span class="si">}</span><span class="s2">_joint&quot;</span><span class="p">,</span>
<a id="__codelineno-38-157" name="__codelineno-38-157"></a>            <span class="n">body0</span><span class="o">=</span><span class="n">modifier_root_link_path</span><span class="p">,</span>
<a id="__codelineno-38-158" name="__codelineno-38-158"></a>            <span class="n">body1</span><span class="o">=</span><span class="n">metalink_path</span><span class="p">,</span>
<a id="__codelineno-38-159" name="__codelineno-38-159"></a>            <span class="n">joint_type</span><span class="o">=</span><span class="s2">&quot;FixedJoint&quot;</span><span class="p">,</span>
<a id="__codelineno-38-160" name="__codelineno-38-160"></a>            <span class="n">enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-38-161" name="__codelineno-38-161"></a>        <span class="p">)</span>
<a id="__codelineno-38-162" name="__codelineno-38-162"></a>        <span class="n">local_area_quat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.707</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.707</span><span class="p">])</span>    <span class="c1"># Needs to rotated so the metalink points downwards from cloth</span>
<a id="__codelineno-38-163" name="__codelineno-38-163"></a>        <span class="n">joint_prim</span><span class="o">.</span><span class="n">GetAttribute</span><span class="p">(</span><span class="s2">&quot;physics:localRot0&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="n">Gf</span><span class="o">.</span><span class="n">Quatf</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">local_area_quat</span><span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])))</span>
<a id="__codelineno-38-164" name="__codelineno-38-164"></a>
<a id="__codelineno-38-165" name="__codelineno-38-165"></a>    <span class="n">modifier</span> <span class="o">=</span> <span class="n">DatasetObject</span><span class="p">(</span>
<a id="__codelineno-38-166" name="__codelineno-38-166"></a>        <span class="n">prim_path</span><span class="o">=</span><span class="n">modifier_path</span><span class="p">,</span>
<a id="__codelineno-38-167" name="__codelineno-38-167"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;modifier&quot;</span><span class="p">,</span>
<a id="__codelineno-38-168" name="__codelineno-38-168"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;dishtowel&quot;</span><span class="p">,</span>
<a id="__codelineno-38-169" name="__codelineno-38-169"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;Tag_Dishtowel_Basket_Weave_Red&quot;</span><span class="p">,</span>
<a id="__codelineno-38-170" name="__codelineno-38-170"></a>        <span class="n">scale</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">,</span>
<a id="__codelineno-38-171" name="__codelineno-38-171"></a>        <span class="n">visual_only</span><span class="o">=</span><span class="n">method_type</span> <span class="o">==</span> <span class="s2">&quot;Projection&quot;</span> <span class="ow">or</span> <span class="n">particle_system</span> <span class="o">==</span> <span class="n">StainSystem</span><span class="p">,</span>  <span class="c1"># Fluid + adjacency requires the object to have collision geoms active</span>
<a id="__codelineno-38-172" name="__codelineno-38-172"></a>        <span class="n">abilities</span><span class="o">=</span><span class="n">abilities</span><span class="p">,</span>
<a id="__codelineno-38-173" name="__codelineno-38-173"></a>    <span class="p">)</span>
<a id="__codelineno-38-174" name="__codelineno-38-174"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_object</span><span class="p">(</span><span class="n">modifier</span><span class="p">)</span>
<a id="__codelineno-38-175" name="__codelineno-38-175"></a>    <span class="n">modifier</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]))</span>
<a id="__codelineno-38-176" name="__codelineno-38-176"></a>
<a id="__codelineno-38-177" name="__codelineno-38-177"></a>    <span class="c1"># Take a step to make sure all objects are properly initialized</span>
<a id="__codelineno-38-178" name="__codelineno-38-178"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>
<a id="__codelineno-38-179" name="__codelineno-38-179"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-38-180" name="__codelineno-38-180"></a>
<a id="__codelineno-38-181" name="__codelineno-38-181"></a>    <span class="c1"># If we&#39;re removing particles, set the table&#39;s covered state to be True</span>
<a id="__codelineno-38-182" name="__codelineno-38-182"></a>    <span class="k">if</span> <span class="n">modifier_type</span> <span class="o">==</span> <span class="s2">&quot;particleRemover&quot;</span><span class="p">:</span>
<a id="__codelineno-38-183" name="__codelineno-38-183"></a>        <span class="n">table</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">Covered</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">particle_system</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-38-184" name="__codelineno-38-184"></a>
<a id="__codelineno-38-185" name="__codelineno-38-185"></a>        <span class="c1"># Take a few steps to let particles settle</span>
<a id="__codelineno-38-186" name="__codelineno-38-186"></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>
<a id="__codelineno-38-187" name="__codelineno-38-187"></a>            <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-38-188" name="__codelineno-38-188"></a>
<a id="__codelineno-38-189" name="__codelineno-38-189"></a>    <span class="c1"># Enable camera teleoperation for convenience</span>
<a id="__codelineno-38-190" name="__codelineno-38-190"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">enable_viewer_camera_teleoperation</span><span class="p">()</span>
<a id="__codelineno-38-191" name="__codelineno-38-191"></a>
<a id="__codelineno-38-192" name="__codelineno-38-192"></a>    <span class="c1"># Set the modifier object to be in position to modify particles</span>
<a id="__codelineno-38-193" name="__codelineno-38-193"></a>    <span class="k">if</span> <span class="n">method_type</span> <span class="o">==</span> <span class="s2">&quot;Projection&quot;</span><span class="p">:</span>
<a id="__codelineno-38-194" name="__codelineno-38-194"></a>        <span class="c1"># Higher z to showcase projection volume at work</span>
<a id="__codelineno-38-195" name="__codelineno-38-195"></a>        <span class="n">z</span> <span class="o">=</span> <span class="mf">1.85</span>
<a id="__codelineno-38-196" name="__codelineno-38-196"></a>    <span class="k">elif</span> <span class="n">particle_system</span> <span class="o">==</span> <span class="n">StainSystem</span><span class="p">:</span>
<a id="__codelineno-38-197" name="__codelineno-38-197"></a>        <span class="c1"># Lower z needed to allow for adjacency bounding box to overlap properly</span>
<a id="__codelineno-38-198" name="__codelineno-38-198"></a>        <span class="n">z</span> <span class="o">=</span> <span class="mf">1.175</span>
<a id="__codelineno-38-199" name="__codelineno-38-199"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-38-200" name="__codelineno-38-200"></a>        <span class="c1"># Higher z needed for actual physical interaction to accomodate non-negligible particle radius</span>
<a id="__codelineno-38-201" name="__codelineno-38-201"></a>        <span class="n">z</span> <span class="o">=</span> <span class="mf">1.22</span>
<a id="__codelineno-38-202" name="__codelineno-38-202"></a>    <span class="n">modifier</span><span class="o">.</span><span class="n">keep_still</span><span class="p">()</span>
<a id="__codelineno-38-203" name="__codelineno-38-203"></a>    <span class="n">modifier</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-38-204" name="__codelineno-38-204"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">z</span><span class="p">]),</span>
<a id="__codelineno-38-205" name="__codelineno-38-205"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
<a id="__codelineno-38-206" name="__codelineno-38-206"></a>    <span class="p">)</span>
<a id="__codelineno-38-207" name="__codelineno-38-207"></a>
<a id="__codelineno-38-208" name="__codelineno-38-208"></a>    <span class="c1"># Move object in square around table</span>
<a id="__codelineno-38-209" name="__codelineno-38-209"></a>    <span class="n">deltas</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-38-210" name="__codelineno-38-210"></a>        <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])],</span>
<a id="__codelineno-38-211" name="__codelineno-38-211"></a>        <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">])],</span>
<a id="__codelineno-38-212" name="__codelineno-38-212"></a>        <span class="p">[</span><span class="mi">150</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])],</span>
<a id="__codelineno-38-213" name="__codelineno-38-213"></a>        <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">])],</span>
<a id="__codelineno-38-214" name="__codelineno-38-214"></a>    <span class="p">]</span>
<a id="__codelineno-38-215" name="__codelineno-38-215"></a>    <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="n">delta</span> <span class="ow">in</span> <span class="n">deltas</span><span class="p">:</span>
<a id="__codelineno-38-216" name="__codelineno-38-216"></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
<a id="__codelineno-38-217" name="__codelineno-38-217"></a>            <span class="n">modifier</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">modifier</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="n">delta</span><span class="p">)</span>
<a id="__codelineno-38-218" name="__codelineno-38-218"></a>            <span class="c1"># env.step(np.array([]))</span>
<a id="__codelineno-38-219" name="__codelineno-38-219"></a>            <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<a id="__codelineno-38-220" name="__codelineno-38-220"></a>
<a id="__codelineno-38-221" name="__codelineno-38-221"></a>    <span class="c1"># Always shut down environment at the end</span>
<a id="__codelineno-38-222" name="__codelineno-38-222"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-38-223" name="__codelineno-38-223"></a>
<a id="__codelineno-38-224" name="__codelineno-38-224"></a>
<a id="__codelineno-38-225" name="__codelineno-38-225"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-38-226" name="__codelineno-38-226"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="kinematics-demo"><strong>Kinematics Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to dynamically sample kinematic states for BEHAVIOR dataset objects</li>
<li>Understanding how to import additional objects after the environment is created</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">sample_kinematics_demo</span>
</code></pre></div>
<p>This demo procedurally generates a mini populated scene, spawning in a cabinet and placing boxes in its shelves, and then generating a microwave on a cabinet with a plate and apples sampled both inside and on top of it.</p>
<details class="code">
<summary>sample_kinematics_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1">  1</a></span>
<span class="normal"><a href="#__codelineno-40-2">  2</a></span>
<span class="normal"><a href="#__codelineno-40-3">  3</a></span>
<span class="normal"><a href="#__codelineno-40-4">  4</a></span>
<span class="normal"><a href="#__codelineno-40-5">  5</a></span>
<span class="normal"><a href="#__codelineno-40-6">  6</a></span>
<span class="normal"><a href="#__codelineno-40-7">  7</a></span>
<span class="normal"><a href="#__codelineno-40-8">  8</a></span>
<span class="normal"><a href="#__codelineno-40-9">  9</a></span>
<span class="normal"><a href="#__codelineno-40-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-40-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-40-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-40-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-40-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-40-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-40-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-40-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-40-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-40-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-40-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-40-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-40-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-40-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-40-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-40-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-40-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-40-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-40-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-40-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-40-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-40-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-40-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-40-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-40-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-40-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-40-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-40-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-40-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-40-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-40-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-40-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-40-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-40-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-40-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-40-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-40-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-40-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-40-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-40-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-40-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-40-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-40-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-40-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-40-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-40-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-40-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-40-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-40-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-40-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-40-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-40-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-40-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-40-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-40-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-40-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-40-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-40-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-40-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-40-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-40-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-40-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-40-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-40-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-40-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-40-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-40-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-40-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-40-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-40-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-40-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-40-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-40-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-40-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-40-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-40-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-40-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-40-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-40-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-40-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-40-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-40-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-40-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-40-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-40-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-40-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-40-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-40-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-40-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-40-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-40-100">100</a></span>
<span class="normal"><a href="#__codelineno-40-101">101</a></span>
<span class="normal"><a href="#__codelineno-40-102">102</a></span>
<span class="normal"><a href="#__codelineno-40-103">103</a></span>
<span class="normal"><a href="#__codelineno-40-104">104</a></span>
<span class="normal"><a href="#__codelineno-40-105">105</a></span>
<span class="normal"><a href="#__codelineno-40-106">106</a></span>
<span class="normal"><a href="#__codelineno-40-107">107</a></span>
<span class="normal"><a href="#__codelineno-40-108">108</a></span>
<span class="normal"><a href="#__codelineno-40-109">109</a></span>
<span class="normal"><a href="#__codelineno-40-110">110</a></span>
<span class="normal"><a href="#__codelineno-40-111">111</a></span>
<span class="normal"><a href="#__codelineno-40-112">112</a></span>
<span class="normal"><a href="#__codelineno-40-113">113</a></span>
<span class="normal"><a href="#__codelineno-40-114">114</a></span>
<span class="normal"><a href="#__codelineno-40-115">115</a></span>
<span class="normal"><a href="#__codelineno-40-116">116</a></span>
<span class="normal"><a href="#__codelineno-40-117">117</a></span>
<span class="normal"><a href="#__codelineno-40-118">118</a></span>
<span class="normal"><a href="#__codelineno-40-119">119</a></span>
<span class="normal"><a href="#__codelineno-40-120">120</a></span>
<span class="normal"><a href="#__codelineno-40-121">121</a></span>
<span class="normal"><a href="#__codelineno-40-122">122</a></span>
<span class="normal"><a href="#__codelineno-40-123">123</a></span>
<span class="normal"><a href="#__codelineno-40-124">124</a></span>
<span class="normal"><a href="#__codelineno-40-125">125</a></span>
<span class="normal"><a href="#__codelineno-40-126">126</a></span>
<span class="normal"><a href="#__codelineno-40-127">127</a></span>
<span class="normal"><a href="#__codelineno-40-128">128</a></span>
<span class="normal"><a href="#__codelineno-40-129">129</a></span>
<span class="normal"><a href="#__codelineno-40-130">130</a></span>
<span class="normal"><a href="#__codelineno-40-131">131</a></span>
<span class="normal"><a href="#__codelineno-40-132">132</a></span>
<span class="normal"><a href="#__codelineno-40-133">133</a></span>
<span class="normal"><a href="#__codelineno-40-134">134</a></span>
<span class="normal"><a href="#__codelineno-40-135">135</a></span>
<span class="normal"><a href="#__codelineno-40-136">136</a></span>
<span class="normal"><a href="#__codelineno-40-137">137</a></span>
<span class="normal"><a href="#__codelineno-40-138">138</a></span>
<span class="normal"><a href="#__codelineno-40-139">139</a></span>
<span class="normal"><a href="#__codelineno-40-140">140</a></span>
<span class="normal"><a href="#__codelineno-40-141">141</a></span>
<span class="normal"><a href="#__codelineno-40-142">142</a></span>
<span class="normal"><a href="#__codelineno-40-143">143</a></span>
<span class="normal"><a href="#__codelineno-40-144">144</a></span>
<span class="normal"><a href="#__codelineno-40-145">145</a></span>
<span class="normal"><a href="#__codelineno-40-146">146</a></span>
<span class="normal"><a href="#__codelineno-40-147">147</a></span>
<span class="normal"><a href="#__codelineno-40-148">148</a></span>
<span class="normal"><a href="#__codelineno-40-149">149</a></span>
<span class="normal"><a href="#__codelineno-40-150">150</a></span>
<span class="normal"><a href="#__codelineno-40-151">151</a></span>
<span class="normal"><a href="#__codelineno-40-152">152</a></span>
<span class="normal"><a href="#__codelineno-40-153">153</a></span>
<span class="normal"><a href="#__codelineno-40-154">154</a></span>
<span class="normal"><a href="#__codelineno-40-155">155</a></span>
<span class="normal"><a href="#__codelineno-40-156">156</a></span>
<span class="normal"><a href="#__codelineno-40-157">157</a></span>
<span class="normal"><a href="#__codelineno-40-158">158</a></span>
<span class="normal"><a href="#__codelineno-40-159">159</a></span>
<span class="normal"><a href="#__codelineno-40-160">160</a></span>
<span class="normal"><a href="#__codelineno-40-161">161</a></span>
<span class="normal"><a href="#__codelineno-40-162">162</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="kn">from</span> <span class="nn">omnigibson</span> <span class="kn">import</span> <span class="n">object_states</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="kn">from</span> <span class="nn">omnigibson.objects</span> <span class="kn">import</span> <span class="n">DatasetObject</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a>
<a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="c1"># Make sure object states and global contact reporting are enabled</span>
<a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-40-14" name="__codelineno-40-14"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_GLOBAL_CONTACT_REPORTING</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-40-15" name="__codelineno-40-15"></a>
<a id="__codelineno-40-16" name="__codelineno-40-16"></a>
<a id="__codelineno-40-17" name="__codelineno-40-17"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-40-18" name="__codelineno-40-18"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-40-19" name="__codelineno-40-19"></a><span class="sd">    Demo to use the raycasting-based sampler to load objects onTop and/or inside another</span>
<a id="__codelineno-40-20" name="__codelineno-40-20"></a><span class="sd">    Loads a cabinet, a microwave open on top of it, and two plates with apples on top, one inside and one on top of the cabinet</span>
<a id="__codelineno-40-21" name="__codelineno-40-21"></a><span class="sd">    Then loads a shelf and cracker boxes inside of it</span>
<a id="__codelineno-40-22" name="__codelineno-40-22"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-40-23" name="__codelineno-40-23"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-40-24" name="__codelineno-40-24"></a>
<a id="__codelineno-40-25" name="__codelineno-40-25"></a>    <span class="c1"># Create the scene config to load -- empty scene</span>
<a id="__codelineno-40-26" name="__codelineno-40-26"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-40-27" name="__codelineno-40-27"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-40-28" name="__codelineno-40-28"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-40-29" name="__codelineno-40-29"></a>        <span class="p">}</span>
<a id="__codelineno-40-30" name="__codelineno-40-30"></a>    <span class="p">}</span>
<a id="__codelineno-40-31" name="__codelineno-40-31"></a>
<a id="__codelineno-40-32" name="__codelineno-40-32"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-40-33" name="__codelineno-40-33"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-40-34" name="__codelineno-40-34"></a>    <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">([])</span>
<a id="__codelineno-40-35" name="__codelineno-40-35"></a>
<a id="__codelineno-40-36" name="__codelineno-40-36"></a>    <span class="c1"># Sample microwave and boxes</span>
<a id="__codelineno-40-37" name="__codelineno-40-37"></a>    <span class="n">sample_boxes_on_shelf</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<a id="__codelineno-40-38" name="__codelineno-40-38"></a>    <span class="n">sample_microwave_plates_apples</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<a id="__codelineno-40-39" name="__codelineno-40-39"></a>
<a id="__codelineno-40-40" name="__codelineno-40-40"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="mi">100</span> <span class="k">if</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
<a id="__codelineno-40-41" name="__codelineno-40-41"></a>    <span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-40-42" name="__codelineno-40-42"></a>    <span class="k">while</span> <span class="n">step</span> <span class="o">!=</span> <span class="n">max_steps</span><span class="p">:</span>
<a id="__codelineno-40-43" name="__codelineno-40-43"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-40-44" name="__codelineno-40-44"></a>        <span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-40-45" name="__codelineno-40-45"></a>
<a id="__codelineno-40-46" name="__codelineno-40-46"></a>    <span class="c1"># Always close environment at the end</span>
<a id="__codelineno-40-47" name="__codelineno-40-47"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-40-48" name="__codelineno-40-48"></a>
<a id="__codelineno-40-49" name="__codelineno-40-49"></a>
<a id="__codelineno-40-50" name="__codelineno-40-50"></a><span class="k">def</span> <span class="nf">sample_microwave_plates_apples</span><span class="p">(</span><span class="n">env</span><span class="p">):</span>
<a id="__codelineno-40-51" name="__codelineno-40-51"></a>    <span class="c1"># Load cabinet, set position manually, and step 100 times</span>
<a id="__codelineno-40-52" name="__codelineno-40-52"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Loading cabinet and microwave&quot;</span><span class="p">)</span>
<a id="__codelineno-40-53" name="__codelineno-40-53"></a>
<a id="__codelineno-40-54" name="__codelineno-40-54"></a>    <span class="n">microwave</span> <span class="o">=</span> <span class="n">DatasetObject</span><span class="p">(</span>
<a id="__codelineno-40-55" name="__codelineno-40-55"></a>        <span class="n">prim_path</span><span class="o">=</span><span class="s2">&quot;/World/microwave&quot;</span><span class="p">,</span>
<a id="__codelineno-40-56" name="__codelineno-40-56"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;microwave&quot;</span><span class="p">,</span>
<a id="__codelineno-40-57" name="__codelineno-40-57"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;microwave&quot;</span><span class="p">,</span>
<a id="__codelineno-40-58" name="__codelineno-40-58"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;7128&quot;</span><span class="p">,</span>
<a id="__codelineno-40-59" name="__codelineno-40-59"></a>        <span class="n">scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<a id="__codelineno-40-60" name="__codelineno-40-60"></a>    <span class="p">)</span>
<a id="__codelineno-40-61" name="__codelineno-40-61"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_object</span><span class="p">(</span><span class="n">microwave</span><span class="p">)</span>
<a id="__codelineno-40-62" name="__codelineno-40-62"></a>    <span class="n">microwave</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">]))</span>
<a id="__codelineno-40-63" name="__codelineno-40-63"></a>    <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>              <span class="c1"># One step is needed for the object to be fully initialized</span>
<a id="__codelineno-40-64" name="__codelineno-40-64"></a>
<a id="__codelineno-40-65" name="__codelineno-40-65"></a>    <span class="n">cabinet</span> <span class="o">=</span> <span class="n">DatasetObject</span><span class="p">(</span>
<a id="__codelineno-40-66" name="__codelineno-40-66"></a>        <span class="n">prim_path</span><span class="o">=</span><span class="s2">&quot;/World/cabinet&quot;</span><span class="p">,</span>
<a id="__codelineno-40-67" name="__codelineno-40-67"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cabinet&quot;</span><span class="p">,</span>
<a id="__codelineno-40-68" name="__codelineno-40-68"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;bottom_cabinet&quot;</span><span class="p">,</span>
<a id="__codelineno-40-69" name="__codelineno-40-69"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;46380&quot;</span><span class="p">,</span>
<a id="__codelineno-40-70" name="__codelineno-40-70"></a>    <span class="p">)</span>
<a id="__codelineno-40-71" name="__codelineno-40-71"></a>
<a id="__codelineno-40-72" name="__codelineno-40-72"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_object</span><span class="p">(</span><span class="n">cabinet</span><span class="p">)</span>
<a id="__codelineno-40-73" name="__codelineno-40-73"></a>    <span class="n">z_offset</span> <span class="o">=</span> <span class="o">-</span><span class="n">cabinet</span><span class="o">.</span><span class="n">aabb_center</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">cabinet</span><span class="o">.</span><span class="n">aabb_extent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-40-74" name="__codelineno-40-74"></a>    <span class="n">cabinet</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">z_offset</span><span class="p">]))</span>
<a id="__codelineno-40-75" name="__codelineno-40-75"></a>    <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>              <span class="c1"># One step is needed for the object to be fully initialized</span>
<a id="__codelineno-40-76" name="__codelineno-40-76"></a>
<a id="__codelineno-40-77" name="__codelineno-40-77"></a>    <span class="c1"># Set microwave on top of the cabinet, open it, and step 100 times</span>
<a id="__codelineno-40-78" name="__codelineno-40-78"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Placing microwave OnTop of the cabinet&quot;</span><span class="p">)</span>
<a id="__codelineno-40-79" name="__codelineno-40-79"></a>    <span class="k">assert</span> <span class="n">microwave</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">OnTop</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">cabinet</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-40-80" name="__codelineno-40-80"></a>    <span class="k">assert</span> <span class="n">microwave</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Open</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-40-81" name="__codelineno-40-81"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Microwave loaded and placed&quot;</span><span class="p">)</span>
<a id="__codelineno-40-82" name="__codelineno-40-82"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
<a id="__codelineno-40-83" name="__codelineno-40-83"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-40-84" name="__codelineno-40-84"></a>
<a id="__codelineno-40-85" name="__codelineno-40-85"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Loading plates&quot;</span><span class="p">)</span>
<a id="__codelineno-40-86" name="__codelineno-40-86"></a>    <span class="n">n_plates</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-40-87" name="__codelineno-40-87"></a>    <span class="n">n_apples</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-40-88" name="__codelineno-40-88"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_plates</span><span class="p">):</span>
<a id="__codelineno-40-89" name="__codelineno-40-89"></a>        <span class="n">plate</span> <span class="o">=</span> <span class="n">DatasetObject</span><span class="p">(</span>
<a id="__codelineno-40-90" name="__codelineno-40-90"></a>            <span class="n">prim_path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/World/plate</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-40-91" name="__codelineno-40-91"></a>            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;plate</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-40-92" name="__codelineno-40-92"></a>            <span class="n">category</span><span class="o">=</span><span class="s2">&quot;plate&quot;</span><span class="p">,</span>
<a id="__codelineno-40-93" name="__codelineno-40-93"></a>            <span class="n">model</span><span class="o">=</span><span class="s2">&quot;plate_000&quot;</span><span class="p">,</span>
<a id="__codelineno-40-94" name="__codelineno-40-94"></a>            <span class="n">bounding_box</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]),</span>
<a id="__codelineno-40-95" name="__codelineno-40-95"></a>        <span class="p">)</span>
<a id="__codelineno-40-96" name="__codelineno-40-96"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_object</span><span class="p">(</span><span class="n">plate</span><span class="p">)</span>
<a id="__codelineno-40-97" name="__codelineno-40-97"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>              <span class="c1"># One step is needed for the object to be fully initialized</span>
<a id="__codelineno-40-98" name="__codelineno-40-98"></a>
<a id="__codelineno-40-99" name="__codelineno-40-99"></a>        <span class="c1"># Put the 1st plate in the microwave</span>
<a id="__codelineno-40-100" name="__codelineno-40-100"></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-40-101" name="__codelineno-40-101"></a>            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Loading plate Inside the microwave&quot;</span><span class="p">)</span>
<a id="__codelineno-40-102" name="__codelineno-40-102"></a>            <span class="k">assert</span> <span class="n">plate</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Inside</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">microwave</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-40-103" name="__codelineno-40-103"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-40-104" name="__codelineno-40-104"></a>            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Loading plate OnTop the microwave&quot;</span><span class="p">)</span>
<a id="__codelineno-40-105" name="__codelineno-40-105"></a>            <span class="k">assert</span> <span class="n">plate</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">OnTop</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">microwave</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-40-106" name="__codelineno-40-106"></a>
<a id="__codelineno-40-107" name="__codelineno-40-107"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Plate </span><span class="si">%d</span><span class="s2"> loaded and placed.&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
<a id="__codelineno-40-108" name="__codelineno-40-108"></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
<a id="__codelineno-40-109" name="__codelineno-40-109"></a>            <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-40-110" name="__codelineno-40-110"></a>
<a id="__codelineno-40-111" name="__codelineno-40-111"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Loading three apples OnTop of the plate&quot;</span><span class="p">)</span>
<a id="__codelineno-40-112" name="__codelineno-40-112"></a>        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_apples</span><span class="p">):</span>
<a id="__codelineno-40-113" name="__codelineno-40-113"></a>            <span class="n">apple</span> <span class="o">=</span> <span class="n">DatasetObject</span><span class="p">(</span>
<a id="__codelineno-40-114" name="__codelineno-40-114"></a>                <span class="n">prim_path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/World/apple</span><span class="si">{</span><span class="n">i</span> <span class="o">*</span> <span class="n">n_apples</span> <span class="o">+</span> <span class="n">j</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-40-115" name="__codelineno-40-115"></a>                <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;apple</span><span class="si">{</span><span class="n">i</span> <span class="o">*</span> <span class="n">n_apples</span> <span class="o">+</span> <span class="n">j</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-40-116" name="__codelineno-40-116"></a>                <span class="n">category</span><span class="o">=</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span>
<a id="__codelineno-40-117" name="__codelineno-40-117"></a>                <span class="n">model</span><span class="o">=</span><span class="s2">&quot;00_0&quot;</span><span class="p">,</span>
<a id="__codelineno-40-118" name="__codelineno-40-118"></a>            <span class="p">)</span>
<a id="__codelineno-40-119" name="__codelineno-40-119"></a>            <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_object</span><span class="p">(</span><span class="n">apple</span><span class="p">)</span>
<a id="__codelineno-40-120" name="__codelineno-40-120"></a>            <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># One step is needed for the object to be fully initialized</span>
<a id="__codelineno-40-121" name="__codelineno-40-121"></a>            <span class="k">assert</span> <span class="n">apple</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">OnTop</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">plate</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-40-122" name="__codelineno-40-122"></a>            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Apple </span><span class="si">%d</span><span class="s2"> loaded and placed.&quot;</span> <span class="o">%</span> <span class="n">j</span><span class="p">)</span>
<a id="__codelineno-40-123" name="__codelineno-40-123"></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
<a id="__codelineno-40-124" name="__codelineno-40-124"></a>                <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-40-125" name="__codelineno-40-125"></a>
<a id="__codelineno-40-126" name="__codelineno-40-126"></a>
<a id="__codelineno-40-127" name="__codelineno-40-127"></a><span class="k">def</span> <span class="nf">sample_boxes_on_shelf</span><span class="p">(</span><span class="n">env</span><span class="p">):</span>
<a id="__codelineno-40-128" name="__codelineno-40-128"></a>    <span class="n">shelf</span> <span class="o">=</span> <span class="n">DatasetObject</span><span class="p">(</span>
<a id="__codelineno-40-129" name="__codelineno-40-129"></a>        <span class="n">prim_path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/World/shelf&quot;</span><span class="p">,</span>
<a id="__codelineno-40-130" name="__codelineno-40-130"></a>        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;shelf&quot;</span><span class="p">,</span>
<a id="__codelineno-40-131" name="__codelineno-40-131"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;shelf&quot;</span><span class="p">,</span>
<a id="__codelineno-40-132" name="__codelineno-40-132"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;1170df5b9512c1d92f6bce2b7e6c12b7&quot;</span><span class="p">,</span>
<a id="__codelineno-40-133" name="__codelineno-40-133"></a>        <span class="n">bounding_box</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]),</span>
<a id="__codelineno-40-134" name="__codelineno-40-134"></a>    <span class="p">)</span>
<a id="__codelineno-40-135" name="__codelineno-40-135"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_object</span><span class="p">(</span><span class="n">shelf</span><span class="p">)</span>
<a id="__codelineno-40-136" name="__codelineno-40-136"></a>    <span class="n">z_offset</span> <span class="o">=</span> <span class="o">-</span><span class="n">shelf</span><span class="o">.</span><span class="n">aabb_center</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">shelf</span><span class="o">.</span><span class="n">aabb_extent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span>
<a id="__codelineno-40-137" name="__codelineno-40-137"></a>    <span class="n">shelf</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">z_offset</span><span class="p">]))</span>
<a id="__codelineno-40-138" name="__codelineno-40-138"></a>    <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># One step is needed for the object to be fully initialized</span>
<a id="__codelineno-40-139" name="__codelineno-40-139"></a>
<a id="__codelineno-40-140" name="__codelineno-40-140"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Shelf placed&quot;</span><span class="p">)</span>
<a id="__codelineno-40-141" name="__codelineno-40-141"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
<a id="__codelineno-40-142" name="__codelineno-40-142"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-40-143" name="__codelineno-40-143"></a>
<a id="__codelineno-40-144" name="__codelineno-40-144"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
<a id="__codelineno-40-145" name="__codelineno-40-145"></a>        <span class="n">box</span> <span class="o">=</span> <span class="n">DatasetObject</span><span class="p">(</span>
<a id="__codelineno-40-146" name="__codelineno-40-146"></a>            <span class="n">prim_path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/World/box</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-40-147" name="__codelineno-40-147"></a>            <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;box</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-40-148" name="__codelineno-40-148"></a>            <span class="n">category</span><span class="o">=</span><span class="s2">&quot;cracker_box&quot;</span><span class="p">,</span>
<a id="__codelineno-40-149" name="__codelineno-40-149"></a>            <span class="n">model</span><span class="o">=</span><span class="s2">&quot;cracker_box_000&quot;</span><span class="p">,</span>
<a id="__codelineno-40-150" name="__codelineno-40-150"></a>            <span class="n">bounding_box</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]),</span>
<a id="__codelineno-40-151" name="__codelineno-40-151"></a>        <span class="p">)</span>
<a id="__codelineno-40-152" name="__codelineno-40-152"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_object</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>
<a id="__codelineno-40-153" name="__codelineno-40-153"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>  <span class="c1"># One step is needed for the object to be fully initialized</span>
<a id="__codelineno-40-154" name="__codelineno-40-154"></a>        <span class="n">box</span><span class="o">.</span><span class="n">states</span><span class="p">[</span><span class="n">object_states</span><span class="o">.</span><span class="n">Inside</span><span class="p">]</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="n">shelf</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">use_ray_casting_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-40-155" name="__codelineno-40-155"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Box </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> placed.&quot;</span><span class="p">)</span>
<a id="__codelineno-40-156" name="__codelineno-40-156"></a>
<a id="__codelineno-40-157" name="__codelineno-40-157"></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
<a id="__codelineno-40-158" name="__codelineno-40-158"></a>            <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-40-159" name="__codelineno-40-159"></a>
<a id="__codelineno-40-160" name="__codelineno-40-160"></a>
<a id="__codelineno-40-161" name="__codelineno-40-161"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-40-162" name="__codelineno-40-162"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="slicing-demo"><strong>Slicing Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how slicing works in <strong><code>OmniGibson</code></strong></li>
<li>Understanding how to access individual objects once the environment is created</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">object_states</span><span class="o">.</span><span class="n">slicing_demo</span>
</code></pre></div>
<p>This demo spawns an apple on a table with a knife above it, and lets the knife fall to "cut" the apple in half.</p>
<details class="code">
<summary>slicing_demo.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1">  1</a></span>
<span class="normal"><a href="#__codelineno-42-2">  2</a></span>
<span class="normal"><a href="#__codelineno-42-3">  3</a></span>
<span class="normal"><a href="#__codelineno-42-4">  4</a></span>
<span class="normal"><a href="#__codelineno-42-5">  5</a></span>
<span class="normal"><a href="#__codelineno-42-6">  6</a></span>
<span class="normal"><a href="#__codelineno-42-7">  7</a></span>
<span class="normal"><a href="#__codelineno-42-8">  8</a></span>
<span class="normal"><a href="#__codelineno-42-9">  9</a></span>
<span class="normal"><a href="#__codelineno-42-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-42-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-42-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-42-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-42-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-42-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-42-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-42-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-42-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-42-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-42-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-42-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-42-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-42-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-42-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-42-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-42-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-42-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-42-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-42-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-42-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-42-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-42-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-42-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-42-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-42-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-42-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-42-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-42-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-42-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-42-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-42-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-42-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-42-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-42-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-42-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-42-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-42-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-42-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-42-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-42-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-42-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-42-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-42-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-42-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-42-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-42-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-42-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-42-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-42-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-42-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-42-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-42-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-42-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-42-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-42-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-42-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-42-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-42-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-42-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-42-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-42-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-42-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-42-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-42-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-42-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-42-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-42-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-42-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-42-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-42-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-42-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-42-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-42-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-42-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-42-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-42-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-42-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-42-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-42-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-42-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-42-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-42-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-42-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-42-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-42-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-42-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-42-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-42-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-42-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-42-100">100</a></span>
<span class="normal"><a href="#__codelineno-42-101">101</a></span>
<span class="normal"><a href="#__codelineno-42-102">102</a></span>
<span class="normal"><a href="#__codelineno-42-103">103</a></span>
<span class="normal"><a href="#__codelineno-42-104">104</a></span>
<span class="normal"><a href="#__codelineno-42-105">105</a></span>
<span class="normal"><a href="#__codelineno-42-106">106</a></span>
<span class="normal"><a href="#__codelineno-42-107">107</a></span>
<span class="normal"><a href="#__codelineno-42-108">108</a></span>
<span class="normal"><a href="#__codelineno-42-109">109</a></span>
<span class="normal"><a href="#__codelineno-42-110">110</a></span>
<span class="normal"><a href="#__codelineno-42-111">111</a></span>
<span class="normal"><a href="#__codelineno-42-112">112</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-42-4" name="__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="kn">import</span> <span class="nn">omnigibson.utils.transform_utils</span> <span class="k">as</span> <span class="nn">T</span>
<a id="__codelineno-42-8" name="__codelineno-42-8"></a>
<a id="__codelineno-42-9" name="__codelineno-42-9"></a><span class="c1"># Make sure object states, contact reporting, and transition rules are enabled</span>
<a id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_OBJECT_STATES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_GLOBAL_CONTACT_REPORTING</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-42-12" name="__codelineno-42-12"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_TRANSITION_RULES</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-42-13" name="__codelineno-42-13"></a>
<a id="__codelineno-42-14" name="__codelineno-42-14"></a>
<a id="__codelineno-42-15" name="__codelineno-42-15"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-42-16" name="__codelineno-42-16"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-42-17" name="__codelineno-42-17"></a><span class="sd">    Demo to use the raycasting-based sampler to load objects onTop and/or inside another</span>
<a id="__codelineno-42-18" name="__codelineno-42-18"></a><span class="sd">    Loads a cabinet, a microwave open on top of it, and two plates with apples on top, one inside and one on top of the cabinet</span>
<a id="__codelineno-42-19" name="__codelineno-42-19"></a><span class="sd">    Then loads a shelf and cracker boxes inside of it</span>
<a id="__codelineno-42-20" name="__codelineno-42-20"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-42-21" name="__codelineno-42-21"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-42-22" name="__codelineno-42-22"></a>
<a id="__codelineno-42-23" name="__codelineno-42-23"></a>    <span class="c1"># Create the scene config to load -- empty scene with table, knife, and apple</span>
<a id="__codelineno-42-24" name="__codelineno-42-24"></a>    <span class="n">table_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-42-25" name="__codelineno-42-25"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-42-26" name="__codelineno-42-26"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">,</span>
<a id="__codelineno-42-27" name="__codelineno-42-27"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;breakfast_table&quot;</span><span class="p">,</span>
<a id="__codelineno-42-28" name="__codelineno-42-28"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;19203&quot;</span><span class="p">,</span>
<a id="__codelineno-42-29" name="__codelineno-42-29"></a>        <span class="n">scale</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
<a id="__codelineno-42-30" name="__codelineno-42-30"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.532</span><span class="p">],</span>
<a id="__codelineno-42-31" name="__codelineno-42-31"></a>    <span class="p">)</span>
<a id="__codelineno-42-32" name="__codelineno-42-32"></a>
<a id="__codelineno-42-33" name="__codelineno-42-33"></a>    <span class="n">apple_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-42-34" name="__codelineno-42-34"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-42-35" name="__codelineno-42-35"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span>
<a id="__codelineno-42-36" name="__codelineno-42-36"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span>
<a id="__codelineno-42-37" name="__codelineno-42-37"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;00_0&quot;</span><span class="p">,</span>
<a id="__codelineno-42-38" name="__codelineno-42-38"></a>        <span class="n">scale</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
<a id="__codelineno-42-39" name="__codelineno-42-39"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">0.085</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>  <span class="mf">0.90</span><span class="p">],</span>
<a id="__codelineno-42-40" name="__codelineno-42-40"></a>    <span class="p">)</span>
<a id="__codelineno-42-41" name="__codelineno-42-41"></a>
<a id="__codelineno-42-42" name="__codelineno-42-42"></a>    <span class="n">knife_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-42-43" name="__codelineno-42-43"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-42-44" name="__codelineno-42-44"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;knife&quot;</span><span class="p">,</span>
<a id="__codelineno-42-45" name="__codelineno-42-45"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;table_knife&quot;</span><span class="p">,</span>
<a id="__codelineno-42-46" name="__codelineno-42-46"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;4&quot;</span><span class="p">,</span>
<a id="__codelineno-42-47" name="__codelineno-42-47"></a>        <span class="n">scale</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span>
<a id="__codelineno-42-48" name="__codelineno-42-48"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">],</span>
<a id="__codelineno-42-49" name="__codelineno-42-49"></a>    <span class="p">)</span>
<a id="__codelineno-42-50" name="__codelineno-42-50"></a>
<a id="__codelineno-42-51" name="__codelineno-42-51"></a>    <span class="n">light0_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-42-52" name="__codelineno-42-52"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;LightObject&quot;</span><span class="p">,</span>
<a id="__codelineno-42-53" name="__codelineno-42-53"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;light0&quot;</span><span class="p">,</span>
<a id="__codelineno-42-54" name="__codelineno-42-54"></a>        <span class="n">light_type</span><span class="o">=</span><span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-42-55" name="__codelineno-42-55"></a>        <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-42-56" name="__codelineno-42-56"></a>        <span class="n">intensity</span><span class="o">=</span><span class="mf">4000.0</span><span class="p">,</span>
<a id="__codelineno-42-57" name="__codelineno-42-57"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">1.217</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.848</span><span class="p">,</span> <span class="mf">1.388</span><span class="p">],</span>
<a id="__codelineno-42-58" name="__codelineno-42-58"></a>    <span class="p">)</span>
<a id="__codelineno-42-59" name="__codelineno-42-59"></a>
<a id="__codelineno-42-60" name="__codelineno-42-60"></a>    <span class="n">light1_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-42-61" name="__codelineno-42-61"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;LightObject&quot;</span><span class="p">,</span>
<a id="__codelineno-42-62" name="__codelineno-42-62"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;light1&quot;</span><span class="p">,</span>
<a id="__codelineno-42-63" name="__codelineno-42-63"></a>        <span class="n">light_type</span><span class="o">=</span><span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
<a id="__codelineno-42-64" name="__codelineno-42-64"></a>        <span class="n">radius</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<a id="__codelineno-42-65" name="__codelineno-42-65"></a>        <span class="n">intensity</span><span class="o">=</span><span class="mf">4000.0</span><span class="p">,</span>
<a id="__codelineno-42-66" name="__codelineno-42-66"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">1.217</span><span class="p">,</span> <span class="mf">0.848</span><span class="p">,</span> <span class="mf">1.388</span><span class="p">],</span>
<a id="__codelineno-42-67" name="__codelineno-42-67"></a>    <span class="p">)</span>
<a id="__codelineno-42-68" name="__codelineno-42-68"></a>
<a id="__codelineno-42-69" name="__codelineno-42-69"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-42-70" name="__codelineno-42-70"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-42-71" name="__codelineno-42-71"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-42-72" name="__codelineno-42-72"></a>        <span class="p">},</span>
<a id="__codelineno-42-73" name="__codelineno-42-73"></a>        <span class="s2">&quot;objects&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">table_cfg</span><span class="p">,</span> <span class="n">apple_cfg</span><span class="p">,</span> <span class="n">knife_cfg</span><span class="p">,</span> <span class="n">light0_cfg</span><span class="p">,</span> <span class="n">light1_cfg</span><span class="p">]</span>
<a id="__codelineno-42-74" name="__codelineno-42-74"></a>    <span class="p">}</span>
<a id="__codelineno-42-75" name="__codelineno-42-75"></a>
<a id="__codelineno-42-76" name="__codelineno-42-76"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-42-77" name="__codelineno-42-77"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-42-78" name="__codelineno-42-78"></a>
<a id="__codelineno-42-79" name="__codelineno-42-79"></a>    <span class="c1"># Grab reference to apple and knife</span>
<a id="__codelineno-42-80" name="__codelineno-42-80"></a>    <span class="n">apple</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;apple&quot;</span><span class="p">)</span>
<a id="__codelineno-42-81" name="__codelineno-42-81"></a>    <span class="n">knife</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">object_registry</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;knife&quot;</span><span class="p">)</span>
<a id="__codelineno-42-82" name="__codelineno-42-82"></a>
<a id="__codelineno-42-83" name="__codelineno-42-83"></a>    <span class="c1"># Update the simulator&#39;s viewer camera&#39;s pose so it points towards the table</span>
<a id="__codelineno-42-84" name="__codelineno-42-84"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-42-85" name="__codelineno-42-85"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">0.544888</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.412084</span><span class="p">,</span>  <span class="mf">1.11569</span> <span class="p">]),</span>
<a id="__codelineno-42-86" name="__codelineno-42-86"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.54757518</span><span class="p">,</span> <span class="mf">0.27792802</span><span class="p">,</span> <span class="mf">0.35721896</span><span class="p">,</span> <span class="mf">0.70378409</span><span class="p">]),</span>
<a id="__codelineno-42-87" name="__codelineno-42-87"></a>    <span class="p">)</span>
<a id="__codelineno-42-88" name="__codelineno-42-88"></a>
<a id="__codelineno-42-89" name="__codelineno-42-89"></a>    <span class="c1"># Let apple settle</span>
<a id="__codelineno-42-90" name="__codelineno-42-90"></a>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
<a id="__codelineno-42-91" name="__codelineno-42-91"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-42-92" name="__codelineno-42-92"></a>
<a id="__codelineno-42-93" name="__codelineno-42-93"></a>    <span class="n">knife</span><span class="o">.</span><span class="n">keep_still</span><span class="p">()</span>
<a id="__codelineno-42-94" name="__codelineno-42-94"></a>    <span class="n">knife</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-42-95" name="__codelineno-42-95"></a>        <span class="n">position</span><span class="o">=</span><span class="n">apple</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]),</span>
<a id="__codelineno-42-96" name="__codelineno-42-96"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">T</span><span class="o">.</span><span class="n">euler2quat</span><span class="p">([</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span>
<a id="__codelineno-42-97" name="__codelineno-42-97"></a>    <span class="p">)</span>
<a id="__codelineno-42-98" name="__codelineno-42-98"></a>
<a id="__codelineno-42-99" name="__codelineno-42-99"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;The knife will fall on the apple and slice it. Press [ENTER] to continue.&quot;</span><span class="p">)</span>
<a id="__codelineno-42-100" name="__codelineno-42-100"></a>
<a id="__codelineno-42-101" name="__codelineno-42-101"></a>    <span class="c1"># Step simulation for a bit so that apple is sliced</span>
<a id="__codelineno-42-102" name="__codelineno-42-102"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
<a id="__codelineno-42-103" name="__codelineno-42-103"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([]))</span>
<a id="__codelineno-42-104" name="__codelineno-42-104"></a>
<a id="__codelineno-42-105" name="__codelineno-42-105"></a>    <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Apple has been sliced! Press [ENTER] to terminate the demo.&quot;</span><span class="p">)</span>
<a id="__codelineno-42-106" name="__codelineno-42-106"></a>
<a id="__codelineno-42-107" name="__codelineno-42-107"></a>    <span class="c1"># Always close environment at the end</span>
<a id="__codelineno-42-108" name="__codelineno-42-108"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-42-109" name="__codelineno-42-109"></a>
<a id="__codelineno-42-110" name="__codelineno-42-110"></a>
<a id="__codelineno-42-111" name="__codelineno-42-111"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-42-112" name="__codelineno-42-112"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h2 id="robots">🤖 <strong>Robots</strong></h2>
<p>These examples showcase how to interact and leverage robot objects in <strong><code>OmniGibson</code></strong>.</p>
<h3 id="robot-visualizer-demo"><strong>Robot Visualizer Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to load a robot into <strong><code>OmniGibson</code></strong> after an environment is created</li>
<li>Accessing all <strong><code>OmniGibson</code></strong> robot models</li>
<li>Viewing robots' low-level joint motion</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">robots</span><span class="o">.</span><span class="n">all_robots_visualizer</span>
</code></pre></div>
<p>This demo iterates over all robots in <strong><code>OmniGibson</code></strong>, loading each one into an empty scene and randomly moving its joints for a brief amount of time.</p>
<details class="code">
<summary>all_robots_visualizer.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-44-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-44-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-44-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-44-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-44-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-44-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-44-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-44-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-44-10">10</a></span>
<span class="normal"><a href="#__codelineno-44-11">11</a></span>
<span class="normal"><a href="#__codelineno-44-12">12</a></span>
<span class="normal"><a href="#__codelineno-44-13">13</a></span>
<span class="normal"><a href="#__codelineno-44-14">14</a></span>
<span class="normal"><a href="#__codelineno-44-15">15</a></span>
<span class="normal"><a href="#__codelineno-44-16">16</a></span>
<span class="normal"><a href="#__codelineno-44-17">17</a></span>
<span class="normal"><a href="#__codelineno-44-18">18</a></span>
<span class="normal"><a href="#__codelineno-44-19">19</a></span>
<span class="normal"><a href="#__codelineno-44-20">20</a></span>
<span class="normal"><a href="#__codelineno-44-21">21</a></span>
<span class="normal"><a href="#__codelineno-44-22">22</a></span>
<span class="normal"><a href="#__codelineno-44-23">23</a></span>
<span class="normal"><a href="#__codelineno-44-24">24</a></span>
<span class="normal"><a href="#__codelineno-44-25">25</a></span>
<span class="normal"><a href="#__codelineno-44-26">26</a></span>
<span class="normal"><a href="#__codelineno-44-27">27</a></span>
<span class="normal"><a href="#__codelineno-44-28">28</a></span>
<span class="normal"><a href="#__codelineno-44-29">29</a></span>
<span class="normal"><a href="#__codelineno-44-30">30</a></span>
<span class="normal"><a href="#__codelineno-44-31">31</a></span>
<span class="normal"><a href="#__codelineno-44-32">32</a></span>
<span class="normal"><a href="#__codelineno-44-33">33</a></span>
<span class="normal"><a href="#__codelineno-44-34">34</a></span>
<span class="normal"><a href="#__codelineno-44-35">35</a></span>
<span class="normal"><a href="#__codelineno-44-36">36</a></span>
<span class="normal"><a href="#__codelineno-44-37">37</a></span>
<span class="normal"><a href="#__codelineno-44-38">38</a></span>
<span class="normal"><a href="#__codelineno-44-39">39</a></span>
<span class="normal"><a href="#__codelineno-44-40">40</a></span>
<span class="normal"><a href="#__codelineno-44-41">41</a></span>
<span class="normal"><a href="#__codelineno-44-42">42</a></span>
<span class="normal"><a href="#__codelineno-44-43">43</a></span>
<span class="normal"><a href="#__codelineno-44-44">44</a></span>
<span class="normal"><a href="#__codelineno-44-45">45</a></span>
<span class="normal"><a href="#__codelineno-44-46">46</a></span>
<span class="normal"><a href="#__codelineno-44-47">47</a></span>
<span class="normal"><a href="#__codelineno-44-48">48</a></span>
<span class="normal"><a href="#__codelineno-44-49">49</a></span>
<span class="normal"><a href="#__codelineno-44-50">50</a></span>
<span class="normal"><a href="#__codelineno-44-51">51</a></span>
<span class="normal"><a href="#__codelineno-44-52">52</a></span>
<span class="normal"><a href="#__codelineno-44-53">53</a></span>
<span class="normal"><a href="#__codelineno-44-54">54</a></span>
<span class="normal"><a href="#__codelineno-44-55">55</a></span>
<span class="normal"><a href="#__codelineno-44-56">56</a></span>
<span class="normal"><a href="#__codelineno-44-57">57</a></span>
<span class="normal"><a href="#__codelineno-44-58">58</a></span>
<span class="normal"><a href="#__codelineno-44-59">59</a></span>
<span class="normal"><a href="#__codelineno-44-60">60</a></span>
<span class="normal"><a href="#__codelineno-44-61">61</a></span>
<span class="normal"><a href="#__codelineno-44-62">62</a></span>
<span class="normal"><a href="#__codelineno-44-63">63</a></span>
<span class="normal"><a href="#__codelineno-44-64">64</a></span>
<span class="normal"><a href="#__codelineno-44-65">65</a></span>
<span class="normal"><a href="#__codelineno-44-66">66</a></span>
<span class="normal"><a href="#__codelineno-44-67">67</a></span>
<span class="normal"><a href="#__codelineno-44-68">68</a></span>
<span class="normal"><a href="#__codelineno-44-69">69</a></span>
<span class="normal"><a href="#__codelineno-44-70">70</a></span>
<span class="normal"><a href="#__codelineno-44-71">71</a></span>
<span class="normal"><a href="#__codelineno-44-72">72</a></span>
<span class="normal"><a href="#__codelineno-44-73">73</a></span>
<span class="normal"><a href="#__codelineno-44-74">74</a></span>
<span class="normal"><a href="#__codelineno-44-75">75</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a>
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="kn">from</span> <span class="nn">omnigibson.robots</span> <span class="kn">import</span> <span class="n">REGISTERED_ROBOTS</span>
<a id="__codelineno-44-7" name="__codelineno-44-7"></a><span class="kn">from</span> <span class="nn">omnigibson.scenes</span> <span class="kn">import</span> <span class="n">Scene</span>
<a id="__codelineno-44-8" name="__codelineno-44-8"></a>
<a id="__codelineno-44-9" name="__codelineno-44-9"></a>
<a id="__codelineno-44-10" name="__codelineno-44-10"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-44-11" name="__codelineno-44-11"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-44-12" name="__codelineno-44-12"></a><span class="sd">    Robot demo</span>
<a id="__codelineno-44-13" name="__codelineno-44-13"></a><span class="sd">    Loads all robots in an empty scene, generate random actions</span>
<a id="__codelineno-44-14" name="__codelineno-44-14"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-44-15" name="__codelineno-44-15"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-44-16" name="__codelineno-44-16"></a>    <span class="c1"># Create empty scene with no robots in it initially</span>
<a id="__codelineno-44-17" name="__codelineno-44-17"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-44-18" name="__codelineno-44-18"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-44-19" name="__codelineno-44-19"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Scene&quot;</span><span class="p">,</span>
<a id="__codelineno-44-20" name="__codelineno-44-20"></a>        <span class="p">}</span>
<a id="__codelineno-44-21" name="__codelineno-44-21"></a>    <span class="p">}</span>
<a id="__codelineno-44-22" name="__codelineno-44-22"></a>
<a id="__codelineno-44-23" name="__codelineno-44-23"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-44-24" name="__codelineno-44-24"></a>
<a id="__codelineno-44-25" name="__codelineno-44-25"></a>    <span class="c1"># Iterate over all robots and demo their motion</span>
<a id="__codelineno-44-26" name="__codelineno-44-26"></a>    <span class="k">for</span> <span class="n">robot_name</span><span class="p">,</span> <span class="n">robot_cls</span> <span class="ow">in</span> <span class="n">REGISTERED_ROBOTS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-44-27" name="__codelineno-44-27"></a>        <span class="c1"># Create and import robot</span>
<a id="__codelineno-44-28" name="__codelineno-44-28"></a>        <span class="n">robot</span> <span class="o">=</span> <span class="n">robot_cls</span><span class="p">(</span>
<a id="__codelineno-44-29" name="__codelineno-44-29"></a>            <span class="n">prim_path</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;/World/</span><span class="si">{</span><span class="n">robot_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-44-30" name="__codelineno-44-30"></a>            <span class="n">name</span><span class="o">=</span><span class="n">robot_name</span><span class="p">,</span>
<a id="__codelineno-44-31" name="__codelineno-44-31"></a>            <span class="n">obs_modalities</span><span class="o">=</span><span class="p">[],</span>              <span class="c1"># We&#39;re just moving robots around so don&#39;t load any observation modalities</span>
<a id="__codelineno-44-32" name="__codelineno-44-32"></a>        <span class="p">)</span>
<a id="__codelineno-44-33" name="__codelineno-44-33"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_object</span><span class="p">(</span><span class="n">robot</span><span class="p">)</span>
<a id="__codelineno-44-34" name="__codelineno-44-34"></a>
<a id="__codelineno-44-35" name="__codelineno-44-35"></a>        <span class="c1"># At least one step is always needed while sim is playing for any imported object to be fully initialized</span>
<a id="__codelineno-44-36" name="__codelineno-44-36"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<a id="__codelineno-44-37" name="__codelineno-44-37"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<a id="__codelineno-44-38" name="__codelineno-44-38"></a>
<a id="__codelineno-44-39" name="__codelineno-44-39"></a>        <span class="c1"># Reset robot and make sure it&#39;s not moving</span>
<a id="__codelineno-44-40" name="__codelineno-44-40"></a>        <span class="n">robot</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<a id="__codelineno-44-41" name="__codelineno-44-41"></a>        <span class="n">robot</span><span class="o">.</span><span class="n">keep_still</span><span class="p">()</span>
<a id="__codelineno-44-42" name="__codelineno-44-42"></a>
<a id="__codelineno-44-43" name="__codelineno-44-43"></a>        <span class="c1"># Log information</span>
<a id="__codelineno-44-44" name="__codelineno-44-44"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded </span><span class="si">{</span><span class="n">robot_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-44-45" name="__codelineno-44-45"></a>        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Moving </span><span class="si">{</span><span class="n">robot_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-44-46" name="__codelineno-44-46"></a>
<a id="__codelineno-44-47" name="__codelineno-44-47"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">headless</span><span class="p">:</span>
<a id="__codelineno-44-48" name="__codelineno-44-48"></a>            <span class="c1"># Set viewer in front facing robot</span>
<a id="__codelineno-44-49" name="__codelineno-44-49"></a>            <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-44-50" name="__codelineno-44-50"></a>                <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">2.69918369</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.63686664</span><span class="p">,</span>  <span class="mf">4.57894564</span><span class="p">]),</span>
<a id="__codelineno-44-51" name="__codelineno-44-51"></a>                <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.39592411</span><span class="p">,</span> <span class="mf">0.1348514</span> <span class="p">,</span> <span class="mf">0.29286304</span><span class="p">,</span> <span class="mf">0.85982</span>   <span class="p">]),</span>
<a id="__codelineno-44-52" name="__codelineno-44-52"></a>            <span class="p">)</span>
<a id="__codelineno-44-53" name="__codelineno-44-53"></a>
<a id="__codelineno-44-54" name="__codelineno-44-54"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">enable_viewer_camera_teleoperation</span><span class="p">()</span>
<a id="__codelineno-44-55" name="__codelineno-44-55"></a>
<a id="__codelineno-44-56" name="__codelineno-44-56"></a>        <span class="c1"># Hold still briefly so viewer can see robot</span>
<a id="__codelineno-44-57" name="__codelineno-44-57"></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<a id="__codelineno-44-58" name="__codelineno-44-58"></a>            <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<a id="__codelineno-44-59" name="__codelineno-44-59"></a>
<a id="__codelineno-44-60" name="__codelineno-44-60"></a>        <span class="c1"># Then apply random actions for a bit</span>
<a id="__codelineno-44-61" name="__codelineno-44-61"></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
<a id="__codelineno-44-62" name="__codelineno-44-62"></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">robot</span><span class="o">.</span><span class="n">action_dim</span><span class="p">)</span>
<a id="__codelineno-44-63" name="__codelineno-44-63"></a>            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<a id="__codelineno-44-64" name="__codelineno-44-64"></a>                <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
<a id="__codelineno-44-65" name="__codelineno-44-65"></a>
<a id="__codelineno-44-66" name="__codelineno-44-66"></a>        <span class="c1"># Re-import the scene</span>
<a id="__codelineno-44-67" name="__codelineno-44-67"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<a id="__codelineno-44-68" name="__codelineno-44-68"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">import_scene</span><span class="p">(</span><span class="n">Scene</span><span class="p">())</span>
<a id="__codelineno-44-69" name="__codelineno-44-69"></a>
<a id="__codelineno-44-70" name="__codelineno-44-70"></a>    <span class="c1"># Always shut down the environment cleanly at the end</span>
<a id="__codelineno-44-71" name="__codelineno-44-71"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-44-72" name="__codelineno-44-72"></a>
<a id="__codelineno-44-73" name="__codelineno-44-73"></a>
<a id="__codelineno-44-74" name="__codelineno-44-74"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-44-75" name="__codelineno-44-75"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="robot-control-demo"><strong>Robot Control Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how different controllers can be used to control robots</li>
<li>Understanding how to teleoperate a robot through external commands</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">robots</span><span class="o">.</span><span class="n">robot_control_example</span>
</code></pre></div>
<p>This demo lets you choose a robot and the set of controllers to control the robot, and then lets you teleoperate the robot using your keyboard.</p>
<details class="code">
<summary>robot_control_example.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1">  1</a></span>
<span class="normal"><a href="#__codelineno-46-2">  2</a></span>
<span class="normal"><a href="#__codelineno-46-3">  3</a></span>
<span class="normal"><a href="#__codelineno-46-4">  4</a></span>
<span class="normal"><a href="#__codelineno-46-5">  5</a></span>
<span class="normal"><a href="#__codelineno-46-6">  6</a></span>
<span class="normal"><a href="#__codelineno-46-7">  7</a></span>
<span class="normal"><a href="#__codelineno-46-8">  8</a></span>
<span class="normal"><a href="#__codelineno-46-9">  9</a></span>
<span class="normal"><a href="#__codelineno-46-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-46-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-46-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-46-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-46-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-46-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-46-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-46-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-46-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-46-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-46-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-46-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-46-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-46-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-46-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-46-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-46-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-46-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-46-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-46-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-46-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-46-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-46-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-46-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-46-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-46-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-46-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-46-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-46-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-46-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-46-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-46-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-46-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-46-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-46-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-46-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-46-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-46-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-46-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-46-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-46-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-46-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-46-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-46-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-46-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-46-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-46-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-46-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-46-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-46-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-46-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-46-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-46-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-46-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-46-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-46-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-46-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-46-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-46-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-46-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-46-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-46-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-46-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-46-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-46-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-46-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-46-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-46-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-46-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-46-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-46-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-46-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-46-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-46-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-46-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-46-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-46-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-46-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-46-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-46-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-46-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-46-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-46-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-46-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-46-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-46-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-46-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-46-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-46-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-46-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-46-100">100</a></span>
<span class="normal"><a href="#__codelineno-46-101">101</a></span>
<span class="normal"><a href="#__codelineno-46-102">102</a></span>
<span class="normal"><a href="#__codelineno-46-103">103</a></span>
<span class="normal"><a href="#__codelineno-46-104">104</a></span>
<span class="normal"><a href="#__codelineno-46-105">105</a></span>
<span class="normal"><a href="#__codelineno-46-106">106</a></span>
<span class="normal"><a href="#__codelineno-46-107">107</a></span>
<span class="normal"><a href="#__codelineno-46-108">108</a></span>
<span class="normal"><a href="#__codelineno-46-109">109</a></span>
<span class="normal"><a href="#__codelineno-46-110">110</a></span>
<span class="normal"><a href="#__codelineno-46-111">111</a></span>
<span class="normal"><a href="#__codelineno-46-112">112</a></span>
<span class="normal"><a href="#__codelineno-46-113">113</a></span>
<span class="normal"><a href="#__codelineno-46-114">114</a></span>
<span class="normal"><a href="#__codelineno-46-115">115</a></span>
<span class="normal"><a href="#__codelineno-46-116">116</a></span>
<span class="normal"><a href="#__codelineno-46-117">117</a></span>
<span class="normal"><a href="#__codelineno-46-118">118</a></span>
<span class="normal"><a href="#__codelineno-46-119">119</a></span>
<span class="normal"><a href="#__codelineno-46-120">120</a></span>
<span class="normal"><a href="#__codelineno-46-121">121</a></span>
<span class="normal"><a href="#__codelineno-46-122">122</a></span>
<span class="normal"><a href="#__codelineno-46-123">123</a></span>
<span class="normal"><a href="#__codelineno-46-124">124</a></span>
<span class="normal"><a href="#__codelineno-46-125">125</a></span>
<span class="normal"><a href="#__codelineno-46-126">126</a></span>
<span class="normal"><a href="#__codelineno-46-127">127</a></span>
<span class="normal"><a href="#__codelineno-46-128">128</a></span>
<span class="normal"><a href="#__codelineno-46-129">129</a></span>
<span class="normal"><a href="#__codelineno-46-130">130</a></span>
<span class="normal"><a href="#__codelineno-46-131">131</a></span>
<span class="normal"><a href="#__codelineno-46-132">132</a></span>
<span class="normal"><a href="#__codelineno-46-133">133</a></span>
<span class="normal"><a href="#__codelineno-46-134">134</a></span>
<span class="normal"><a href="#__codelineno-46-135">135</a></span>
<span class="normal"><a href="#__codelineno-46-136">136</a></span>
<span class="normal"><a href="#__codelineno-46-137">137</a></span>
<span class="normal"><a href="#__codelineno-46-138">138</a></span>
<span class="normal"><a href="#__codelineno-46-139">139</a></span>
<span class="normal"><a href="#__codelineno-46-140">140</a></span>
<span class="normal"><a href="#__codelineno-46-141">141</a></span>
<span class="normal"><a href="#__codelineno-46-142">142</a></span>
<span class="normal"><a href="#__codelineno-46-143">143</a></span>
<span class="normal"><a href="#__codelineno-46-144">144</a></span>
<span class="normal"><a href="#__codelineno-46-145">145</a></span>
<span class="normal"><a href="#__codelineno-46-146">146</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="sd">Example script demo&#39;ing robot control.</span>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="sd">Options for random actions, as well as selection of robot action space</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-46-7" name="__codelineno-46-7"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-46-8" name="__codelineno-46-8"></a>
<a id="__codelineno-46-9" name="__codelineno-46-9"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-46-10" name="__codelineno-46-10"></a>
<a id="__codelineno-46-11" name="__codelineno-46-11"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-46-12" name="__codelineno-46-12"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-46-13" name="__codelineno-46-13"></a><span class="kn">from</span> <span class="nn">omnigibson.robots</span> <span class="kn">import</span> <span class="n">REGISTERED_ROBOTS</span>
<a id="__codelineno-46-14" name="__codelineno-46-14"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span><span class="p">,</span> <span class="n">KeyboardRobotController</span>
<a id="__codelineno-46-15" name="__codelineno-46-15"></a>
<a id="__codelineno-46-16" name="__codelineno-46-16"></a>
<a id="__codelineno-46-17" name="__codelineno-46-17"></a><span class="n">CONTROL_MODES</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-46-18" name="__codelineno-46-18"></a>    <span class="n">random</span><span class="o">=</span><span class="s2">&quot;Use autonomous random actions (default)&quot;</span><span class="p">,</span>
<a id="__codelineno-46-19" name="__codelineno-46-19"></a>    <span class="n">teleop</span><span class="o">=</span><span class="s2">&quot;Use keyboard control&quot;</span><span class="p">,</span>
<a id="__codelineno-46-20" name="__codelineno-46-20"></a><span class="p">)</span>
<a id="__codelineno-46-21" name="__codelineno-46-21"></a>
<a id="__codelineno-46-22" name="__codelineno-46-22"></a><span class="n">SCENES</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-46-23" name="__codelineno-46-23"></a>    <span class="n">Rs_int</span><span class="o">=</span><span class="s2">&quot;Realistic interactive home environment (default)&quot;</span><span class="p">,</span>
<a id="__codelineno-46-24" name="__codelineno-46-24"></a>    <span class="n">empty</span><span class="o">=</span><span class="s2">&quot;Empty environment with no objects&quot;</span><span class="p">,</span>
<a id="__codelineno-46-25" name="__codelineno-46-25"></a><span class="p">)</span>
<a id="__codelineno-46-26" name="__codelineno-46-26"></a>
<a id="__codelineno-46-27" name="__codelineno-46-27"></a><span class="c1"># Don&#39;t use GPU dynamics and Use flatcache for performance boost</span>
<a id="__codelineno-46-28" name="__codelineno-46-28"></a><span class="n">gm</span><span class="o">.</span><span class="n">USE_GPU_DYNAMICS</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-46-29" name="__codelineno-46-29"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_FLATCACHE</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-46-30" name="__codelineno-46-30"></a>
<a id="__codelineno-46-31" name="__codelineno-46-31"></a>
<a id="__codelineno-46-32" name="__codelineno-46-32"></a><span class="k">def</span> <span class="nf">choose_controllers</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-46-33" name="__codelineno-46-33"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-46-34" name="__codelineno-46-34"></a><span class="sd">    For a given robot, iterates over all components of the robot, and returns the requested controller type for each</span>
<a id="__codelineno-46-35" name="__codelineno-46-35"></a><span class="sd">    component.</span>
<a id="__codelineno-46-36" name="__codelineno-46-36"></a>
<a id="__codelineno-46-37" name="__codelineno-46-37"></a><span class="sd">    :param robot: BaseRobot, robot class from which to infer relevant valid controller options</span>
<a id="__codelineno-46-38" name="__codelineno-46-38"></a><span class="sd">    :param random_selection: bool, if the selection is random (for automatic demo execution). Default False</span>
<a id="__codelineno-46-39" name="__codelineno-46-39"></a>
<a id="__codelineno-46-40" name="__codelineno-46-40"></a><span class="sd">    :return OrderedDict: Mapping from individual robot component (e.g.: base, arm, etc.) to selected controller names</span>
<a id="__codelineno-46-41" name="__codelineno-46-41"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-46-42" name="__codelineno-46-42"></a>    <span class="c1"># Create new dict to store responses from user</span>
<a id="__codelineno-46-43" name="__codelineno-46-43"></a>    <span class="n">controller_choices</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<a id="__codelineno-46-44" name="__codelineno-46-44"></a>
<a id="__codelineno-46-45" name="__codelineno-46-45"></a>    <span class="c1"># Grab the default controller config so we have the registry of all possible controller options</span>
<a id="__codelineno-46-46" name="__codelineno-46-46"></a>    <span class="n">default_config</span> <span class="o">=</span> <span class="n">robot</span><span class="o">.</span><span class="n">_default_controller_config</span>
<a id="__codelineno-46-47" name="__codelineno-46-47"></a>
<a id="__codelineno-46-48" name="__codelineno-46-48"></a>    <span class="c1"># Iterate over all components in robot</span>
<a id="__codelineno-46-49" name="__codelineno-46-49"></a>    <span class="k">for</span> <span class="n">component</span><span class="p">,</span> <span class="n">controller_options</span> <span class="ow">in</span> <span class="n">default_config</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-46-50" name="__codelineno-46-50"></a>        <span class="c1"># Select controller</span>
<a id="__codelineno-46-51" name="__codelineno-46-51"></a>        <span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">controller_options</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<a id="__codelineno-46-52" name="__codelineno-46-52"></a>        <span class="n">choice</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span>
<a id="__codelineno-46-53" name="__codelineno-46-53"></a>            <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> controller&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">component</span><span class="p">),</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span>
<a id="__codelineno-46-54" name="__codelineno-46-54"></a>        <span class="p">)</span>
<a id="__codelineno-46-55" name="__codelineno-46-55"></a>
<a id="__codelineno-46-56" name="__codelineno-46-56"></a>        <span class="c1"># Add to user responses</span>
<a id="__codelineno-46-57" name="__codelineno-46-57"></a>        <span class="n">controller_choices</span><span class="p">[</span><span class="n">component</span><span class="p">]</span> <span class="o">=</span> <span class="n">choice</span>
<a id="__codelineno-46-58" name="__codelineno-46-58"></a>
<a id="__codelineno-46-59" name="__codelineno-46-59"></a>    <span class="k">return</span> <span class="n">controller_choices</span>
<a id="__codelineno-46-60" name="__codelineno-46-60"></a>
<a id="__codelineno-46-61" name="__codelineno-46-61"></a>
<a id="__codelineno-46-62" name="__codelineno-46-62"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-46-63" name="__codelineno-46-63"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-46-64" name="__codelineno-46-64"></a><span class="sd">    Robot control demo with selection</span>
<a id="__codelineno-46-65" name="__codelineno-46-65"></a><span class="sd">    Queries the user to select a robot, the controllers, a scene and a type of input (random actions or teleop)</span>
<a id="__codelineno-46-66" name="__codelineno-46-66"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-46-67" name="__codelineno-46-67"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-46-68" name="__codelineno-46-68"></a>
<a id="__codelineno-46-69" name="__codelineno-46-69"></a>    <span class="c1"># Choose scene to load</span>
<a id="__codelineno-46-70" name="__codelineno-46-70"></a>    <span class="n">scene_model</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">SCENES</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;scene&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-46-71" name="__codelineno-46-71"></a>
<a id="__codelineno-46-72" name="__codelineno-46-72"></a>    <span class="c1"># Choose robot to create</span>
<a id="__codelineno-46-73" name="__codelineno-46-73"></a>    <span class="n">robot_name</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span>
<a id="__codelineno-46-74" name="__codelineno-46-74"></a>        <span class="n">options</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">REGISTERED_ROBOTS</span><span class="o">.</span><span class="n">keys</span><span class="p">())),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;robot&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span>
<a id="__codelineno-46-75" name="__codelineno-46-75"></a>    <span class="p">)</span>
<a id="__codelineno-46-76" name="__codelineno-46-76"></a>
<a id="__codelineno-46-77" name="__codelineno-46-77"></a>    <span class="c1"># Create the config for generating the environment we want</span>
<a id="__codelineno-46-78" name="__codelineno-46-78"></a>    <span class="n">scene_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<a id="__codelineno-46-79" name="__codelineno-46-79"></a>    <span class="k">if</span> <span class="n">scene_model</span> <span class="o">==</span> <span class="s2">&quot;empty&quot;</span><span class="p">:</span>
<a id="__codelineno-46-80" name="__codelineno-46-80"></a>        <span class="n">scene_cfg</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Scene&quot;</span>
<a id="__codelineno-46-81" name="__codelineno-46-81"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-46-82" name="__codelineno-46-82"></a>        <span class="n">scene_cfg</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span>
<a id="__codelineno-46-83" name="__codelineno-46-83"></a>        <span class="n">scene_cfg</span><span class="p">[</span><span class="s2">&quot;scene_model&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scene_model</span>
<a id="__codelineno-46-84" name="__codelineno-46-84"></a>
<a id="__codelineno-46-85" name="__codelineno-46-85"></a>    <span class="c1"># Add the robot we want to load</span>
<a id="__codelineno-46-86" name="__codelineno-46-86"></a>    <span class="n">robot0_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<a id="__codelineno-46-87" name="__codelineno-46-87"></a>    <span class="n">robot0_cfg</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">robot_name</span>
<a id="__codelineno-46-88" name="__codelineno-46-88"></a>    <span class="n">robot0_cfg</span><span class="p">[</span><span class="s2">&quot;obs_modalities&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="s2">&quot;seg_instance&quot;</span><span class="p">,</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span> <span class="s2">&quot;scan&quot;</span><span class="p">,</span> <span class="s2">&quot;occupancy_grid&quot;</span><span class="p">]</span>
<a id="__codelineno-46-89" name="__codelineno-46-89"></a>    <span class="n">robot0_cfg</span><span class="p">[</span><span class="s2">&quot;action_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;continuous&quot;</span>
<a id="__codelineno-46-90" name="__codelineno-46-90"></a>    <span class="n">robot0_cfg</span><span class="p">[</span><span class="s2">&quot;action_normalize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-46-91" name="__codelineno-46-91"></a>
<a id="__codelineno-46-92" name="__codelineno-46-92"></a>    <span class="c1"># Compile config</span>
<a id="__codelineno-46-93" name="__codelineno-46-93"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">scene</span><span class="o">=</span><span class="n">scene_cfg</span><span class="p">,</span> <span class="n">robots</span><span class="o">=</span><span class="p">[</span><span class="n">robot0_cfg</span><span class="p">])</span>
<a id="__codelineno-46-94" name="__codelineno-46-94"></a>
<a id="__codelineno-46-95" name="__codelineno-46-95"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-46-96" name="__codelineno-46-96"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-46-97" name="__codelineno-46-97"></a>
<a id="__codelineno-46-98" name="__codelineno-46-98"></a>    <span class="c1"># Choose robot controller to use</span>
<a id="__codelineno-46-99" name="__codelineno-46-99"></a>    <span class="n">robot</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">robots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-46-100" name="__codelineno-46-100"></a>    <span class="n">controller_choices</span> <span class="o">=</span> <span class="n">choose_controllers</span><span class="p">(</span><span class="n">robot</span><span class="o">=</span><span class="n">robot</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-46-101" name="__codelineno-46-101"></a>
<a id="__codelineno-46-102" name="__codelineno-46-102"></a>    <span class="c1"># Choose control mode</span>
<a id="__codelineno-46-103" name="__codelineno-46-103"></a>    <span class="k">if</span> <span class="n">random_selection</span><span class="p">:</span>
<a id="__codelineno-46-104" name="__codelineno-46-104"></a>        <span class="n">control_mode</span> <span class="o">=</span> <span class="s2">&quot;random&quot;</span>
<a id="__codelineno-46-105" name="__codelineno-46-105"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-46-106" name="__codelineno-46-106"></a>        <span class="n">control_mode</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">CONTROL_MODES</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;control mode&quot;</span><span class="p">)</span>
<a id="__codelineno-46-107" name="__codelineno-46-107"></a>
<a id="__codelineno-46-108" name="__codelineno-46-108"></a>    <span class="c1"># Update the control mode of the robot</span>
<a id="__codelineno-46-109" name="__codelineno-46-109"></a>    <span class="n">controller_config</span> <span class="o">=</span> <span class="p">{</span><span class="n">component</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">}</span> <span class="k">for</span> <span class="n">component</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">controller_choices</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<a id="__codelineno-46-110" name="__codelineno-46-110"></a>    <span class="n">robot</span><span class="o">.</span><span class="n">reload_controllers</span><span class="p">(</span><span class="n">controller_config</span><span class="o">=</span><span class="n">controller_config</span><span class="p">)</span>
<a id="__codelineno-46-111" name="__codelineno-46-111"></a>
<a id="__codelineno-46-112" name="__codelineno-46-112"></a>    <span class="c1"># Update the simulator&#39;s viewer camera&#39;s pose so it points towards the robot</span>
<a id="__codelineno-46-113" name="__codelineno-46-113"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-46-114" name="__codelineno-46-114"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.46949</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.97358</span><span class="p">,</span> <span class="mf">2.21529</span><span class="p">]),</span>
<a id="__codelineno-46-115" name="__codelineno-46-115"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.56829048</span><span class="p">,</span> <span class="mf">0.09569975</span><span class="p">,</span> <span class="mf">0.13571846</span><span class="p">,</span> <span class="mf">0.80589577</span><span class="p">]),</span>
<a id="__codelineno-46-116" name="__codelineno-46-116"></a>    <span class="p">)</span>
<a id="__codelineno-46-117" name="__codelineno-46-117"></a>
<a id="__codelineno-46-118" name="__codelineno-46-118"></a>    <span class="c1"># Reset environment</span>
<a id="__codelineno-46-119" name="__codelineno-46-119"></a>    <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<a id="__codelineno-46-120" name="__codelineno-46-120"></a>
<a id="__codelineno-46-121" name="__codelineno-46-121"></a>    <span class="c1"># Create teleop controller</span>
<a id="__codelineno-46-122" name="__codelineno-46-122"></a>    <span class="n">action_generator</span> <span class="o">=</span> <span class="n">KeyboardRobotController</span><span class="p">(</span><span class="n">robot</span><span class="o">=</span><span class="n">robot</span><span class="p">)</span>
<a id="__codelineno-46-123" name="__codelineno-46-123"></a>
<a id="__codelineno-46-124" name="__codelineno-46-124"></a>    <span class="c1"># Print out relevant keyboard info if using keyboard teleop</span>
<a id="__codelineno-46-125" name="__codelineno-46-125"></a>    <span class="k">if</span> <span class="n">control_mode</span> <span class="o">==</span> <span class="s2">&quot;teleop&quot;</span><span class="p">:</span>
<a id="__codelineno-46-126" name="__codelineno-46-126"></a>        <span class="n">action_generator</span><span class="o">.</span><span class="n">print_keyboard_teleop_info</span><span class="p">()</span>
<a id="__codelineno-46-127" name="__codelineno-46-127"></a>
<a id="__codelineno-46-128" name="__codelineno-46-128"></a>    <span class="c1"># Other helpful user info</span>
<a id="__codelineno-46-129" name="__codelineno-46-129"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running demo.&quot;</span><span class="p">)</span>
<a id="__codelineno-46-130" name="__codelineno-46-130"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Press ESC to quit&quot;</span><span class="p">)</span>
<a id="__codelineno-46-131" name="__codelineno-46-131"></a>
<a id="__codelineno-46-132" name="__codelineno-46-132"></a>    <span class="c1"># Loop control until user quits</span>
<a id="__codelineno-46-133" name="__codelineno-46-133"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">100</span>
<a id="__codelineno-46-134" name="__codelineno-46-134"></a>    <span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-46-135" name="__codelineno-46-135"></a>    <span class="k">while</span> <span class="n">step</span> <span class="o">!=</span> <span class="n">max_steps</span><span class="p">:</span>
<a id="__codelineno-46-136" name="__codelineno-46-136"></a>        <span class="n">action</span> <span class="o">=</span> <span class="n">action_generator</span><span class="o">.</span><span class="n">get_random_action</span><span class="p">()</span> <span class="k">if</span> <span class="n">control_mode</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span> <span class="k">else</span> <span class="n">action_generator</span><span class="o">.</span><span class="n">get_teleop_action</span><span class="p">()</span>
<a id="__codelineno-46-137" name="__codelineno-46-137"></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<a id="__codelineno-46-138" name="__codelineno-46-138"></a>            <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="n">action</span><span class="p">)</span>
<a id="__codelineno-46-139" name="__codelineno-46-139"></a>            <span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-46-140" name="__codelineno-46-140"></a>
<a id="__codelineno-46-141" name="__codelineno-46-141"></a>    <span class="c1"># Always shut down the environment cleanly at the end</span>
<a id="__codelineno-46-142" name="__codelineno-46-142"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-46-143" name="__codelineno-46-143"></a>
<a id="__codelineno-46-144" name="__codelineno-46-144"></a>
<a id="__codelineno-46-145" name="__codelineno-46-145"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-46-146" name="__codelineno-46-146"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h3 id="robot-grasping-demo"><strong>Robot Grasping Demo</strong></h3>
<div class="admonition abstract annotate">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding the difference between <code>physical</code> and <code>sticky</code> (1) grasping</li>
<li>Understanding how to teleoperate a robot through external commands</li>
</ul>
</div>
<ol>
<li><code>physical</code> means natural friction is required to hold objects, <code>sticky</code> means that objects are constrained to the robot's gripper once contact is made</li>
</ol>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">robots</span><span class="o">.</span><span class="n">grasping_mode_example</span>
</code></pre></div>
<p>This demo lets you choose a grasping mode and then loads a <code>Fetch</code> robot and a cube on a table. You can then teleoperate the robot to grasp the cube, observing the difference is grasping behavior based on the grasping mode chosen.</p>
<details class="code">
<summary>grasping_mode_example.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1">  1</a></span>
<span class="normal"><a href="#__codelineno-48-2">  2</a></span>
<span class="normal"><a href="#__codelineno-48-3">  3</a></span>
<span class="normal"><a href="#__codelineno-48-4">  4</a></span>
<span class="normal"><a href="#__codelineno-48-5">  5</a></span>
<span class="normal"><a href="#__codelineno-48-6">  6</a></span>
<span class="normal"><a href="#__codelineno-48-7">  7</a></span>
<span class="normal"><a href="#__codelineno-48-8">  8</a></span>
<span class="normal"><a href="#__codelineno-48-9">  9</a></span>
<span class="normal"><a href="#__codelineno-48-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-48-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-48-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-48-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-48-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-48-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-48-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-48-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-48-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-48-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-48-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-48-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-48-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-48-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-48-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-48-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-48-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-48-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-48-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-48-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-48-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-48-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-48-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-48-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-48-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-48-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-48-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-48-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-48-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-48-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-48-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-48-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-48-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-48-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-48-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-48-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-48-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-48-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-48-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-48-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-48-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-48-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-48-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-48-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-48-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-48-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-48-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-48-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-48-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-48-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-48-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-48-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-48-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-48-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-48-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-48-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-48-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-48-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-48-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-48-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-48-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-48-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-48-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-48-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-48-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-48-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-48-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-48-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-48-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-48-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-48-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-48-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-48-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-48-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-48-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-48-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-48-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-48-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-48-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-48-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-48-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-48-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-48-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-48-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-48-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-48-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-48-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-48-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-48-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-48-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-48-100">100</a></span>
<span class="normal"><a href="#__codelineno-48-101">101</a></span>
<span class="normal"><a href="#__codelineno-48-102">102</a></span>
<span class="normal"><a href="#__codelineno-48-103">103</a></span>
<span class="normal"><a href="#__codelineno-48-104">104</a></span>
<span class="normal"><a href="#__codelineno-48-105">105</a></span>
<span class="normal"><a href="#__codelineno-48-106">106</a></span>
<span class="normal"><a href="#__codelineno-48-107">107</a></span>
<span class="normal"><a href="#__codelineno-48-108">108</a></span>
<span class="normal"><a href="#__codelineno-48-109">109</a></span>
<span class="normal"><a href="#__codelineno-48-110">110</a></span>
<span class="normal"><a href="#__codelineno-48-111">111</a></span>
<span class="normal"><a href="#__codelineno-48-112">112</a></span>
<span class="normal"><a href="#__codelineno-48-113">113</a></span>
<span class="normal"><a href="#__codelineno-48-114">114</a></span>
<span class="normal"><a href="#__codelineno-48-115">115</a></span>
<span class="normal"><a href="#__codelineno-48-116">116</a></span>
<span class="normal"><a href="#__codelineno-48-117">117</a></span>
<span class="normal"><a href="#__codelineno-48-118">118</a></span>
<span class="normal"><a href="#__codelineno-48-119">119</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="sd">Example script demo&#39;ing robot manipulation control with grasping.</span>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a>
<a id="__codelineno-48-7" name="__codelineno-48-7"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-48-8" name="__codelineno-48-8"></a>
<a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-48-10" name="__codelineno-48-10"></a><span class="kn">from</span> <span class="nn">omnigibson.macros</span> <span class="kn">import</span> <span class="n">gm</span>
<a id="__codelineno-48-11" name="__codelineno-48-11"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">choose_from_options</span><span class="p">,</span> <span class="n">KeyboardRobotController</span>
<a id="__codelineno-48-12" name="__codelineno-48-12"></a>
<a id="__codelineno-48-13" name="__codelineno-48-13"></a><span class="n">GRASPING_MODES</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-48-14" name="__codelineno-48-14"></a>    <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;Sticky Mitten - Objects are magnetized when they touch the fingers and a CLOSE command is given&quot;</span><span class="p">,</span>
<a id="__codelineno-48-15" name="__codelineno-48-15"></a>    <span class="n">physical</span><span class="o">=</span><span class="s2">&quot;Physical Grasping - No additional grasping assistance applied&quot;</span><span class="p">,</span>
<a id="__codelineno-48-16" name="__codelineno-48-16"></a><span class="p">)</span>
<a id="__codelineno-48-17" name="__codelineno-48-17"></a>
<a id="__codelineno-48-18" name="__codelineno-48-18"></a><span class="c1"># Don&#39;t use GPU dynamics and Use flatcache for performance boost</span>
<a id="__codelineno-48-19" name="__codelineno-48-19"></a><span class="n">gm</span><span class="o">.</span><span class="n">USE_GPU_DYNAMICS</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-48-20" name="__codelineno-48-20"></a><span class="n">gm</span><span class="o">.</span><span class="n">ENABLE_FLATCACHE</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-48-21" name="__codelineno-48-21"></a>
<a id="__codelineno-48-22" name="__codelineno-48-22"></a>
<a id="__codelineno-48-23" name="__codelineno-48-23"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-48-24" name="__codelineno-48-24"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-48-25" name="__codelineno-48-25"></a><span class="sd">    Robot grasping mode demo with selection</span>
<a id="__codelineno-48-26" name="__codelineno-48-26"></a><span class="sd">    Queries the user to select a type of grasping mode and GUI</span>
<a id="__codelineno-48-27" name="__codelineno-48-27"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-48-28" name="__codelineno-48-28"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-48-29" name="__codelineno-48-29"></a>
<a id="__codelineno-48-30" name="__codelineno-48-30"></a>    <span class="c1"># Choose type of grasping</span>
<a id="__codelineno-48-31" name="__codelineno-48-31"></a>    <span class="n">grasping_mode</span> <span class="o">=</span> <span class="n">choose_from_options</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">GRASPING_MODES</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;grasping mode&quot;</span><span class="p">,</span> <span class="n">random_selection</span><span class="o">=</span><span class="n">random_selection</span><span class="p">)</span>
<a id="__codelineno-48-32" name="__codelineno-48-32"></a>
<a id="__codelineno-48-33" name="__codelineno-48-33"></a>    <span class="c1"># Create environment configuration to use</span>
<a id="__codelineno-48-34" name="__codelineno-48-34"></a>    <span class="n">scene_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;Scene&quot;</span><span class="p">)</span>
<a id="__codelineno-48-35" name="__codelineno-48-35"></a>    <span class="n">robot0_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-48-36" name="__codelineno-48-36"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;Fetch&quot;</span><span class="p">,</span>
<a id="__codelineno-48-37" name="__codelineno-48-37"></a>        <span class="n">obs_modalities</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">],</span>     <span class="c1"># we&#39;re just doing a grasping demo so we don&#39;t need all observation modalities</span>
<a id="__codelineno-48-38" name="__codelineno-48-38"></a>        <span class="n">action_type</span><span class="o">=</span><span class="s2">&quot;continuous&quot;</span><span class="p">,</span>
<a id="__codelineno-48-39" name="__codelineno-48-39"></a>        <span class="n">action_normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-48-40" name="__codelineno-48-40"></a>        <span class="n">grasping_mode</span><span class="o">=</span><span class="n">grasping_mode</span><span class="p">,</span>
<a id="__codelineno-48-41" name="__codelineno-48-41"></a>    <span class="p">)</span>
<a id="__codelineno-48-42" name="__codelineno-48-42"></a>
<a id="__codelineno-48-43" name="__codelineno-48-43"></a>    <span class="c1"># Define objects to load</span>
<a id="__codelineno-48-44" name="__codelineno-48-44"></a>    <span class="n">table_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-48-45" name="__codelineno-48-45"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-48-46" name="__codelineno-48-46"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">,</span>
<a id="__codelineno-48-47" name="__codelineno-48-47"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;breakfast_table&quot;</span><span class="p">,</span>
<a id="__codelineno-48-48" name="__codelineno-48-48"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;1b4e6f9dd22a8c628ef9d976af675b86&quot;</span><span class="p">,</span>
<a id="__codelineno-48-49" name="__codelineno-48-49"></a>        <span class="n">bounding_box</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">],</span>
<a id="__codelineno-48-50" name="__codelineno-48-50"></a>        <span class="n">fit_avg_dim_volume</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-48-51" name="__codelineno-48-51"></a>        <span class="n">fixed_base</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-48-52" name="__codelineno-48-52"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">],</span>
<a id="__codelineno-48-53" name="__codelineno-48-53"></a>        <span class="n">orientation</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.707</span><span class="p">,</span> <span class="mf">0.707</span><span class="p">],</span>
<a id="__codelineno-48-54" name="__codelineno-48-54"></a>    <span class="p">)</span>
<a id="__codelineno-48-55" name="__codelineno-48-55"></a>
<a id="__codelineno-48-56" name="__codelineno-48-56"></a>    <span class="n">chair_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-48-57" name="__codelineno-48-57"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;DatasetObject&quot;</span><span class="p">,</span>
<a id="__codelineno-48-58" name="__codelineno-48-58"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;chair&quot;</span><span class="p">,</span>
<a id="__codelineno-48-59" name="__codelineno-48-59"></a>        <span class="n">category</span><span class="o">=</span><span class="s2">&quot;straight_chair&quot;</span><span class="p">,</span>
<a id="__codelineno-48-60" name="__codelineno-48-60"></a>        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;2a8d87523e23a01d5f40874aec1ee3a6&quot;</span><span class="p">,</span>
<a id="__codelineno-48-61" name="__codelineno-48-61"></a>        <span class="n">bounding_box</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-48-62" name="__codelineno-48-62"></a>        <span class="n">fit_avg_dim_volume</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-48-63" name="__codelineno-48-63"></a>        <span class="n">fixed_base</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-48-64" name="__codelineno-48-64"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">0.45</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.425</span><span class="p">],</span>
<a id="__codelineno-48-65" name="__codelineno-48-65"></a>        <span class="n">orientation</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.9990215</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.0442276</span><span class="p">],</span>
<a id="__codelineno-48-66" name="__codelineno-48-66"></a>    <span class="p">)</span>
<a id="__codelineno-48-67" name="__codelineno-48-67"></a>
<a id="__codelineno-48-68" name="__codelineno-48-68"></a>    <span class="n">box_cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-48-69" name="__codelineno-48-69"></a>        <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;PrimitiveObject&quot;</span><span class="p">,</span>
<a id="__codelineno-48-70" name="__codelineno-48-70"></a>        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;box&quot;</span><span class="p">,</span>
<a id="__codelineno-48-71" name="__codelineno-48-71"></a>        <span class="n">primitive_type</span><span class="o">=</span><span class="s2">&quot;Cube&quot;</span><span class="p">,</span>
<a id="__codelineno-48-72" name="__codelineno-48-72"></a>        <span class="n">rgba</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<a id="__codelineno-48-73" name="__codelineno-48-73"></a>        <span class="n">size</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
<a id="__codelineno-48-74" name="__codelineno-48-74"></a>        <span class="n">position</span><span class="o">=</span><span class="p">[</span><span class="mf">0.53</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">],</span>
<a id="__codelineno-48-75" name="__codelineno-48-75"></a>    <span class="p">)</span>
<a id="__codelineno-48-76" name="__codelineno-48-76"></a>
<a id="__codelineno-48-77" name="__codelineno-48-77"></a>    <span class="c1"># Compile config</span>
<a id="__codelineno-48-78" name="__codelineno-48-78"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">scene</span><span class="o">=</span><span class="n">scene_cfg</span><span class="p">,</span> <span class="n">robots</span><span class="o">=</span><span class="p">[</span><span class="n">robot0_cfg</span><span class="p">],</span> <span class="n">objects</span><span class="o">=</span><span class="p">[</span><span class="n">table_cfg</span><span class="p">,</span> <span class="n">chair_cfg</span><span class="p">,</span> <span class="n">box_cfg</span><span class="p">])</span>
<a id="__codelineno-48-79" name="__codelineno-48-79"></a>
<a id="__codelineno-48-80" name="__codelineno-48-80"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-48-81" name="__codelineno-48-81"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">,</span> <span class="n">action_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">,</span> <span class="n">physics_timestep</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">60.</span><span class="p">)</span>
<a id="__codelineno-48-82" name="__codelineno-48-82"></a>
<a id="__codelineno-48-83" name="__codelineno-48-83"></a>    <span class="c1"># Reset the robot</span>
<a id="__codelineno-48-84" name="__codelineno-48-84"></a>    <span class="n">robot</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">robots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-48-85" name="__codelineno-48-85"></a>    <span class="n">robot</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-48-86" name="__codelineno-48-86"></a>    <span class="n">robot</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<a id="__codelineno-48-87" name="__codelineno-48-87"></a>    <span class="n">robot</span><span class="o">.</span><span class="n">keep_still</span><span class="p">()</span>
<a id="__codelineno-48-88" name="__codelineno-48-88"></a>
<a id="__codelineno-48-89" name="__codelineno-48-89"></a>    <span class="c1"># Update the simulator&#39;s viewer camera&#39;s pose so it points towards the robot</span>
<a id="__codelineno-48-90" name="__codelineno-48-90"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-48-91" name="__codelineno-48-91"></a>        <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">2.39951</span><span class="p">,</span>  <span class="mf">2.26469</span><span class="p">,</span>  <span class="mf">2.66227</span><span class="p">]),</span>
<a id="__codelineno-48-92" name="__codelineno-48-92"></a>        <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.23898481</span><span class="p">,</span>  <span class="mf">0.48475231</span><span class="p">,</span>  <span class="mf">0.75464013</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.37204802</span><span class="p">]),</span>
<a id="__codelineno-48-93" name="__codelineno-48-93"></a>    <span class="p">)</span>
<a id="__codelineno-48-94" name="__codelineno-48-94"></a>
<a id="__codelineno-48-95" name="__codelineno-48-95"></a>    <span class="c1"># Create teleop controller</span>
<a id="__codelineno-48-96" name="__codelineno-48-96"></a>    <span class="n">action_generator</span> <span class="o">=</span> <span class="n">KeyboardRobotController</span><span class="p">(</span><span class="n">robot</span><span class="o">=</span><span class="n">robot</span><span class="p">)</span>
<a id="__codelineno-48-97" name="__codelineno-48-97"></a>
<a id="__codelineno-48-98" name="__codelineno-48-98"></a>    <span class="c1"># Print out relevant keyboard info if using keyboard teleop</span>
<a id="__codelineno-48-99" name="__codelineno-48-99"></a>    <span class="n">action_generator</span><span class="o">.</span><span class="n">print_keyboard_teleop_info</span><span class="p">()</span>
<a id="__codelineno-48-100" name="__codelineno-48-100"></a>
<a id="__codelineno-48-101" name="__codelineno-48-101"></a>    <span class="c1"># Other helpful user info</span>
<a id="__codelineno-48-102" name="__codelineno-48-102"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running demo with grasping mode </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">grasping_mode</span><span class="p">))</span>
<a id="__codelineno-48-103" name="__codelineno-48-103"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Press ESC to quit&quot;</span><span class="p">)</span>
<a id="__codelineno-48-104" name="__codelineno-48-104"></a>
<a id="__codelineno-48-105" name="__codelineno-48-105"></a>    <span class="c1"># Loop control until user quits</span>
<a id="__codelineno-48-106" name="__codelineno-48-106"></a>    <span class="n">max_steps</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="k">else</span> <span class="mi">100</span>
<a id="__codelineno-48-107" name="__codelineno-48-107"></a>    <span class="n">step</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-48-108" name="__codelineno-48-108"></a>    <span class="k">while</span> <span class="n">step</span> <span class="o">!=</span> <span class="n">max_steps</span><span class="p">:</span>
<a id="__codelineno-48-109" name="__codelineno-48-109"></a>        <span class="n">action</span> <span class="o">=</span> <span class="n">action_generator</span><span class="o">.</span><span class="n">get_random_action</span><span class="p">()</span> <span class="k">if</span> <span class="n">random_selection</span> <span class="k">else</span> <span class="n">action_generator</span><span class="o">.</span><span class="n">get_teleop_action</span><span class="p">()</span>
<a id="__codelineno-48-110" name="__codelineno-48-110"></a>        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
<a id="__codelineno-48-111" name="__codelineno-48-111"></a>            <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
<a id="__codelineno-48-112" name="__codelineno-48-112"></a>            <span class="n">step</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-48-113" name="__codelineno-48-113"></a>
<a id="__codelineno-48-114" name="__codelineno-48-114"></a>    <span class="c1"># Always shut down the environment cleanly at the end</span>
<a id="__codelineno-48-115" name="__codelineno-48-115"></a>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<a id="__codelineno-48-116" name="__codelineno-48-116"></a>
<a id="__codelineno-48-117" name="__codelineno-48-117"></a>
<a id="__codelineno-48-118" name="__codelineno-48-118"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-48-119" name="__codelineno-48-119"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>
<h2 id="simulator">🧰 <strong>Simulator</strong></h2>
<p>These examples showcase useful functionality from <strong><code>OmniGibson</code></strong>'s monolithic <code>Simulator</code> object.</p>
<details class="question">
<summary>What's the difference between <code>Environment</code> and <code>Simulator</code>?</summary>
<p>The <a href="../../reference/simulator"><code>Simulator</code></a> class is a lower-level object that:</p>
<ul>
<li>handles importing scenes and objects into the actual simulation</li>
<li>directly interfaces with the underlying physics engine</li>
</ul>
<p>The <a href="../../reference/environemnts/base_env"><code>Environment</code></a> class thinly wraps the <code>Simulator</code>'s core functionality, by:</p>
<ul>
<li>providing convenience functions for automatically importing a predefined scene, object(s), and robot(s) (via the <code>cfg</code> argument), as well as a <a href="../../reference/tasks/task_base"><code>task</code></a></li>
<li>providing a OpenAI Gym interface for stepping through the simulation</li>
</ul>
<p>While most of the core functionality in <code>Environment</code> (as well as more fine-grained physics control) can be replicated via direct calls to <code>Simulator</code> (<code>og.sim</code>), it requires deeper understanding of <strong><code>OmniGibson</code></strong>'s infrastructure and is not recommended for new users.</p>
</details>
<h3 id="state-saving-and-loading-demo"><strong>State Saving and Loading Demo</strong></h3>
<div class="admonition abstract">
<p class="admonition-title">This demo is useful for...</p>
<ul>
<li>Understanding how to interact with objects using the mouse</li>
<li>Understanding how to save the active simulator state to a file</li>
<li>Understanding how to restore the simulator state from a given file</li>
</ul>
</div>
<div class="annotate highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">omnigibson</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">simulator</span><span class="o">.</span><span class="n">sim_save_load_example</span>
</code></pre></div>
<p>This demo loads a stripped-down scene with the <code>Turtlebot</code> robot, and lets you interact with objects to modify the scene. The state is then saved, written to a <code>.json</code> file, and then restored in the simulation.</p>
<details class="code">
<summary>sim_save_load_example.py</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-50-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-50-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-50-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-50-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-50-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-50-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-50-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-50-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-50-10">10</a></span>
<span class="normal"><a href="#__codelineno-50-11">11</a></span>
<span class="normal"><a href="#__codelineno-50-12">12</a></span>
<span class="normal"><a href="#__codelineno-50-13">13</a></span>
<span class="normal"><a href="#__codelineno-50-14">14</a></span>
<span class="normal"><a href="#__codelineno-50-15">15</a></span>
<span class="normal"><a href="#__codelineno-50-16">16</a></span>
<span class="normal"><a href="#__codelineno-50-17">17</a></span>
<span class="normal"><a href="#__codelineno-50-18">18</a></span>
<span class="normal"><a href="#__codelineno-50-19">19</a></span>
<span class="normal"><a href="#__codelineno-50-20">20</a></span>
<span class="normal"><a href="#__codelineno-50-21">21</a></span>
<span class="normal"><a href="#__codelineno-50-22">22</a></span>
<span class="normal"><a href="#__codelineno-50-23">23</a></span>
<span class="normal"><a href="#__codelineno-50-24">24</a></span>
<span class="normal"><a href="#__codelineno-50-25">25</a></span>
<span class="normal"><a href="#__codelineno-50-26">26</a></span>
<span class="normal"><a href="#__codelineno-50-27">27</a></span>
<span class="normal"><a href="#__codelineno-50-28">28</a></span>
<span class="normal"><a href="#__codelineno-50-29">29</a></span>
<span class="normal"><a href="#__codelineno-50-30">30</a></span>
<span class="normal"><a href="#__codelineno-50-31">31</a></span>
<span class="normal"><a href="#__codelineno-50-32">32</a></span>
<span class="normal"><a href="#__codelineno-50-33">33</a></span>
<span class="normal"><a href="#__codelineno-50-34">34</a></span>
<span class="normal"><a href="#__codelineno-50-35">35</a></span>
<span class="normal"><a href="#__codelineno-50-36">36</a></span>
<span class="normal"><a href="#__codelineno-50-37">37</a></span>
<span class="normal"><a href="#__codelineno-50-38">38</a></span>
<span class="normal"><a href="#__codelineno-50-39">39</a></span>
<span class="normal"><a href="#__codelineno-50-40">40</a></span>
<span class="normal"><a href="#__codelineno-50-41">41</a></span>
<span class="normal"><a href="#__codelineno-50-42">42</a></span>
<span class="normal"><a href="#__codelineno-50-43">43</a></span>
<span class="normal"><a href="#__codelineno-50-44">44</a></span>
<span class="normal"><a href="#__codelineno-50-45">45</a></span>
<span class="normal"><a href="#__codelineno-50-46">46</a></span>
<span class="normal"><a href="#__codelineno-50-47">47</a></span>
<span class="normal"><a href="#__codelineno-50-48">48</a></span>
<span class="normal"><a href="#__codelineno-50-49">49</a></span>
<span class="normal"><a href="#__codelineno-50-50">50</a></span>
<span class="normal"><a href="#__codelineno-50-51">51</a></span>
<span class="normal"><a href="#__codelineno-50-52">52</a></span>
<span class="normal"><a href="#__codelineno-50-53">53</a></span>
<span class="normal"><a href="#__codelineno-50-54">54</a></span>
<span class="normal"><a href="#__codelineno-50-55">55</a></span>
<span class="normal"><a href="#__codelineno-50-56">56</a></span>
<span class="normal"><a href="#__codelineno-50-57">57</a></span>
<span class="normal"><a href="#__codelineno-50-58">58</a></span>
<span class="normal"><a href="#__codelineno-50-59">59</a></span>
<span class="normal"><a href="#__codelineno-50-60">60</a></span>
<span class="normal"><a href="#__codelineno-50-61">61</a></span>
<span class="normal"><a href="#__codelineno-50-62">62</a></span>
<span class="normal"><a href="#__codelineno-50-63">63</a></span>
<span class="normal"><a href="#__codelineno-50-64">64</a></span>
<span class="normal"><a href="#__codelineno-50-65">65</a></span>
<span class="normal"><a href="#__codelineno-50-66">66</a></span>
<span class="normal"><a href="#__codelineno-50-67">67</a></span>
<span class="normal"><a href="#__codelineno-50-68">68</a></span>
<span class="normal"><a href="#__codelineno-50-69">69</a></span>
<span class="normal"><a href="#__codelineno-50-70">70</a></span>
<span class="normal"><a href="#__codelineno-50-71">71</a></span>
<span class="normal"><a href="#__codelineno-50-72">72</a></span>
<span class="normal"><a href="#__codelineno-50-73">73</a></span>
<span class="normal"><a href="#__codelineno-50-74">74</a></span>
<span class="normal"><a href="#__codelineno-50-75">75</a></span>
<span class="normal"><a href="#__codelineno-50-76">76</a></span>
<span class="normal"><a href="#__codelineno-50-77">77</a></span>
<span class="normal"><a href="#__codelineno-50-78">78</a></span>
<span class="normal"><a href="#__codelineno-50-79">79</a></span>
<span class="normal"><a href="#__codelineno-50-80">80</a></span>
<span class="normal"><a href="#__codelineno-50-81">81</a></span>
<span class="normal"><a href="#__codelineno-50-82">82</a></span>
<span class="normal"><a href="#__codelineno-50-83">83</a></span>
<span class="normal"><a href="#__codelineno-50-84">84</a></span>
<span class="normal"><a href="#__codelineno-50-85">85</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="kn">import</span> <span class="nn">os</span>
<a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="kn">import</span> <span class="nn">logging</span>
<a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-50-4" name="__codelineno-50-4"></a>
<a id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="kn">import</span> <span class="nn">omnigibson</span> <span class="k">as</span> <span class="nn">og</span>
<a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="kn">from</span> <span class="nn">omnigibson.utils.ui_utils</span> <span class="kn">import</span> <span class="n">KeyboardEventHandler</span>
<a id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="kn">import</span> <span class="nn">carb</span>
<a id="__codelineno-50-8" name="__codelineno-50-8"></a>
<a id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="n">TEST_OUT_PATH</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># Define output directory here.</span>
<a id="__codelineno-50-10" name="__codelineno-50-10"></a>
<a id="__codelineno-50-11" name="__codelineno-50-11"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">random_selection</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">headless</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">short_exec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-50-12" name="__codelineno-50-12"></a>    <span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="sd">    Prompts the user to select whether they are saving or loading an environment, and interactively</span>
<a id="__codelineno-50-14" name="__codelineno-50-14"></a><span class="sd">    shows how an environment can be saved or restored.</span>
<a id="__codelineno-50-15" name="__codelineno-50-15"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-50-16" name="__codelineno-50-16"></a>    <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Description:&quot;</span> <span class="o">+</span> <span class="n">main</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">*</span> <span class="mi">80</span><span class="p">)</span>
<a id="__codelineno-50-17" name="__codelineno-50-17"></a>
<a id="__codelineno-50-18" name="__codelineno-50-18"></a>    <span class="n">cfg</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-50-19" name="__codelineno-50-19"></a>        <span class="s2">&quot;scene&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-50-20" name="__codelineno-50-20"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;InteractiveTraversableScene&quot;</span><span class="p">,</span>
<a id="__codelineno-50-21" name="__codelineno-50-21"></a>            <span class="s2">&quot;scene_model&quot;</span><span class="p">:</span> <span class="s2">&quot;Rs_int&quot;</span><span class="p">,</span>
<a id="__codelineno-50-22" name="__codelineno-50-22"></a>            <span class="s2">&quot;load_object_categories&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;floors&quot;</span><span class="p">,</span> <span class="s2">&quot;walls&quot;</span><span class="p">,</span> <span class="s2">&quot;bed&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_cabinet&quot;</span><span class="p">,</span> <span class="s2">&quot;chair&quot;</span><span class="p">],</span>
<a id="__codelineno-50-23" name="__codelineno-50-23"></a>        <span class="p">},</span>
<a id="__codelineno-50-24" name="__codelineno-50-24"></a>        <span class="s2">&quot;robots&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-50-25" name="__codelineno-50-25"></a>            <span class="p">{</span>
<a id="__codelineno-50-26" name="__codelineno-50-26"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Turtlebot&quot;</span><span class="p">,</span>
<a id="__codelineno-50-27" name="__codelineno-50-27"></a>                <span class="s2">&quot;obs_modalities&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;rgb&quot;</span><span class="p">,</span> <span class="s2">&quot;depth&quot;</span><span class="p">],</span>
<a id="__codelineno-50-28" name="__codelineno-50-28"></a>            <span class="p">},</span>
<a id="__codelineno-50-29" name="__codelineno-50-29"></a>        <span class="p">],</span>
<a id="__codelineno-50-30" name="__codelineno-50-30"></a>    <span class="p">}</span>
<a id="__codelineno-50-31" name="__codelineno-50-31"></a>
<a id="__codelineno-50-32" name="__codelineno-50-32"></a>    <span class="c1"># Create the environment</span>
<a id="__codelineno-50-33" name="__codelineno-50-33"></a>    <span class="n">env</span> <span class="o">=</span> <span class="n">og</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">configs</span><span class="o">=</span><span class="n">cfg</span><span class="p">)</span>
<a id="__codelineno-50-34" name="__codelineno-50-34"></a>
<a id="__codelineno-50-35" name="__codelineno-50-35"></a>    <span class="c1"># Set the camera to a good angle</span>
<a id="__codelineno-50-36" name="__codelineno-50-36"></a>    <span class="k">def</span> <span class="nf">set_camera_pose</span><span class="p">():</span>
<a id="__codelineno-50-37" name="__codelineno-50-37"></a>        <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">viewer_camera</span><span class="o">.</span><span class="n">set_position_orientation</span><span class="p">(</span>
<a id="__codelineno-50-38" name="__codelineno-50-38"></a>            <span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.229375</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.40576</span> <span class="p">,</span>  <span class="mf">7.26143</span> <span class="p">]),</span>
<a id="__codelineno-50-39" name="__codelineno-50-39"></a>            <span class="n">orientation</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mf">0.27619733</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00230233</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00801152</span><span class="p">,</span>  <span class="mf">0.9610648</span> <span class="p">]),</span>
<a id="__codelineno-50-40" name="__codelineno-50-40"></a>        <span class="p">)</span>
<a id="__codelineno-50-41" name="__codelineno-50-41"></a>    <span class="n">set_camera_pose</span><span class="p">()</span>
<a id="__codelineno-50-42" name="__codelineno-50-42"></a>
<a id="__codelineno-50-43" name="__codelineno-50-43"></a>    <span class="c1"># Give user instructions, and then loop until completed</span>
<a id="__codelineno-50-44" name="__codelineno-50-44"></a>    <span class="n">completed</span> <span class="o">=</span> <span class="n">short_exec</span>
<a id="__codelineno-50-45" name="__codelineno-50-45"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">random_selection</span><span class="p">:</span>
<a id="__codelineno-50-46" name="__codelineno-50-46"></a>        <span class="c1"># Notify user to manipulate environment until ready, then press Z to exit</span>
<a id="__codelineno-50-47" name="__codelineno-50-47"></a>        <span class="nb">print</span><span class="p">()</span>
<a id="__codelineno-50-48" name="__codelineno-50-48"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Modify the scene by SHIFT + left clicking objects and dragging them. Once finished, press Z.&quot;</span><span class="p">)</span>
<a id="__codelineno-50-49" name="__codelineno-50-49"></a>        <span class="c1"># Register callback so user knows to press space once they&#39;re done manipulating the scene</span>
<a id="__codelineno-50-50" name="__codelineno-50-50"></a>        <span class="k">def</span> <span class="nf">complete_loop</span><span class="p">():</span>
<a id="__codelineno-50-51" name="__codelineno-50-51"></a>            <span class="k">nonlocal</span> <span class="n">completed</span>
<a id="__codelineno-50-52" name="__codelineno-50-52"></a>            <span class="n">completed</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-50-53" name="__codelineno-50-53"></a>        <span class="n">KeyboardEventHandler</span><span class="o">.</span><span class="n">add_keyboard_callback</span><span class="p">(</span><span class="n">carb</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyboardInput</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="n">complete_loop</span><span class="p">)</span>
<a id="__codelineno-50-54" name="__codelineno-50-54"></a>    <span class="k">while</span> <span class="ow">not</span> <span class="n">completed</span><span class="p">:</span>
<a id="__codelineno-50-55" name="__codelineno-50-55"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">env</span><span class="o">.</span><span class="n">robots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">action_dim</span><span class="p">))</span>
<a id="__codelineno-50-56" name="__codelineno-50-56"></a>
<a id="__codelineno-50-57" name="__codelineno-50-57"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Completed scene modification, saving scene...&quot;</span><span class="p">)</span>
<a id="__codelineno-50-58" name="__codelineno-50-58"></a>    <span class="n">save_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">TEST_OUT_PATH</span><span class="p">,</span> <span class="s2">&quot;saved_stage.json&quot;</span><span class="p">)</span>
<a id="__codelineno-50-59" name="__codelineno-50-59"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">json_path</span><span class="o">=</span><span class="n">save_path</span><span class="p">)</span>
<a id="__codelineno-50-60" name="__codelineno-50-60"></a>
<a id="__codelineno-50-61" name="__codelineno-50-61"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Re-loading scene...&quot;</span><span class="p">)</span>
<a id="__codelineno-50-62" name="__codelineno-50-62"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">restore</span><span class="p">(</span><span class="n">json_path</span><span class="o">=</span><span class="n">save_path</span><span class="p">)</span>
<a id="__codelineno-50-63" name="__codelineno-50-63"></a>
<a id="__codelineno-50-64" name="__codelineno-50-64"></a>    <span class="c1"># Take a sim step and play</span>
<a id="__codelineno-50-65" name="__codelineno-50-65"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">step</span><span class="p">()</span>
<a id="__codelineno-50-66" name="__codelineno-50-66"></a>    <span class="n">og</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<a id="__codelineno-50-67" name="__codelineno-50-67"></a>    <span class="n">set_camera_pose</span><span class="p">()</span>
<a id="__codelineno-50-68" name="__codelineno-50-68"></a>
<a id="__codelineno-50-69" name="__codelineno-50-69"></a>    <span class="c1"># Loop until user terminates</span>
<a id="__codelineno-50-70" name="__codelineno-50-70"></a>    <span class="n">completed</span> <span class="o">=</span> <span class="n">short_exec</span>
<a id="__codelineno-50-71" name="__codelineno-50-71"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">short_exec</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">random_selection</span><span class="p">:</span>
<a id="__codelineno-50-72" name="__codelineno-50-72"></a>        <span class="c1"># Notify user to manipulate environment until ready, then press Z to exit</span>
<a id="__codelineno-50-73" name="__codelineno-50-73"></a>        <span class="nb">print</span><span class="p">()</span>
<a id="__codelineno-50-74" name="__codelineno-50-74"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;View reloaded scene. Once finished, press Z.&quot;</span><span class="p">)</span>
<a id="__codelineno-50-75" name="__codelineno-50-75"></a>        <span class="c1"># Register callback so user knows to press space once they&#39;re done manipulating the scene</span>
<a id="__codelineno-50-76" name="__codelineno-50-76"></a>        <span class="n">KeyboardEventHandler</span><span class="o">.</span><span class="n">add_keyboard_callback</span><span class="p">(</span><span class="n">carb</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyboardInput</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="n">complete_loop</span><span class="p">)</span>
<a id="__codelineno-50-77" name="__codelineno-50-77"></a>    <span class="k">while</span> <span class="ow">not</span> <span class="n">completed</span><span class="p">:</span>
<a id="__codelineno-50-78" name="__codelineno-50-78"></a>        <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">robots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">action_dim</span><span class="p">))</span>
<a id="__codelineno-50-79" name="__codelineno-50-79"></a>
<a id="__codelineno-50-80" name="__codelineno-50-80"></a>    <span class="c1"># Shutdown omnigibson at the end</span>
<a id="__codelineno-50-81" name="__codelineno-50-81"></a>    <span class="n">og</span><span class="o">.</span><span class="n">shutdown</span><span class="p">()</span>
<a id="__codelineno-50-82" name="__codelineno-50-82"></a>
<a id="__codelineno-50-83" name="__codelineno-50-83"></a>
<a id="__codelineno-50-84" name="__codelineno-50-84"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-50-85" name="__codelineno-50-85"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
</details>

  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="quickstart.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Quickstart" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Quickstart
            </div>
          </div>
        </a>
      
      
        
        <a href="../reference/app_omni.html" class="md-footer__link md-footer__link--next" aria-label="Next: app_omni" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              app_omni
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs Insiders
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.tabs"], "search": "../assets/javascripts/workers/search.939a4419.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.af94fead.min.js"></script>
      
    
    
  </body>
</html>